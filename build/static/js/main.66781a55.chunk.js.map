{"version":3,"sources":["components/HomePage.js","components/AccountPage.js","hooks/react-table-creator.js","functions/functions.js","components/DnaSearchResults.js","components/ProteinSearchResults.js","hooks/useDetectOutsideClick.js","assets/downArrow.png","components/DropDown.js","assets/accountIcon.png","components/Navbar.js","assets/homeIcon.png","assets/spannerIcon.png","assets/searchIcon.png","components/NavBarSearchResultItems.js","components/detailsPages/NavbarSearchResults.js","components/QueryFormPage.js","components/detailsPages/ClassDetail.js","components/detailsPages/FamilyDetail.js","components/detailsPages/ProteinNameDetail.js","components/detailsPages/ProteinRecordDetail.js","components/detailsPages/DnaDetail.js","components/TissueExpression/TeGraphs.js","components/TissueExpression/TeContainer.js","components/TissueExpression/TeUserUpload.js","components/SignUp.js","components/SignIn.js","components/ConfirmSignUp.js","assets/architecture_diagrams/queryRawSeq.png","assets/architecture_diagrams/queryRawSeqSmall.png","components/Documentation.js","aws-exports.js","App.js","reportWebVitals.js","index.js"],"names":["HomePage","useState","className","to","class","href","AccountPage","style","collectUniqueValsFun","columnsToFilter","collectUniqueVals","columnHeader","fieldValue","includes","push","createLinkItem","columnsHaveLinks","linkPathEnd","fieldValueFIN","Array","isArray","FilterOut","excludeRow","value","filterVal","useTableScript","tableData","columnsHaveList","customColumns","columnHeaders","objForFilterState","i","length","filters","setFilters","rowList","k","entry","rowScript","fieldScript","j","hasLink","Object","keys","hasList","tmp","props","children","fieldValListLen","map","excludeRow_ListCheck","fieldScriptTmp","listEntry","size","itemsPerPage","currentPage","setCurrentPage","paginatedRowList","reduce","acc","val","idx","Math","floor","pagesCutOff","numPages","start","end","ceiling","ceil","startEndPaginateLinks","linkNewPage","e","target","id","Number","pageLinks","a","onClick","unshift","handleFilter","filtersNew","filterDropdowns","entries","filterVariables","filterOptions","option","onChange","FilterDNAProts","proteins","split","protein","filter_bool","console","log","DnaSearchResults","querying","string","processedData","data","prot_idURL","protURL","listOffSet","current","prev","prot_id","protIdLink","protspl","prot","protLinks","dna_id","processDNAQueryProts","JSON","parse","location","state","dataTable","filterDropdownsRaw","filterLabels","filterVariable","scope","MultiValStringColLink","div","baseurl","vals","ProteinSearchResults","dataResponse","match","params","query","proteinQueryTable","useDetectOutsideClick","el","initialState","isActive","setIsActive","useEffect","pageClickEvent","contains","window","addEventListener","removeEventListener","DropdownMenu","dropdownRef","useRef","options","route","title","function","classes","ref","heading","Navbar","history","useHistory","handleSubmit","preventDefault","search","search_input","axios","get","setMobileSearchBarActive","pathname","stringify","body","fetchData","Auth","signOut","mobileSearchBarActive","dropdownMobileRef","mobileToolsActive","setMobileToolsActive","toolOptions","signInOption","signedInOptions","src","onSubmit","type","name","placeholder","downArrow","user","accountIcon","NavbarSearchResultItems","items","item","pathName","entity","NavbarSearchResults","classResultsScript","rtClass","description","substr","dnaResultsScript","dna_ids","familiesResultsScript","families","proteinResultsScript","prot_idResultsScript","prot_ids","QueryFormPage","setLoading","setQuerying","setSuccess","setErrorMessage","file","setFile","inputType","setInputType","setError","onInputTypeChange","submitFile","metadata","username","SubmitFormParams","signInUserSession","idToken","jwtToken","response","signedURL","url","defineProperty","writable","key","put","axiosResponse","info","inputFields","files","queryLoading","queryForm","sequenceType","res","statusCode","submitManual","for","checked","disabled","ClassDetail","setRtClass","setProteins","setFamilies","setDescription","FetchData","proteinsScript","familiesScript","family","descriptionScript","paragraph","FamilyDetail","family_id","setFamily","setData","then","dnaListScript","ProteinNameDetail","knownprotein","proteinName","setProteinName","proteinFunction","setProteinFunction","sequence","setSequence","uniprotAccession","setUniprotAccession","accession","proteinFunctionScript","ProteinRecordDetail","protId","setProtId","dnaId","setDnaId","coords","setCoords","knownProt","setKnownProt","protein_id","prot_seq","known_prot","proteinNameListScript","proteinFunctions","DnaDetail","setId","proteinRecords","setProteinRecords","dna_seq","protein_data","proteinScript","protrec","protnames","TeGraphComponent","setTissue","tissueSelectedGet","tissueSelected","tissue","counts","chartContainer","setChartInstance","chartConfig","responsive","maintainAspectRatio","labels","datasets","label","values","borderWidth","backgroundColor","scales","yAxes","ticks","beginAtZero","precision","newChartInstance","Chartjs","TeContainer","setTissueSelected","signUpIn","innerHTML","UploadTeData","loading","success","cancer","setCancer","published","setPublished","publication","setPublication","researcher","setResearcher","error","errorMessage","SubmitForm","errorMessageBox","publicationInput","String","active","spinner","SignUpForm","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","fromURL","from","handleSignUp","signUp","attributes","code","resendConfirmationCode","resendSignUp","SignInForm","handleSignIn","signIn","successMessageBox","successMessage","ConfirmSignUp","confirmation","setConfirmation","setSuccessMessage","handleConfirmSignUp","regex","confirmSignUp","Documentation","queryRawSeq","queryRawSeqSmall","awsmobile","Amplify","configure","awsconfig","App","setUser","updateUser","authState","currentAuthenticatedUser","Hub","listen","remove","exact","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"ieAiEeA,EA5DE,WAAO,IAAD,EAEeC,mBAAS,IAFxB,6BAsBnB,OACQ,yBAASC,UAAU,YAAnB,SACI,sBAAKA,UAAU,MAAf,UACA,sBAAKA,UAAU,gBAAf,UACQ,2CACI,mJAAqH,0CAArH,0MACJ,4DACI,kJACA,sEAAwC,cAAC,IAAD,CAAMC,GAAG,kBAAT,wBAAxC,UAER,sBAAKD,UAAU,aAAf,UACA,sBAAKA,UAAU,eAAf,UACQ,gDACA,mIACA,6BACI,6BAAI,cAAC,IAAD,CAAMC,GAAI,aAAV,wBAGZ,sBAAKC,MAAM,eAAX,UACI,oBAAIF,UAAU,iBAAd,SAA+B,cAAC,IAAD,CAAMC,GAAG,UAAT,2BAC/B,oRAEJ,sBAAKC,MAAM,eAAX,UACI,6BAAI,mBAAGA,MAAM,iBAAiBC,KAAK,IAA/B,kCACJ,4DACA,8KAEJ,sBAAKD,MAAM,eAAX,UACI,6BAAI,mBAAGA,MAAM,iBAAiBC,KAAK,IAA/B,uCACJ,2DACA,kMCxCbC,EAdK,WAEhB,OACI,kCACI,sBAAKJ,UAAU,MAAf,UACI,qBAAKK,MAAO,CAAE,MAAS,QAAS,OAAU,kBAAmB,QAAW,OAAQ,OAAU,UAA1F,SACI,4DAEJ,+C,SCPT,SAASC,EAAqBC,EAAiBC,EAAmBC,EAAcC,GAE/EH,EAAgBI,SAASF,KACnBD,EAAkBC,GAAcE,SAASD,IAC3CF,EAAkBC,GAAcG,KAAKF,IAK1C,SAASG,EAAeH,EAAYD,EAAcK,GACrD,IAAIC,EAAcD,EAAiBL,GAAjB,gBACZC,EACAA,EAAW,GAEbM,EAAgBC,MAAMC,QAAQR,GAC5BA,EAAW,GACXA,EACN,OAAO,cAAC,IAAD,CAAMT,GAAIa,EAAiBL,GAAjB,SAA6CM,EAAvD,SAAqEC,IAGzE,SAASG,EAAUC,EAAYC,EAAOC,EAAWb,EAAcF,GAClE,QAAIa,MAGAb,EAAgBI,SAASF,IACpBa,IAAcD,GACA,cAAdC,GAsCb,IAoLeC,EApLQ,SAACC,EAAWV,EAAkBP,EAAiBkB,EAAiBC,EAAeC,GAKlG,IAFA,IAAInB,EAAoB,GACpBoB,EAAoB,GACfC,EAAI,EAAGA,EAAItB,EAAgBuB,OAAQD,IACxCrB,EAAkBD,EAAgBsB,IAAM,CAAC,aACzCD,EAAkBrB,EAAgBsB,IAAM,YAO5C,IAdoH,MAStF9B,mBAAS6B,GAT6E,mBAS7GG,EAT6G,KASpGC,EAToG,KAWhHC,EAAU,GAGLC,EAAI,EAAGA,EAAIV,EAAUM,OAAQI,IAAK,CAWvC,IAVA,IAAId,GAAa,EACbe,EAAQX,EAAUU,GAGlBE,EAAY,GACZ1B,EAAa,KACb2B,EAAc,KAITC,EAAI,EAAGA,EAAIX,EAAcG,OAAQQ,IAAK,CAC3C,IAAI7B,EAAekB,EAAcW,GAE3BC,EAAUC,OAAOC,KAAK3B,GAAkBH,SAASF,GACjDiC,EAAUjB,EAAgBd,SAASF,GAEzC,GAAI+B,OAAOC,KAAKf,GAAef,SAASF,GACpC,GAAKF,EAAgBI,SAASF,GAAgB,CAE1C,IAAIkC,EAAMjB,EAAcjB,GAAc0B,EAAM1B,GAAeA,EAAcW,EAAYb,EAAiBwB,EAASvB,GAG/G6B,EAAcM,EAAIC,MAAMC,SAAS,GACjCzB,EAAauB,EAAIC,MAAMC,SAAS,GAChCrC,EAAoBmC,EAAIC,MAAMC,SAAS,QAIvCR,EAAc,+JAGf,GAAIE,IAAYG,EAEnBL,EACI,6BACKxB,EAAesB,EAAM1B,GAAeA,EAAcK,KAG3DJ,EAAaI,EAAiBL,GAAjB,gBACP0B,EAAM1B,GACN0B,EAAM1B,GAAc,GAE1BH,EAAqBC,EAAiBC,EAAmBC,EAAcC,GAEvEU,EAAaD,EAAUC,EAAYV,EAAYqB,EAAQtB,GAAeA,EAAcF,QAEjF,IAAKgC,GAAWG,GAAU,WAC7B,IACMI,EADiBX,EAAM1B,GACUqB,OACvCO,EAAcF,EAAM1B,GAAcsC,KAAI,SAACrC,EAAYmB,GAK/C,OAHAvB,EAAqBC,EAAiBC,EAAmBC,EAAcC,GACvEU,EAAaD,EAAUC,EAAYV,EAAYqB,EAAQtB,GAAeA,EAAcF,GAEhFsB,EAAI,IAAMiB,EACF,+BAAOpC,IAEP,iCAAOA,EAAP,WAXa,QAiB1B,GAAI6B,GAAWG,EAAS,CAAC,IAGxBM,GAHuB,WAC3B,IACMF,EADiBX,EAAM1B,GACUqB,OACnCkB,EAAuB,GAC3B,IAAIC,EAAiBd,EAAM1B,GAAcsC,KAAI,SAACG,EAAWrB,GASrD,OAPAnB,EAAaI,EAAiBL,GAAjB,gBACPyC,EACAA,EAAU,GAChB5C,EAAqBC,EAAiBC,EAAmBC,EAAcC,GAEvEsC,EAAqBnB,GAAKV,EAAUC,EAAYV,EAAYqB,EAAQtB,GAAeA,EAAcF,GAE7FsB,EAAI,IAAMiB,EACF,+BAAOjC,EAAeqC,EAAWzC,EAAcK,KAE/C,iCAAOD,EAAeqC,EAAWzC,EAAcK,GAA/C,WAIhBM,GAAc4B,EAAqBrC,UAAS,GAC5C0B,EAAc,6BAAKY,IArBQ,QAwB3BvC,EAAayB,EAAM1B,GACnBW,EAAaD,EAAUC,EAAYV,EAAYqB,EAAQtB,GAAeA,EAAcF,GACpFD,EAAqBC,EAAiBC,EAAmBC,EAAcC,GACvE2B,EAAc,6BAAK3B,IAInB2B,GACAD,EAAUxB,KAAKyB,GAIlBjB,GAAYa,EAAQrB,KAAK,6BAAKwB,KAoBvC,IAtIoH,IAjCtFe,EAiCsF,EAqH5EpD,mBAAS,IArHmE,mBAqH7GqD,EArH6G,aAsH9ErD,mBAAS,IAtHqE,mBAsH7GsD,EAtH6G,KAsHhGC,EAtHgG,KAwHhHC,GAzJ0BJ,EAyJeC,EAATnB,EAxJzBuB,QAAO,SAACC,EAAKC,EAAK7B,GACzB,IAAI8B,EAAMC,KAAKC,MAAMhC,EAAIsB,GAGzB,OAFWM,EAAIE,KAASF,EAAIE,GAAO,KAC9B/C,KAAK8C,GACHD,IACR,KA2BiH,EAxBjH,SAA+BK,EAAaC,EAAUV,GACzD,IAAIW,EACAC,EACAC,EAAUN,KAAKO,KAAKL,EAAc,GAClCD,EAAQD,KAAKC,MAAMC,EAAc,GAgBrC,OAdIC,EAAWD,GACXE,EAAQ,EACRC,EAAMF,GACCV,GAAe,GAAKA,GAAea,GAC1CF,EAAQ,EACRC,EAAMH,GACET,EAAcQ,GAAUE,GAChCC,EAASD,EAAWD,EACpBG,EAAMF,IAENC,EAASX,EAAca,EACvBD,EAAOZ,EAAcQ,GAGlB,CAACG,EAAOC,GA6HMG,CAAsB,EAAGb,EAAiBzB,OAAQuB,GAzH6C,mBAyH7GW,EAzH6G,KAyHtGC,EAzHsG,KA2H9GI,EAAc,SAACC,GACG,SAAhBA,EAAEC,OAAOC,GACTlB,EAAeD,EAAc,GACN,SAAhBiB,EAAEC,OAAOC,GAChBlB,EAAeD,EAAc,GAE7BC,EAAemB,OAAOH,EAAEC,OAAOC,MAInCE,EAAY,GACPC,EAAIX,EAAOW,EAAIV,EAAKU,IACzBD,EAAU9D,KACN,oBACIZ,UAAS,0BAAqB2E,IAAMtB,EAAc,SAAW,GAApD,oBACTmB,GAAIG,EACJC,QAAUP,EAHd,SAKKM,EAAE,KAKK,IAAhBtB,GACAqB,EAAUG,QAAQ,oBAAI7E,UAAU,kCAAkCwE,GAAI,OAAQI,QAASP,EAArE,mBAElBhB,IAAgBY,EAAK,GACrBS,EAAU9D,KAAK,oBAAIZ,UAAU,kCAAkCwE,GAAI,OAAQI,QAASP,EAArE,mBAInB,IAAMS,EAAe,SAACR,GAClB,IAAMS,EAAU,eAAOhD,GACvBgD,EAAWT,EAAEC,OAAOC,IAAMF,EAAEC,OAAOlD,MACnCW,EAAW+C,GACXzB,EAAe,IAKf0B,EADexC,OAAOyC,QAAQzE,GACDuC,KAAK,SAAAmC,GAClC,IAAIzE,EAAeyE,EAAgB,GAE7BC,GADND,EAAkBA,EAAgB,IACInC,KAAK,SAAAqC,GACvC,OACI,wBAAQZ,GAAIY,EAAZ,SACKA,GADoBA,MAMjC,OAAO,wBAA2BZ,GAAI/D,EAAc4E,SAAWP,EAAxD,SAAwEK,GAA3D1E,MAGxB,MAAO,CAAC8C,EAAiBF,GAAc2B,EAAiBN,ICtLrD,IAiEMY,EAAiB,SAAC5E,EAAYD,EAAcW,EAAYb,EAAiBwB,EAASvB,GAI3F,IAHA,IAAM+E,EAAW7E,EAAW8E,MAAM,KAC9BxC,EAAuB,GAElBnB,EAAE,EAAGA,EAAE0D,EAASzD,OAAQD,IAAI,CACjC,IAAI4D,EAAUF,EAAS1D,GAEvBvB,EAAqBC,EAAiBC,EAAmBC,EAAcgF,GACvE,IAAIC,EAAcvE,EAAUC,EAAYqE,EAAS1D,EAAQtB,GAAeA,EAAcF,GACtFyC,EAAqBpC,KAAM8E,GAEvB1C,EAAqBlB,OAAQ,GAC7B6D,QAAQC,IAAIxE,EAAYV,EAAYqB,EAAQtB,GAAeA,EAAcF,GAKjF,MAAO,EAAC,EAFRa,GAAc4B,EAAqBrC,UAAS,GAEjBH,ICjChBqF,EArGU,SAACjD,GAAW,IAAD,EAEA7C,oBAAS,GAFT,mBAEzB+F,EAFyB,aAGQ/F,mBAAS,KAHjB,mBAyB5B2B,GAzB4B,UAyBZ,CAChB,cAAiB,SAACqE,EAAQtF,EAAcW,EAAYb,EAAiBwB,EAASvB,GAE1E,OADY,mCAAG8E,EAAeS,EAAQtF,EAAcW,EAAYb,EAAiBwB,EAASvB,QAQ5FwF,EDiB0B,SAACC,EAAMC,EAAYC,GAGnD,IAFA,IAAIC,EAAa,EACbJ,EAAgB,GACXnE,EAAI,EAAGA,EAAIoE,EAAKnE,OAAQD,IAAK,CAElC,IAAIwE,EAAUJ,EAAKpE,GAEnB,GAAQ,IAAJA,EACA,IAAIyE,EAAON,EAAcnE,EAAG,EAAGuE,QAE3BE,EAAO,CAAC,OAAU,IAG1B,GAAwB,SAApBD,EAAQE,QAAZ,CAOA,IAAIC,EAAa,cAAC,IAAD,CAAMvG,GAAIiG,EAAaG,EAAQE,QAA/B,SAAyCF,EAAQE,UAElE,GAAIF,EAAQZ,QAAQ9E,SAAS,KAEzB,KAAI8F,EAAUJ,EAAQZ,QAAQD,MAAM,KAClBiB,EAAQ1D,KAAI,SAAC2D,EAAMpE,GACjC,OAAO,qCACH,cAAC,IAAD,CAAMrC,GAAIkG,EAAUO,EAApB,SACKA,IAEJpE,IAAMmE,EAAQ3E,OAAS,EAClB,KACA,gBAKd,IAAI6E,EACA,cAAC,IAAD,CAAM1G,GAAIkG,EAAUE,EAAQZ,QAA5B,SACKY,EAAQZ,UAIrB,IACkBa,EAAKM,OACPP,EAAQO,OACtB,SACEjB,QAAQC,IAAI,mBAAoBI,GAKhCM,EAAKM,SAAWP,EAAQO,QACxBP,EAAQZ,QAAU,qCAAGe,EAAH,KAAiBG,EAAjB,OAClBL,EAAKb,QAAQ7E,KAAK,4BAAIyF,EAAQZ,WAC9BW,MAEAC,EAAQZ,QAAU,CAAC,qCAAGe,EAAH,KAAiBG,EAAjB,QACnBX,EAAcpF,KAAKyF,IAEvBV,QAAQC,IAAIS,QA9CRA,EAAQZ,QAAU,OAClBO,EAAcpF,KAAKyF,GA+C3B,OAAOL,EC/Eea,CADTC,KAAKC,MAAMnE,EAAMoE,SAASC,MAAMhB,MAtC9B,qBACH,kBAGoB,EAqCiB1E,EAAeyE,EA/BzC,CACnB,OAAU,CACN,SAAY,QACZ,iBAAmB,GAEvB,MAAS,CACL,SAAY,UACZ,iBAAmB,IAIL,CAClB,QACA,SACA,iBAGkB,GAc6GtE,EAL7G,CAAC,SAAU,QAAS,SAAU,UAAW,SAAU,kBAhCzC,mBAqC3BwF,EArC2B,KAqChBC,EArCgB,KAqCIzC,EArCJ,KAuC1B0C,EAAe,CAAC,0CAAqB,2CAAsB,uDAC3DpC,EAAkBmC,EAAmBpE,KAAK,SAACsE,EAAgBxF,GAC7D,OACI,sBAAK7B,UAAU,cAAf,UACI,qBAAKA,UAAU,iBAAf,SAAiCoH,EAAavF,KAC9C,qBAAK7B,UAAU,iBAAf,SAAiCqH,UAM7C,OAEI,yBAASrH,UAAU,qBAAnB,SACI,qBAAKA,UAAU,mBAAf,SACC8F,EAEO,gCACI,2CACA,uFAEN,qCACE,+CACI,sBAAK9F,UAAU,oBAAf,UACI,oBAAIA,UAAU,wBAAd,qBAEA,qBAAKA,UAAU,wBAAf,SACKgF,OAKT,wBAAOhF,UAAU,aAAjB,UACI,gCACI,qBAAIA,UAAU,oBAAd,UACI,oBAAIsH,MAAM,SAAV,gBACA,oBAAIA,MAAM,SAAV,mBACA,oBAAIA,MAAM,SAAV,oBACA,oBAAIA,MAAM,SAAV,sDACA,oBAAIA,MAAM,SAAV,sCAGR,gCACKJ,OAIT,qBAAKlH,UAAU,kBAAf,SACI,uBAAOA,UAAU,aAAjB,SACI,cAAC,IAAD,CAAMC,GAAG,SAAT,SAAkB,uDAG1B,qBAAKD,UAAU,yBAAf,SAAyC0E,YChGjE,SAAS6C,EAAsBxB,EAAQyB,EAAKC,EAAShH,EAAcW,EAAYb,EAAiBwB,EAASvB,GAWrG,IAVA,IAAIkH,EAAO3B,EAAOP,MAAMgC,GACpBvE,EAAiByE,EAAK3E,KAAI,SAACW,EAAK7B,GAChC,OAAIA,EAAE,IAAM6F,EAAK5F,OACN,eAAC,IAAD,CAAM7B,GAAIwH,EAAU/D,EAApB,UAA0BA,EAA1B,OAEA,cAAC,IAAD,CAAMzD,GAAIwH,EAAU/D,EAApB,SAA0BA,OAIrCV,EAAuB,GAClBnB,EAAE,EAAGA,EAAE6F,EAAK5F,OAAQD,IAAI,CAC7B,IAAInB,EAAagH,EAAK7F,GAClBvB,EAAqBC,EAAiBC,EAAmBC,EAAcC,GACvEsC,EAAqBnB,GAAKV,EAAUC,EAAYV,EAAYqB,EAAQtB,GAAeA,EAAcF,GAKzG,OAFAa,GAAc4B,EAAqBrC,UAAS,GAErC,CADW,6BAAKsC,IACF7B,EAAYZ,GAGrC,IAyGemH,EAzGc,SAAC/E,GAC1B,IAAMgF,EAAed,KAAKC,MAAMnE,EAAMoE,SAASC,MAAMhB,MACrDN,QAAQC,IAAIgC,GAFwB,MAIJ7H,oBAAS,GAJL,mBAShC2B,GATgC,UAMtBkB,EAAMiF,MAAMC,OAAOC,MAGb,CAChB,QAAW,SAAChC,EAAQtF,EAAcW,EAAYb,EAAiBwB,EAASvB,GACpE,OAAO,mCAAG+G,EAAsBxB,EAJjB,IACC,iBAGyDtF,EAAcW,EAAYb,EAAiBwB,EAASvB,QAXjG,EA4Cae,EAAeqG,EA7BzC,CACnB,QAAW,CACP,SAAY,qBACZ,iBAAmB,GAEvB,OAAU,CACN,SAAY,QACZ,iBAAmB,GAEvB,OAAU,CACN,SAAY,WACZ,iBAAmB,GAEvB,MAAS,CACL,SAAY,UACZ,iBAAmB,IAIL,CAClB,QACA,SACA,WAGkB,GAI4GlG,EAD9G,CAAC,UAAW,QAAS,SAAU,UAAW,SAAW,WA3CrC,mBA4C/BwF,EA5C+B,KA4CpBC,EA5CoB,KA4CAzC,EA5CA,KA+C9B0C,EAAe,CAAC,0CAAqB,2CAAsB,uDAC3DpC,EAAkBmC,EAAmBpE,KAAI,SAACsE,EAAgBxF,GAC5D,OACI,sBAAK7B,UAAU,cAAf,UACI,qBAAKA,UAAU,iBAAf,SAAiCoH,EAAavF,KAC9C,qBAAK7B,UAAU,iBAAf,SAAiCqH,UAMvCW,EACF,yBAAShI,UAAU,0BAAnB,SACI,sBAAKA,UAAU,mBAAf,UAEI,+CAEA,sBAAKA,UAAU,oBAAf,UACI,oBAAIA,UAAU,wBAAd,qBAEA,qBAAKA,UAAU,wBAAf,SACKgF,OAIT,wBAAOhF,UAAU,aAAjB,UACI,gCACI,qBAAIA,UAAU,oBAAd,UACI,oBAAIsH,MAAM,SAAV,gBACA,oBAAIA,MAAM,SAAV,mBACA,oBAAIA,MAAM,SAAV,oBACA,oBAAIA,MAAM,SAAV,iCACA,oBAAIA,MAAM,SAAV,2BACA,oBAAIA,MAAM,SAAV,yCAGR,gCACKJ,OAIT,qBAAKlH,UAAU,kBAAf,SACI,uBAAOA,UAAU,aAAjB,SACI,cAAC,IAAD,CAAMC,GAAG,SAAT,SAAkB,uDAG1B,qBAAKD,UAAU,yBAAf,SAAyC0E,SAKrD,OACI,mCACKsD,K,iBC9HAC,EAAwB,SAACC,EAAIC,GAAkB,IAAD,EACvBpI,mBAASoI,GADc,mBAChDC,EADgD,KACtCC,EADsC,KAsBvD,OAnBAC,qBAAU,WACN,IAAMC,EAAiB,SAACjE,GAED,OAAf4D,EAAG7B,SAAqB6B,EAAG7B,QAAQmC,SAASlE,EAAEC,SAC9C8D,GAAaD,IASrB,OAJIA,GACAK,OAAOC,iBAAiB,QAASH,GAG9B,WACHE,OAAOE,oBAAoB,QAASJ,MAGzC,CAACH,EAAUF,IAEP,CAACE,EAAUC,ICxBP,2yBCyCAO,EAjCM,SAAChG,GACpB,IAAMiG,EAAcC,iBAAO,MADG,EAEEb,EAAsBY,GAAa,GAFrC,mBAEvBT,EAFuB,KAEbC,EAFa,KAKxBU,EAAUnG,EAAMmG,QAAQhG,KAAI,SAAAqC,GAC9B,OACI,6BAEIA,EAAO4D,MACH,cAAC,IAAD,CAAM/I,GACNmF,EAAO4D,MADP,SAEC5D,EAAO6D,QACR,sBAAMrE,QAASQ,EAAO8D,SAAtB,SAAiC9D,EAAO6D,aAMxD,OACE,sBAAKjJ,UAAS,yBAAoB4C,EAAMuG,SAAxC,UACE,wBAAQC,IAAKP,EAAajE,QAlBd,kBAAMyD,GAAaD,IAkBapI,UAAU,eAAtD,SACE,sBAAMA,UAAU,gBAAhB,SAAiC4C,EAAMyG,YAEzC,qBAAMrJ,UAAS,eAAUoI,EAAW,SAAW,YAA/C,SACE,6BACKW,UClCE,+zECmKAO,EAnJA,SAAC1G,GAEZ,IAAM2G,EAAUC,cACVC,EAAe,SAACnF,GAClBA,EAAEoF,iBACF,IAAMC,EAASrF,EAAEC,OAAOqF,aAAavI,OACtB,uCAAG,4BAAAsD,EAAA,sEACKkF,IAAMC,IAAI,gFAAiF,CAAEhC,OAAQ,CAAE,OAAU6B,KADtH,OACR1D,EADQ,OAEd8D,GAAyB,GACzBR,EAAQ3I,KACJ,CACIoJ,SAAU,kBAAoBL,EAC9B1C,MAAOH,KAAKmD,UAAUhE,EAAKA,KAAKiE,QAN1B,2CAAH,qDAWfC,IAjBkB,4CAyBtB,sBAAAxF,EAAA,+EAEcyF,IAAKC,UAFnB,sDAIQ1E,QAAQC,IAAI,sBAAZ,MAJR,yDAzBsB,sBAoCtB,IAAMiD,EAAcC,iBAAO,MApCL,EAqCoCb,EAAsBY,GAAa,GArCvE,mBAqCfyB,EArCe,KAqCQP,EArCR,KAyChBQ,EAAoBzB,iBAAO,MAzCX,EA0C4Bb,EAAsBsC,GAAmB,GA1CrE,mBA0CfC,EA1Ce,KA0CIC,EA1CJ,KA8ChBC,EAAc,CAChB,CACI,MAAS,QACT,MAAS,UAEb,CACI,MAAS,0BACT,MAAS,sBAIXC,EAAe,CACjB,CACI,MAAS,qBACT,MAAS,CACL,SAAY,UACZ,MAAS,CAAE,KAAQlC,OAAOzB,SAASgD,aAKzCY,EAAkB,CACpB,CACI,MAAS,UACT,MAAS,YAEb,CACI,MAAS,WACT,SA1Ec,6CA8EtB,OACI,sBAAK5K,UAAU,SAAf,UACI,uBAAMwE,GAAG,mBAAT,UACI,qBAAKxE,UAAU,kBAAkB6K,ICjGlC,yvBDiGiDjG,QA5D3C,WACb2E,EAAQ3I,KAAK,QA4DL,sBAAMZ,UAAU,6BAAhB,SACI,cAAC,EAAD,CACI+I,QAAS2B,EACTrB,QAAS,qBAAKrJ,UAAU,kBAAkB6K,IErGnD,64BFqGqEjG,QA1CxD,kBAAM6F,GAAsBD,MA2ChCrB,QAAQ,sBAGhB,qBAAKnJ,UAAU,kBAAkB6K,IGzGlC,isCHyGmDjG,QAnDrC,kBAAMmF,GAA0BO,SAwDhDA,EACG,qBAAKtK,UAAU,8BAA8BoJ,IAAKP,EAAlD,SACI,sBAAM7I,UAAU,yBAAyB8K,SAAUrB,EAAnD,SACI,uBAAOzJ,UAAU,oBAAoBwE,GAAG,eAAeuG,KAAK,OAAOC,KAAK,eAAeC,YAAY,4BAG7G,KAGF,uBAAMzG,GAAG,cAAT,UACI,cAAC,IAAD,CAAMxE,UAAU,mCAAmCC,GAAG,IAAtD,wBAEA,sBAAKD,UAAU,uBAAf,UACI,sBAAMA,UAAU,uBAAuB8K,SAAWrB,EAAlD,SACI,uBAAOzJ,UAAU,YAAYwE,GAAG,eAAeuG,KAAK,OAAOC,KAAK,eAAeC,YAAY,0BAE/F,sBAAMjL,UAAU,YAAhB,SACI,cAAC,EAAD,CACI+I,QAAS2B,EACTrB,QAAS,qCAAE,yCACX,qBAAKwB,IAAKK,OACV/B,QAAQ,sCAKpB,sBAAMnJ,UAAU,uBAAhB,SACI,cAAC,EAAD,CACI+I,QACInG,EAAMuI,KACAP,EACAD,EAEVtB,QAAS,qCAAE,qBAAKwB,IAAKO,IAAc,qBAAKP,IAAKK,OAC7C/B,QAAQ,iCAGhB,sBAAMnJ,UAAU,wBAAhB,SACI,cAAC,EAAD,CACI+I,QACInG,EAAMuI,KACAP,EACAD,EAEVtB,QAAS,qCAAE,qBAAKwB,IAAKO,IAAe,qBAAKP,IAAKK,OAC9C/B,QAAQ,0BIrJnBkC,EAA0B,SAACzI,GAWpC,OAVsBA,EAAM0I,MAAMvI,KAAI,SAAAwI,GAClC,OACI,cAAC,IAAD,CAAMtL,GAAI2C,EAAM4I,SAAWD,EAAK3I,EAAMqG,OAAQjJ,UAAU,mBAAxD,SACI,sBAAKA,UAAU,eAAf,UACI,6BAAKuL,EAAK3I,EAAMqG,SAChB,8BAAIsC,EAAK3I,EAAMqG,OAAf,OAA2BrG,EAAM6I,OAAjC,WAAiDF,EAAKrL,MAAtD,yCCgCLwL,EAvCa,SAAC9I,GAEzB,IAAM+G,EAAS/G,EAAMiF,MAAMC,OAAO6B,OAC5B1D,EAAOa,KAAKC,MAAMnE,EAAMoE,SAASC,OAEjC0E,EAAqB1F,EAAKkD,QAAQpG,KAAK,SAAA6I,GACzC,OACI,cAAC,IAAD,CAAM3L,GAAI,UAAY2L,EAAQ1L,MAAOF,UAAU,mBAA/C,SACI,sBAAKA,UAAU,eAAf,UACI,6BAAK4L,EAAQ1L,QACb,8BAAI0L,EAAQC,YAAYC,OAAO,EAAG,KAAlC,iBAOVC,EAAmB,cAAC,EAAD,CAAyBP,SAAS,QAAQF,MAAOrF,EAAK+F,QAAS/C,MAAM,SAASwC,OAAO,kBACxGQ,EAAwB,cAAC,EAAD,CAAyBT,SAAS,WAAWF,MAAOrF,EAAKiG,SAAUjD,MAAM,SAASwC,OAAO,aACjHU,EAAuB,cAAC,EAAD,CAAyBX,SAAS,iBAAiBF,MAAOrF,EAAKV,SAAU0D,MAAM,UAAUwC,OAAO,cACvHW,EAAuB,cAAC,EAAD,CAAyBZ,SAAS,qBAAqBF,MAAOrF,EAAKoG,SAAUpD,MAAM,UAAUwC,OAAO,4CAGjI,OACI,kCACI,sBAAKzL,UAAU,MAAf,UACI,qDAAuB,kCAAK2J,EAAL,UAEvB,qBAAKtJ,MAAO,CAAC,OAAU,UACvB,mCAAGsL,IACH,mCAAGI,IACH,mCAAGK,IACH,mCAAGH,IACH,mCAAGE,U,iBCwLJG,EAxNO,SAAC1J,GAAW,IAAD,EAEC7C,oBAAS,GAFV,mBAEbwM,GAFa,aAGGxM,oBAAS,GAHZ,mBAGtB+F,EAHsB,KAGZ0G,EAHY,OAICzM,oBAAS,GAJV,mBAIb0M,GAJa,aAKW1M,oBAAS,GALpB,mBAKR2M,GALQ,aAOL3M,mBAAS,MAPJ,mBAOtB4M,EAPsB,KAOhBC,EAPgB,OAQK7M,mBAAS,UARd,mBAQtB8M,EARsB,KAQXC,EARW,OAWH/M,oBAAS,GAXN,mBAWfgN,GAXe,WAiB7B,IAAMC,EAAoB,SAAC1I,GACvBwI,EAAaxI,EAAEC,OAAOlD,QAgEpB4L,EAAU,uCAAG,WAAO3I,GAAP,uBAAAK,EAAA,6DACfoI,GAAS,GAEHG,EAAW,CACb,SAAYtK,EAAMuI,KAAKgC,UAGrBC,EAAmB,CACrB,QAAW,CACP,cAAiBxK,EAAMuI,KAAKkC,kBAAkBC,QAAQC,UAE1D,OAAUL,GAXC,SAeXX,GAAW,GAfA,SAgBY1C,IAAMC,IAAI,kFAAmFsD,GAhBzG,cAgBLI,EAhBK,OAiBX7H,QAAQC,IAAI,2BACN6H,EAAYD,EAASvH,KAAKyH,IAEhClL,OAAOmL,eAAehB,EAAM,OAAQ,CAChCiB,UAAU,EACVvM,MAAOmM,EAASvH,KAAK4H,MAGzBlI,QAAQC,IAAI6H,EAAW,gBAzBZ,UA0BiB5D,IAAMiE,IAAIL,EAAWd,GA1BtC,QA0BLoB,EA1BK,OA2BXpI,QAAQqI,KAAKD,GAEbxB,GAAW,GACXE,GAAW,GA9BA,kDAiCXF,GAAW,GAEXQ,GAAS,GACTL,EAAgB,4CApCL,0DAAH,sDAgDVuB,EAA4B,WAAdpB,EAEZ,qCACI,+BACI,6CACA,6BAAI,0BAAU9B,KAAK,OAAOvG,GAAG,QAAQwG,KAAK,eAE9C,+BACI,gDACA,6BACI,yBAAQxG,GAAG,eAAewG,KAAK,eAA/B,UACI,iDACA,gEAMhB,+BACI,mDACA,6BACI,uBAAOD,KAAK,OAAOvG,GAAG,aAAawG,KAAK,aAAa3J,MAAO,KAAMgE,SA1IlF,SAAqBf,GACjBsI,EAAQtI,EAAEC,OAAO2J,MAAM,YA6IrBC,EACF,0BAASnO,UAAU,eAAnB,UACI,sBAAKA,UAAU,MAAf,UACI,2CACA,uFAEA,cAAC,IAAD,OAKNoO,EACF,yBAASpO,UAAY,YAArB,SACI,qBAAKA,UAAU,gBAAf,SACI,sBAAKA,UAAU,YAAf,UACI,sBAAKA,UAAU,cAAf,UAEI,gFACA,sBAAM8K,SAnDP,SAACxG,GACE,WAAduI,EAtGa,SAACvI,GAClBA,EAAEoF,iBACF8C,GAAY,GACwB,oBAAhClI,EAAEC,OAAO8J,aAAahN,MAEP,uCAAG,4BAAAsD,EAAA,sEACIkF,IAAMC,IAAI,mFAAoF,CAAEhC,OAAQ,CAAE,MAASxD,EAAEC,OAAOwD,MAAM1G,SADtI,OACRiN,EADQ,OAEd9B,GAAY,GACZ7G,QAAQC,IAAI0I,GACZxH,KAAKmD,UAAUqE,GACf1L,EAAM2G,QAAQ3I,KACV,CACIoJ,SAAU,iBAAmB1F,EAAEC,OAAOwD,MAAM1G,MAC5C4F,MAAO,CAAE,KAAQH,KAAKmD,UAAUqE,EAAIrI,KAAKiE,SARnC,2CAAH,oDAYfC,GA2Be,uCAAG,4BAAAxF,EAAA,6DACd6H,GAAY,GADE,SAEI3C,IAAMC,IAAI,+EAAgF,CAAEhC,OAAQ,CAAE,MAASxD,EAAEC,OAAOwD,MAAM1G,SAFlI,OAGc,OADtBiN,EAFQ,QAGNrI,KAAKsI,aACT/B,GAAY,GACZ5J,EAAM2G,QAAQ3I,KACV,CACIoJ,SAAU,aAAe1F,EAAEC,OAAOwD,MAAM1G,MACxC4F,MAAO,CAAE,KAAQH,KAAKmD,UAAUqE,EAAIrI,KAAKiE,UARvC,2CAAH,oDAafC,GA8CAqE,CAAalK,GACQ,SAAduI,GACPI,EAAW3I,IA+CC,SACI,uBAAOpE,MAAM,iBAAb,SACI,kCACI,+BACI,8CACA,+BACI,uBAAMF,UAAU,SAASK,MAAO,CAAE,aAAgB,QAAlD,UACI,uBAAOoO,IAAI,SAAX,uCAAqD,uBAAO1D,KAAK,QAAQ1J,MAAM,SAAS2J,KAAK,YAAY0D,QAAuB,WAAd7B,EAAwBxH,SAAU2H,OAExJ,uBAAMhN,UAAU,SAAhB,UACI,uBAAOyO,IAAI,OAAX,yBAAqC,uBAAO1D,KAAK,QAAQ1J,MAAM,OAAO2J,KAAK,YAAY0D,QAAuB,SAAd7B,EAAsB8B,UAAQ,EAACtJ,SAAU2H,aAIpJiB,EACD,6BACI,wDAMpB,gCACI,6CACA,gLACA,+OAQpB,OACI,mCACKnI,EACKqI,EACAC,KC9JHQ,EAtDK,SAAChM,GAAW,IAAD,EAEG7C,mBAAS,IAFZ,mBAEpB6L,EAFoB,KAEXiD,EAFW,OAGK9O,mBAAS,IAHd,mBAGpBwF,EAHoB,KAGVuJ,EAHU,OAIK/O,mBAAS,IAJd,mBAIpBmM,EAJoB,KAIV6C,EAJU,OAKWhP,mBAAS,IALpB,mBAKpB8L,EALoB,KAKPmD,EALO,KAO3B1G,qBAAU,YACS,uCAAG,8BAAA3D,EAAA,6DACRiH,EAAUhJ,EAAMiF,MAAMC,OAAO5H,MADrB,SAES2J,IAAMC,IAAI,wEAAyE,CAAChC,OAAQ,CAAC,MAAS8D,KAF/G,OAER4B,EAFQ,OAGdqB,EAAWrB,EAASvH,KAAKiE,KAAKhK,OAC9B4O,EAAYtB,EAASvH,KAAKiE,KAAK3E,UAC/BwJ,EAAYvB,EAASvH,KAAKiE,KAAKgC,UAC/B8C,EAAexB,EAASvH,KAAKiE,KAAK2B,aANpB,2CAAH,qDASfoD,KACD,IAEH,IAAMC,EAAiB3J,EAASC,MAAM,KAAKzC,KAAK,SAAA0C,GAC5C,OAAO,6BAAI,cAAC,IAAD,CAAMxF,GAAI,iBAAmBwF,EAA7B,SAAuCA,SAGhD0J,EAAiBjD,EAAS1G,MAAM,KAAKzC,KAAK,SAAAqM,GAC5C,OAAO,6BAAI,cAAC,IAAD,CAAMnP,GAAI,WAAamP,EAAvB,SAAgCA,SAGzCC,EAAoBxD,EAAYrG,MAAM,MAAMzC,KAAK,SAAAuM,GACnD,OAAO,4BAAIA,OAGf,OACI,yBAAStP,UAAU,cAAnB,SACI,sBAAKA,UAAU,MAAf,UAEI,0CAAa4L,KAEb,6CACI,8BAAMyD,IACV,iEACI,6BACI,6BAAKH,MAGb,0CACI,oBAAIlP,UAAU,aAAd,SACI,6BAAKmP,YCEdI,EAjDM,SAAC3M,GAAW,IAAD,EAEA7C,mBAAS6C,EAAMiF,MAAMC,OAAO0H,WAF5B,mBAErBJ,EAFqB,KAEbK,EAFa,OAGE1P,mBAAS,IAHX,mBAGrB6L,EAHqB,KAGZiD,EAHY,OAIJ9O,mBAAS,IAJL,mBAIrBkG,EAJqB,KAIfyJ,EAJe,KAM5BpH,qBAAU,WACNuB,IAAMC,IAAI,2EAA4E,CAAE,OAAU,CAAE,OAAUsF,KACzGO,MAAK,SAAArB,GACF3I,QAAQC,IAAIhD,GACZ6M,EAAUnB,EAAIrI,KAAKiE,KAAK,GAAGkF,QAC3BP,EAAWP,EAAIrI,KAAKiE,KAAK,GAAGhK,OAC5BwP,EAAQpB,EAAIrI,KAAKiE,MACjBvE,QAAQC,IAAI0I,EAAIrI,KAAKiE,KAAK,SAEnC,IAEH,IAAM0F,EAAgB3J,EAAKlD,KAAK,SAACwI,EAAM1J,GACnC,OACI,mCACY,IAANA,EACI,eAAC,IAAD,CAAM5B,GAAI,QAAUsL,EAAK3E,OAAzB,eAAoC2E,EAAK3E,UACzC,cAAC,IAAD,CAAM3G,GAAI,QAAUsL,EAAK3E,OAAzB,SAAkC2E,EAAK3E,cAMzD,OACI,kCACI,sBAAK5G,UAAU,MAAf,UACI,6BAAKoP,IACL,uBAAOpP,UAAU,YAAjB,SACI,kCACI,+BACI,yCACA,6BAAI,cAAC,IAAD,CAAMC,GAAI,YAAc2L,EAAxB,SAAkCA,SAE1C,+BACI,iDACA,6BAAKgE,kBCFlBC,EArCW,SAACjN,GAAW,IAAD,EACK7C,mBAAS6C,EAAMiF,MAAMC,OAAOgI,cADjC,mBAC1BC,EAD0B,KACbC,EADa,OAEajQ,mBAAS,IAFtB,mBAE1BkQ,EAF0B,KAETC,EAFS,OAGHnQ,mBAAS,IAHN,mBAG1B6L,EAH0B,KAGjBiD,EAHiB,OAID9O,mBAAS,IAJR,mBAI1BoQ,EAJ0B,KAIhBC,EAJgB,OAKerQ,mBAAS,IALxB,mBAK1BsQ,EAL0B,KAKRC,EALQ,KAOjChI,qBAAU,WACNuB,IAAMC,IAAI,8EAA+E,CAAEhC,OAAQ,CAAE,QAAWiI,KAC/GJ,MAAK,SAAArB,GACF3I,QAAQC,IAAI0I,EAAIrI,KAAKiE,MACrB8F,EAAe1B,EAAIrI,KAAKiE,KAAKzE,SAC7ByK,EAAmB5B,EAAIrI,KAAKiE,KAAKhB,UACjC2F,EAAWP,EAAIrI,KAAKiE,KAAKhK,OACzBkQ,EAAY9B,EAAIrI,KAAKiE,KAAKiG,UAC1BG,EAAoBhC,EAAIrI,KAAKiE,KAAKqG,gBAEvC,IAEH,IAAMC,EAAwB,kCAAKP,KAEnC,OACI,kCACI,sBAAKjQ,UAAU,MAAf,UACI,gDAAmB+P,KACnB,6FAA+D,oBAAG5P,KAAM,mCAAqCkQ,EAA9C,6BAAkFA,KAAjJ,gEACA,0CACA,8BAAMG,IAEN,0CACI,sFAAwD,0CAAxD,4DAAiI,cAAC,IAAD,CAAMvQ,GAAI,QAAU2L,EAAQ,GAA5B,SAAiCA,EAAQ,KAA1K,SAA2LmE,EAA3L,kBACA,mBAAG7P,MAAO,iBAAV,SAA4BiQ,UCoEjCM,EAnGa,SAAC7N,GAAW,IAAD,EAGK7C,mBAAS,IAHd,gCAIPA,mBAAS,KAJF,mBAI5B2Q,EAJ4B,KAIpBC,EAJoB,OAKT5Q,mBAAS,IALA,mBAK5B6Q,EAL4B,KAKrBC,EALqB,OAMP9Q,mBAAS,IANF,mBAM5B+Q,EAN4B,KAMpBC,EANoB,OAOPhR,mBAAS,IAPF,mBAO5BqP,EAP4B,KAOpBK,EAPoB,OAQL1P,mBAAS,IARJ,mBAQ5B6L,EAR4B,KAQnBiD,EARmB,OASH9O,mBAAS,IATN,mBAS5BoQ,EAT4B,KASlBC,EATkB,OAUDrQ,mBAAS,IAVR,mBAU5BiR,EAV4B,KAUjBC,EAViB,KAanC3I,qBAAU,WACN,IAAM/B,EAAU3D,EAAMiF,MAAMC,OAAOoJ,WACnCrH,IAAMC,IAAI,gFAAiF,CAAC,OAAU,CAAC,QAAWvD,KAC7GoJ,MAAK,SAAArB,GACF3I,QAAQC,IAAI0I,EAAIrI,MAChBN,QAAQC,IAAI0I,EAAIrI,MAChB0K,EAAUrC,EAAIrI,KAAKiE,KAAK3D,SACxBsK,EAASvC,EAAIrI,KAAKiE,KAAKtD,QACvBmK,EAAUzC,EAAIrI,KAAKiE,KAAK4G,QACxBrB,EAAUnB,EAAIrI,KAAKiE,KAAKkF,QACxBP,EAAWP,EAAIrI,KAAKiE,KAAKhK,OACzBkQ,EAAY9B,EAAIrI,KAAKiE,KAAKiH,UAC1BF,EAAa3C,EAAIrI,KAAKiE,KAAKkH,iBAEpC,IAGH,IAAMC,EAAwBL,EAAUjO,KAAK,SAACgN,EAAalO,GAEvD,IAAIc,EACA,cAAC,IAAD,CAAM1C,GAAI,iBAAmB8P,EAAYtK,QAAzC,SACI,+BAAOsK,EAAYtK,YAI3B,OAAU,IAAN5D,EACO,sCAASc,KAET,+BAAOA,OAIhB2O,EAAmBN,EAAUjO,KAAK,SAAAgN,GACpC,OACI,gCACI,mCAAMA,EAAYtK,WAClB,4CACA,8BAAG,+DAAH,IAAyC,oBAAGtF,KAAM,2BAA6B4P,EAAYQ,UAAlD,cAA+DR,EAAYQ,UAA3E,UACrC,4BAAIR,EAAY7G,WAChB,oDACI,mBAAGhJ,MAAM,iBAAT,SAA2B6P,EAAYI,iBAK3D,OACI,kCACI,sBAAKnQ,UAAU,MAAf,UACI,qBAAIE,MAAM,eAAV,6BAA0CwQ,KAC1C,uBAAOxQ,MAAO,YAAd,SACI,kCACI,+BACI,oBAAIoH,MAAM,MAAV,iCACA,6BAAK+J,OAET,+BACI,oBAAI/J,MAAM,MAAV,qCACA,6BAAI,cAAC,IAAD,CAAMrH,GAAI,UAAY2L,EAAtB,SAAgCA,SAExC,+BACI,oBAAItE,MAAM,MAAV,qBACA,6BAAI,cAAC,IAAD,CAAMrH,GAAI,WAAamP,EAAvB,SAAgCA,SAExC,+BACI,oBAAI9H,MAAM,MAAV,yCACA,6BAAI,cAAC,IAAD,CAAMrH,GAAI,QAAU2Q,EAApB,SAA4BA,SAEpC,+BACI,oBAAItJ,MAAM,MAAV,qCACA,6BAAKwJ,YAIjB,0CACA,mBAAG5Q,MAAM,iBAAT,SAA2BiQ,IAE3B,oDACA,sNACA,8BACKmB,UCLNC,EAtFG,SAAC3O,GAAW,IAAD,EACD7C,mBAAS6C,EAAMiF,MAAMC,OAAOlB,QAD3B,mBAClBA,EADkB,KACV4K,EADU,OAEGzR,qBAFH,mBAElBqP,EAFkB,KAEVK,EAFU,OAGK1P,mBAAS,IAHd,mBAGlB6L,EAHkB,KAGTiD,EAHS,OAIO9O,mBAAS,IAJhB,mBAIlBoQ,EAJkB,KAIRC,EAJQ,OAKmBrQ,mBAAS,IAL5B,mBAKlB0R,EALkB,KAKFC,EALE,KAOzBpJ,qBAAU,WACNuB,IAAMC,IAAI,4EAA6E,CAAChC,OAAQ,CAAC,OAAUlB,KACtG+I,MAAK,SAAArB,GACF3I,QAAQC,IAAI0I,EAAIrI,MAChBuL,EAAMlD,EAAIrI,KAAKiE,KAAKtD,QACpB6I,EAAUnB,EAAIrI,KAAKiE,KAAKkF,QACxBP,EAAWP,EAAIrI,KAAKiE,KAAKhK,OACzBkQ,EAAY9B,EAAIrI,KAAKiE,KAAKyH,SAC1BD,EAAkBpD,EAAIrI,KAAKiE,KAAK0H,mBAEzC,IAEH,IAAMC,EAAgBJ,GACwB,IAAvCjP,OAAOC,KAAKgP,GAAgB3P,QACD,kBAApB2P,EAEN,yDAEAA,EAAe1O,KAAK,SAAC+O,EAASxP,GAC1B,GAAIwP,EAAQrM,QAAQ9E,SAAS,KACzB,IAAI8F,EAAUqL,EAAQtM,MAAM,KACxBuM,EAAYtL,EAAQ1D,KAAK,SAAC0C,EAAS5D,GACnC,OACI,qCACI,cAAC,IAAD,CAAM5B,GAAI,iBAAmBwF,EAA7B,SACKA,IAGD5D,IAAM4E,EAAQ3E,OAAS,EACrB,KACA,gBAOdiQ,EAAY,cAAC,IAAD,CAAM9R,GAAI,iBAAmB6R,EAAQrM,QAArC,SAA+CqM,EAAQrM,UAG3E,OACI,qCACI,cAAC,IAAD,UAAOqM,EAAQvL,UADnB,KACqCwL,EADrC,IAEKzP,IAAMmP,EAAe3P,OAAS,EACzB,KACA,WAO1B,OADA6D,QAAQC,IAAIiM,GAER,kCACI,sBAAK7R,UAAU,MAAf,UACI,qDAAwB4G,KACpB,uBAAO1G,MAAO,YAAd,SACI,kCACA,+BACI,oBAAIoH,MAAM,MAAV,qCACA,6BAAI,cAAC,IAAD,CAAMrH,GAAI,UAAY2L,EAAtB,SAAgCA,SAExC,+BACI,oBAAItE,MAAM,MAAV,qBACI,6BAAI,cAAC,IAAD,CAAMrH,GAAI,WAAYmP,EAAtB,SAA+BA,SAE3C,+BACI,oBAAI9H,MAAM,MAAV,0CACA,6BAAKuK,YAIb,8CACI,mBAAG3R,MAAM,iBAAT,SAA2BiQ,U,kBClBpC6B,EAhEU,SAACpP,GAAW,IAAD,EAEJ7C,mBAAS,MAFL,mBAEjBkS,GAFiB,aAGRlS,mBAAS,MAHD,mBAGzBkG,EAHyB,KAGnByJ,EAHmB,KAKhCpH,qBAAU,YACS,uCAAG,8BAAA3D,EAAA,6DACRuN,EAAoB,CAAE,OAAUtP,EAAMuP,gBAD9B,SAEStI,IAAMC,IAAI,sEAAuEoI,GAF1F,OAER1E,EAFQ,OAGdyE,EAAUzE,EAASvH,KAAKmM,QACxB1C,EAAQlC,EAASvH,KAAKoM,QAJR,2CAAH,qDAMfpD,KACD,CAACrM,EAAMuP,iBAGV,IAAMG,EAAiBxJ,iBAAO,MAhBE,EAiBU/I,mBAAS,MAjBnB,mBAiBVwS,GAjBU,WA0DhC,OAvCAjK,qBAAU,WAEN,GAAIrC,EAAM,CACN,IAAM2F,EAAUpJ,OAAOC,KAAKwD,GAAM,GAI5BuM,EAAc,CAChBC,YAAY,EACZC,qBAAqB,EACrB3H,KAAM,MACN9E,KAAM,CACF0M,OAREnQ,OAAOC,KAAKwD,EAAK2F,IASnBgH,SAAU,CAAC,CACPC,MAAO,cACP5M,KAVFzD,OAAOsQ,OAAO7M,EAAK2F,IAWjBmH,YAAa,EACbC,gBAAiB,aAGzBjK,QAAS,CACLkK,OAAQ,CACJC,MAAO,CAAC,CACJC,MAAO,CACHC,aAAa,EACbC,UAAW,QAM/B,GAAIf,GAAkBA,EAAejM,QAAS,CAC1C,IAAMiN,EAAmB,IAAIC,IAAQjB,EAAejM,QAASmM,GAC7DD,EAAiBe,OAG1B,CAACrN,IAIA,wBAAQmD,IAAKkJ,EAAgBtS,UAAU,cCehCwT,EAxEK,SAAC5Q,GAAW,IAAD,EAEiB7C,mBAAS,MAF1B,mBAEpBoS,EAFoB,KAEJsB,EAFI,iDAO3B,sBAAA9O,EAAA,+EAEcyF,IAAKC,UAFnB,sDAIQ1E,QAAQC,IAAI,sBAAZ,MAJR,yDAP2B,sBAgB3B,IAAM8N,EAAW9Q,EAAMuI,KAEf,sBAAK9K,MAAO,CAAE,cAAe,QAA7B,UACI,cAAC,IAAD,CAAMJ,GAAG,0BAAT,6BACA,8BACI,sBAAMC,MAAM,kBAAkBG,MAAO,CAAE,eAAgB,GAAIuE,QArBhD,2CAqBX,2BAKR,sBAAKvE,MAAO,CAAE,cAAe,QAA7B,UACI,uFACA,cAAC,IAAD,CAAMJ,GAAI,CACN,SAAY,UACZ,MAAS,CACL,KAAQ,sBAHhB,oCAYZ,OACI,kCACI,sBAAKD,UAAU,MAAf,UACI,sBAAKK,MAAO,CAAE,MAAS,QAAS,OAAU,kBAAmB,QAAW,OAAQ,OAAU,UAA1F,UACI,8EACA,wEAEJ,yDACA,sBAAKL,UAAU,sBAAf,UACI,sBAAKA,UAAU,aAAf,UACI,+CACA,wBAAO4E,QAhDN,SAACN,GAClBmP,EAAkBnP,EAAEC,OAAOoP,YA+CX,UACI,sCAGA,6CAKR,qBAAK3T,UAAU,iBAAf,SACI,cAAC,EAAD,CAAkBmS,eAAgBA,SAG1C,8BACKuB,U,iBC0HNE,EA1LM,SAAChR,GAAW,IAAD,EACE7C,oBAAS,GADX,mBACrB8T,EADqB,KACZtH,EADY,OAEExM,oBAAS,GAFX,mBAErB+T,EAFqB,KAEZrH,EAFY,OAKJ1M,mBAAS,MALL,mBAKrB4M,EALqB,KAKfC,EALe,OAMA7M,mBAAS,MANT,mBAMrBqS,EANqB,KAMbH,EANa,OAOAlS,mBAAS,MAPT,mBAOrBgU,EAPqB,KAObC,EAPa,OAQMjU,mBAAS,MARf,mBAQrBkU,EARqB,KAQVC,EARU,OASUnU,mBAAS,MATnB,mBASrBoU,EATqB,KASRC,EATQ,OAUQrU,mBAAS,MAVjB,mBAUrBsU,EAVqB,KAUTC,EAVS,WAiCFvU,oBAAS,GAjCP,mBAiCrBwU,EAjCqB,KAiCdxH,EAjCc,OAkCYhN,mBAAS,IAlCrB,mBAkCrByU,EAlCqB,KAkCP9H,EAlCO,KAoCtB+H,EAAU,uCAAG,WAAOnQ,GAAP,qBAAAK,EAAA,6DACfL,EAAEoF,iBADa,iCAoBT0D,EAAmB,CACrB,QAAW,CACP,cAAiBxK,EAAMuI,KAAKkC,kBAAkBC,QAAQC,UAE1D,OAxBW,qBA4BXhB,GAAW,GA5BA,UA6BY1C,IAAMC,IAAI,kFAAmFsD,GA7BzG,eA6BLI,EA7BK,OA8BX7H,QAAQC,IAAI,2BACN6H,EAAYD,EAASvH,KAAKyH,IAEhClL,OAAOmL,eAAehB,EAAM,OAAQ,CAChCiB,UAAU,EACVvM,MAAOmM,EAASvH,KAAK4H,MAGzBlI,QAAQC,IAAI6H,EAAW,gBAtCZ,UAuCiB5D,IAAMiE,IAAIL,EAAWd,GAvCtC,QAuCLoB,EAvCK,OAwCXpI,QAAQqI,KAAKD,GAEbxB,GAAW,GACXE,GAAW,GA3CA,mDA8CXF,GAAW,GAEXQ,GAAS,GACTL,EAAgB,4CAjDL,2DAAH,sDAsDVgI,EAAkBH,EACjB,qBAAKlU,MAAO,CAAE,MAAS,MAAO,OAAU,gBAAiB,QAAW,QAApE,SACEmU,IAEH,KAGN,GAAIV,EACA,OACI,gCACI,0CACA,kHAAoF,cAAC,IAAD,+BAMhG,IAAMa,EAA0C,QAAtBC,OAAOX,GAC9B,+BACK,+DACA,6BACI,uBAAOlJ,KAAK,OAAOvG,GAAG,cAAcwG,KAAK,cAAc3J,MAAO8S,EAAa9O,SAtFvF,SAA4Bf,GACxB8P,EAAe9P,EAAEC,OAAOlD,eAwF1B,KAEF,OACI,kCACI,qBAAKrB,UAAU,MAAf,SACI,qBAAKA,UAAU,YAAf,SACI,sBAAKA,UAAU,cAAf,UACI,qBAAKK,MAAO,CAAE,MAAS,QAAS,OAAU,kBAAmB,QAAW,OAAQ,OAAU,UAA1F,SACI,uFAEJ,gFACCqU,EACD,cAAC,IAAD,CACIG,OAAQhB,EACRiB,QAAS,cAAC,IAAD,IAFb,SAII,uBAAMhK,SAAU2J,EAAhB,UACI,uBAAOpU,MAAO,CAAE,kBAAmB,YAAnC,SACI,kCACI,+BACI,wDACA,6BACI,uBAAO0K,KAAK,OAAOvG,GAAG,aAAawG,KAAK,aAAa3J,MAAO,KAAMgE,SA3H9G,SAAsBf,GAClBsI,EAAQtI,EAAEC,OAAO2J,MAAM,YA6HS,+BACI,0CACA,6BACI,uBAAOnD,KAAK,OAAOvG,GAAG,aAAawG,KAAK,aAAa3J,MAAO+Q,EAAQ/M,SA9HhH,SAAwBf,GACpB2N,EAAU3N,EAAEC,OAAOlD,eAgIa,+BACI,0DAGA,6BACI,yBAAQmD,GAAG,SAASwG,KAAK,SAAS3J,MAAS0S,EAAQ1O,SAnI/F,SAAuBf,GACnB0P,EAAU1P,EAAEC,OAAOlD,QAkIqB,UACI,yCACA,gDAIZ,+BACI,yDAGA,6BACI,yBAAQmD,GAAG,YAAYwG,KAAK,YAAY3J,MAAO4S,EAAW5O,SA3ItG,SAA0Bf,GACtB4P,EAAa5P,EAAEC,OAAOlD,QA0IkB,UACI,yCACA,gDAIXsT,EACD,+BACI,iDACA,6BACI,uBAAO5J,KAAK,OAAOvG,GAAG,aAAawG,KAAK,aAAa3J,MAAOgT,EAAYhP,SA/IpH,SAA2Bf,GACvBgQ,EAAchQ,EAAEC,OAAOlD,oBAmJC,2DCnCjB0T,EA9II,SAACnS,GAEhB,IAAM2G,EAAUC,cAFU,EAIDzJ,oBAAS,GAJR,mBAInBwU,EAJmB,KAIZxH,EAJY,OAKchN,mBAAS,IALvB,mBAKnByU,EALmB,KAKL9H,EALK,OAOI3M,oBAAS,GAPb,mBAOnB8T,EAPmB,KAOVtH,EAPU,OASAxM,mBAAS,IATT,mBASnBiV,EATmB,KASZC,EATY,OAUMlV,mBAAS,IAVf,mBAUnBmV,EAVmB,KAUTC,EAVS,OAWoBpV,mBAAS,IAX7B,mBAWnBqV,EAXmB,KAWFC,EAXE,KAyBpBC,EAA2C,qBAAzB1S,EAAMoE,SAASC,MACjCrE,EAAMoE,SAASC,MAAMsO,KACrB,IAEAC,EAAY,uCAAG,WAAOlR,GAAP,SAAAK,EAAA,yDACjBL,EAAEoF,iBACGsL,GAAUE,GAAaE,EAFX,uBAGbrI,GAAS,GACTL,EAAgB,2BAJH,sCAQbK,GAAS,GACNmI,IAAaE,EATH,wBAUTrI,GAAS,GACTL,EAAgB,0BAXP,gCAaFwI,EAASpT,OAAS,GAbhB,wBAcTiL,GAAS,GACTL,EAAgB,8CAfP,kCAkBbH,GAAW,GAlBE,UAmBPnC,IAAKqL,OAAO,CAAEtI,SAAS6H,EAAOE,WAAUQ,WAAY,CAAE,MAASV,KAnBxD,QAoBbzL,EAAQ3I,KAAM,CACVoJ,SAAU,iBACV/C,MAAO,CACH,SAAY+N,EACZ,KAAQM,KAxBH,kDA4Bb3P,QAAQC,IAAI,qBAAZ,MACA2G,GAAW,GAEQ,4BAAf,KAAMoJ,OACNjJ,EACA,gCACI,0DACA,yFAA2D,sBAAMxM,MAAM,kBAAkB0E,QAAUgR,EAAxC,gCAE/D7I,GAAS,IArCA,kEAAH,sDA7BQ,SAuEX6I,IAvEW,2EAuE1B,sBAAAjR,EAAA,sEAEQ4H,GAAW,GAFnB,SAIcnC,IAAKyL,aAAab,GAJhC,OAKQzI,GAAW,GACXhD,EAAQ3I,KAAK,CACToJ,SAAU,iBACV/C,MAAO,CACH,SAAY+N,EACZ,KAAQM,KAGhB3P,QAAQC,IAAI,4BAbpB,gDAeQD,QAAQC,IAAI,yBAAZ,MACA2G,GAAW,GACXQ,GAAS,GACTL,EAAgB,wBAlBxB,0DAvE0B,sBA6F1B,IAAMgI,EAAkBH,EACrB,qBAAKlU,MAAO,CAAC,MAAS,MAAO,OAAU,gBAAiB,QAAW,QAAnE,SACEmU,IAEH,KAEF,OACI,yBAAStU,MAAM,aAAf,SACI,sBAAKF,UAAU,MAAf,UAEI,+CACA,eAAC,IAAD,CACI6U,OAAQhB,EACRiB,QAAS,cAAC,IAAD,IAFb,UAIKJ,EACD,uBAAM1U,UAAU,kBAAkB8K,SAAU0K,EAA5C,UACI,kCACI,+BACI,uCACA,6BAAI,uBAAOxV,UAAU,mBAAmB+K,KAAK,OAAOC,KAAK,WAAWxG,GAAG,WAAWa,SAnG1F,SAACf,GACjB2Q,EAAS3Q,EAAEC,OAAOlD,eAqGE,+BACI,0CACA,6BAAI,uBAAOrB,UAAU,mBAAmB+K,KAAK,WAAWC,KAAK,WAAWxG,GAAG,WAAWa,SArG3F,SAACf,GACpB6Q,EAAY7Q,EAAEC,OAAOlD,eAsGD,+BACI,kDACA,6BAAI,uBAAOrB,UAAU,mBAAmB+K,KAAK,WAAWC,KAAK,mBAAmBxG,GAAG,mBAAmBa,SAtGpG,SAACf,GAC3B+Q,EAAmB/Q,EAAEC,OAAOlD,kBAwGZ,8BACI,oDAIZ,sBAAKhB,MAAO,CAAE,cAAe,QAA7B,UACI,6DACA,cAAC,IAAD,CACIJ,GAAI,CAAE+J,SAAU,UAAW/C,MAAO,CAAE,KAAQqO,IADhD,8BCJLQ,EA/HI,SAAClT,GAEhB,IAAM2G,EAAUC,cAFU,EAIMzJ,mBAAS,IAJf,gCAKAA,mBAAS,KALT,mBAKnBiV,EALmB,KAKZC,EALY,OAMMlV,mBAAS,IANf,mBAMnBmV,EANmB,KAMTC,EANS,OAOIpV,oBAAS,GAPb,mBAOnB8T,EAPmB,KAOVtH,EAPU,OAQAxM,oBAAS,GART,mBAQnBwU,EARmB,KAQZxH,EARY,OASchN,mBAAS,IATvB,mBASnByU,EATmB,KASL9H,EATK,KAWpB4I,EAA0C,oBAAxB1S,EAAMoE,SAASC,MACjCrE,EAAMoE,SAASC,MAAMsO,KACrB,IASAQ,EAAY,uCAAG,WAAOzR,GAAP,SAAAK,EAAA,yDACjBL,EAAEoF,iBACFqD,GAAS,GACJmI,GAAaF,EAHD,uBAIbjI,GAAS,GACTL,EAAgB,6BALH,0CASbH,GAAW,GATE,UAUPnC,IAAK4L,OAAOhB,EAAOE,GAVZ,QAWb3I,GAAW,GACXhD,EAAQ3I,KAAK0U,GAZA,kDAcb3P,QAAQC,IAAI,mBAAZ,MACA2G,GAAW,GACQ,2BAAf,KAAMoJ,MACN5I,GAAS,GACTL,EAAgB,gCACK,8BAAd,KAAMiJ,OACb5I,GAAS,GACTL,EAAgB,gCACZ,gGACA,8DAAgC,sBAAMxM,MAAM,kBAAkB0E,QAASgR,EAAvC,gCAvB3B,0DAAH,sDAtBQ,SAmDXA,IAnDW,2EAmD1B,sBAAAjR,EAAA,sEAEQ4H,GAAW,GAFnB,SAIcnC,IAAKyL,aAAab,GAJhC,OAKQzI,GAAW,GACXhD,EAAQ3I,KAAK,CACToJ,SAAU,iBACV/C,MAAO,CACH,SAAY+N,EACZ,KAAQM,KAGhB3P,QAAQC,IAAI,4BAbpB,gDAeQD,QAAQC,IAAI,yBAAZ,MACA2G,GAAW,GACXQ,GAAS,GACTL,EAAgB,wBAlBxB,0DAnD0B,sBAyE1B,IAAMuJ,EAAoBrT,EAAMoE,SAASC,MAAM6M,QACxC,qBAAKzT,MAAO,CAAE,MAAS,QAAS,OAAU,kBAAmB,QAAW,QAAxE,SACEuC,EAAMoE,SAASC,MAAMiP,iBAExB,KAEAxB,EAAkBH,EACjB,qBAAKlU,MAAO,CAAE,MAAS,MAAO,OAAU,gBAAiB,QAAW,QAApE,SACEmU,IAEH,KAEN,OACI,yBAAStU,MAAM,aAAf,SACI,qBAAKF,UAAU,MAAf,SAEI,8BACI,eAAC,IAAD,CACI6U,OAAQhB,EACRiB,QAAS,cAAC,IAAD,IAFb,UAKA,yCACCmB,EACAvB,EACG,uBAAM1U,UAAU,kBAAkB8K,SAAUiL,EAA5C,UACI,kCACI,+BACI,uCACA,6BAAI,uBAAO/V,UAAU,mBAAmB+K,KAAK,QAAQC,KAAK,QAAQ3F,SAvF9E,SAACf,GACjB2Q,EAAS3Q,EAAEC,OAAOlD,eAwFM,+BACI,0CACA,6BAAI,uBAAOrB,UAAU,mBAAmB+K,KAAK,WAAWC,KAAK,WAAW3F,SAxFjF,SAACf,GACpB6Q,EAAY7Q,EAAEC,OAAOlD,kBA0FD,4CACA,8BACI,cAAC,IAAD,CACIpB,GAAI,CAAC,SAAY,oBACb,MAAS,CACL,KAAQqV,IAHpB,qCCTjBa,EAtGO,SAACvT,GAEnB,IAAM2G,EAAUC,cAFa,EAIWzJ,mBAAS,MAJpB,mBAItBqW,EAJsB,KAIRC,EAJQ,OAKCtW,oBAAS,GALV,mBAKtB8T,EALsB,KAKbtH,EALa,OAMCxM,oBAAS,GANV,mBAMtB+T,EANsB,KAMbrH,EANa,OAOe1M,mBAAS,IAPxB,mBAOtBmW,EAPsB,KAONI,EAPM,OAQHvW,oBAAS,GARN,mBAQtBwU,EARsB,KAQfxH,EARe,OASWhN,mBAAS,IATpB,mBAStByU,EATsB,KASR9H,EATQ,KAevB6J,EAAmB,uCAAG,WAAOjS,GAAP,eAAAK,EAAA,yDACxBL,EAAEoF,iBACFqD,GAAS,GACTN,GAAW,GACN2J,EAJmB,uBAKpBrJ,GAAS,GACTL,EAAgB,qDANI,6BASpB8J,EAAQ,WACPJ,EAAavO,MAAM2O,IAAkC,IAAxBJ,EAAatU,OAVvB,wBAWpBiL,GAAS,GACTL,EAAgB,iCAZI,4CAgBpBH,GAAW,GAhBS,UAiBdnC,IAAKqM,cAAc7T,EAAMoE,SAASC,MAAMkG,SAAUiJ,GAjBpC,QAkBpB7J,GAAW,GACXhD,EAAQ3I,KAAK,CACToJ,SAAU,UACV/C,MAAO,CACH,KAAQrE,EAAMoE,SAASC,MAAMsO,KAC7B,SAAW,EACX,eAAkB,8CAxBN,mDA2BpBhJ,GAAW,GACQ,0BAAf,KAAMoJ,OACN5I,GAAS,GACTL,EAAgB,mBA9BA,2DAAH,sDAfI,4CAkD7B,sBAAA/H,EAAA,sEAGQ4H,GAAW,GAHnB,SAIcnC,IAAKyL,aAAajT,EAAMoE,SAASC,MAAMkG,UAJrD,OAKQZ,GAAW,GACXE,GAAW,GACX6J,EAAkB,6BAClB3Q,QAAQC,IAAI,4BARpB,kDAUQD,QAAQC,IAAI,yBAAZ,MAVR,2DAlD6B,sBAgE7B,IAAMqQ,EAAoBnC,EACnB,qBAAKzT,MAAO,CAAE,MAAS,QAAS,OAAU,kBAAmB,QAAW,OAAQ,gBAAiB,QAAjG,SACE6V,IAEH,KAEAxB,EAAkBH,EACjB,qBAAKlU,MAAO,CAAE,MAAS,MAAO,OAAU,gBAAiB,QAAW,OAAQ,gBAAiB,QAA7F,SACEmU,IAEH,KAEN,OACI,yBAASxU,UAAU,aAAnB,SACI,qBAAKA,UAAU,MAAf,SACI,eAAC,IAAD,CACI6U,OAAQhB,EACRiB,QAAS,cAAC,IAAD,IAFb,UAII,0FACCmB,EACAvB,EACD,uBAAM1U,UAAU,kBAAkB8K,SAAUyL,EAA5C,UACQ,uBAAO9H,IAAI,eAAX,iCACA,uBAAMzO,UAAU,6BAAhB,UACI,uBAAOA,UAAU,mBAAmB+K,KAAK,OAAOC,KAAK,eAAexG,GAAG,eAAea,SA9EvF,SAACf,GACxB+R,EAAgB/R,EAAEC,OAAOlD,UA8ED,wBAAQrB,UAAU,oBAAlB,uBAER,sBAAKK,MAAO,CAAC,cAAe,QAA5B,UACI,uEAAgD,sBAAMH,MAAM,kBAAkB0E,QA7FzE,2CA6F2C,kC,SCpG7D,OAA0B,wCCA1B,OAA0B,6CCgE1B8R,GA1DO,WAElB,OACI,yBAAS1W,UAAU,gBAAnB,SACI,sBAAKA,UAAU,MAAf,UACI,+CACA,4DACA,kRACA,mDACA,mKAAqI,0CAArI,4+BACA,qRAAuP,cAAC,IAAD,CAAMC,GAAG,iCAAT,0BAAvP,+CACA,2NAEA,oBAAIuE,GAAG,cAAP,wCACA,i+BAEA,oBAAIA,GAAG,kBAAP,8BACA,0CACA,8EAAgD,yCAAhD,cACA,8BAAG,yCAAH,slBACA,8BAAG,wCAAH,kXACA,4CAAc,yCAAd,+EACA,8BAAG,sCAAH,waAAob,mBAAGrE,KAAK,IAAR,yCAApb,6NACA,8BAAG,6CAAH,oGACA,8BAAG,8CAAH,oGAEA,uCACA,oDACA,qBAAK0K,IAAK8L,GAAa3W,UAAU,kDACjC,qBAAK6K,IAAK+L,GAAkB5W,UAAU,uDAEtC,+BACI,iMACA,kVACA,uJACA,0jBACA,wHACA,gGACA,iKACA,4KACA,uLACA,uIAIJ,6CACA,+ZAEA,iDACA,2DAEA,yDACA,iE,mBC7CD6W,GAVG,CACd,mBAAsB,YACtB,6BAAgC,iDAChC,mBAAsB,YACtB,kBAAqB,sBACrB,6BAAgC,6BAChC,MAAS,ICqBbC,WAAQC,UAAUC,IAwDHC,OArDf,WAAgB,IAAD,EAESlX,mBAAS,MAFlB,mBAERoL,EAFQ,KAEF+L,EAFE,KAgBb,OAbA5O,qBAAU,WACR,IAAI6O,EAAU,uCAAG,WAAMC,GAAN,eAAAzS,EAAA,+EAEIyF,IAAKiN,2BAFT,OAETlM,EAFS,OAGb+L,EAAQ/L,GAHK,gDAKb+L,EAAQ,MALK,yDAAH,sDAUd,OAFAI,KAAIC,OAAO,OAAQJ,GACnBA,IACO,kBAAMG,KAAIE,OAAO,OAAQL,MAC/B,IAED,cAAC,IAAD,UACA,sBAAKnX,UAAU,MAAf,UACE,cAAC,EAAD,CAAQmL,KAAMA,IAGR,cAAC,IAAD,CAAOsM,OAAK,EAACC,KAAK,IAAIC,UAAW7X,IACjC,cAAC,IAAD,CAAO2X,OAAK,EAACC,KAAK,WAAWC,UAAWvX,IAExC,cAAC,IAAD,CAAOsX,KAAK,gBAAgBC,UAAW/I,IACvC,cAAC,IAAD,CAAO8I,KAAK,qBAAqBC,UAAWpI,IAC5C,cAAC,IAAD,CAAOmI,KAAK,8BAA8BC,UAAW9H,IACrD,cAAC,IAAD,CAAO6H,KAAK,eAAeC,UAAWpG,IACtC,cAAC,IAAD,CAAOmG,KAAK,gCAAgCC,UAAWlH,IACvD,cAAC,IAAD,CAAOgH,OAAK,EAACC,KAAK,SAASC,UAAWrL,IACtC,cAAC,IAAD,CAAOoL,KAAK,uBAAuBC,UAAWhQ,IAC9C,cAAC,IAAD,CAAO+P,KAAK,mBAAmBC,UAAW9R,IAC1C,cAAC,IAAD,CAAO6R,KAAK,yBAAyBC,UAAWjM,IAChD,cAAC,IAAD,CAAOgM,KAAK,0BAAZ,SACE,cAAC,EAAD,CAAcvM,KAAMA,MAGtB,cAAC,IAAD,CAAOuM,KAAK,oBAAZ,SACE,cAAC,EAAD,CAAavM,KAAMA,MAGrB,cAAC,IAAD,CAAOuM,KAAK,qBAAqBC,UAAW5C,IAC5C,cAAC,IAAD,CAAO2C,KAAK,iBAAiBC,UAAWxB,IACxC,cAAC,IAAD,CAAOuB,KAAK,UAAUC,UAAW7B,IAEjC,cAAC,IAAD,CAAO4B,KAAK,iBAAiBC,UAAWjB,WCnErCkB,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBnI,MAAK,YAAkD,IAA/CoI,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCAdf,WAAQC,UAAUC,IAKlBoB,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFC,SAASC,eAAe,SAM1BZ,O","file":"static/js/main.66781a55.chunk.js","sourcesContent":["import axios from 'axios'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\n\r\nconst HomePage = () => {\r\n\r\n    const [rtClasses, setRtClasses] = useState([]);\r\n\r\n    /*useEffect(() => {\r\n        axios.get('https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/listrtclasses')\r\n            .then(res => {\r\n                setRtClasses(res.data.rt_classes)\r\n            })\r\n    }, [])\r\n\r\n    const rtClassesScript = rtClasses.map( rtClass=>{\r\n        return(\r\n            <li>\r\n                <Link to={\"/class/\" + rtClass[0]}>\r\n                    {rtClass[1]}\r\n                </Link>\r\n            </li>\r\n        )\r\n    })\r\n    */\r\n\r\n    return (\r\n            <section className=\"home-page\">\r\n                <div className=\"box\">\r\n                <div className=\"title-section\">\r\n                        <h1>Retrobase</h1>\r\n                            <p>Retrobase is a database of retrotransposon DNA sequences acquired from UCSC Table Browser and proteins translated <i>in silico</i> from these sequences. All protein name labels are predicted using psi-BLAST. Retrobase serves to make these sequences queriable aid in identification of retroviral sequences in proteomic assays. </p>\r\n                        <h3>The Purpose of The Project</h3>\r\n                            <p>I am undertaking this project as a vehicle to develop my skills in serverless application design and development.</p>\r\n                            <p>For more information on the project, <Link to=\"/documentation/\">click here</Link>.</p>\r\n                    </div>\r\n                    <div className=\"text-boxes\">\r\n                    <div className=\"text-section\">\t\r\n                            <h2>Data Available</h2>\r\n                            <p>The database is a prototype and presently contains data on the following retrotransposon families:</p>\r\n                            <ul>\r\n                                <li><Link to={\"/class/\" + \"ERV\"}>ERV</Link></li>\r\n                            </ul>\r\n                        </div>\r\n                        <div class=\"text-section\">\r\n                            <h2 className=\"UnderLineHover\"><Link to=\"/query/\"> Query Tool</Link></h2>\r\n                            <p>Querying Retrobase allows exact matching of query sequences (whole or partial) to sequences in the database for identification of retroviral proteins. Queries can be of raw single sequences or MZID-formatted files containing many sequences.</p>\r\n                        </div>\r\n                        <div class=\"text-section\">\r\n                            <h2><a class=\"UnderLineHover\" href='#'>Evolutionary Trees</a></h2>\r\n                            <p>Tool currently unavailable.</p>\r\n                            <p>Evolutionary Trees is a tool for viewing the evolutionary relationships between families of retrotransposons of a given class/superfamily.</p>\r\n                        </div>\r\n                        <div class=\"text-section\">\r\n                            <h2><a class=\"UnderLineHover\" href='#'>Tissue Expression Atlas</a></h2>\r\n                            <p>Tool currently unavailable</p>\r\n                            <p>The Tissue Expression Atlas is tool for community sourcing data on the tissue specificity of expression of retrotransposon protein sequence variants.</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n    )\r\n}\r\n\r\nexport default HomePage","import React, { useEffect, useState } from 'react'\r\n\r\n\r\nconst AccountPage = () => {\r\n\r\n    return (\r\n        <section>\r\n            <div className=\"box\">\r\n                <div style={{ \"color\": \"green\", \"border\": \"green solid 2px\", \"padding\": \"1rem\", \"margin\": \"10px 0\" }}>\r\n                    <p>Account page coming soon!</p>\r\n                </div>\r\n                <h1>Account</h1>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default AccountPage","import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nexport function collectUniqueValsFun(columnsToFilter, collectUniqueVals, columnHeader, fieldValue) {\r\n    //Collect values for filter options\r\n    if (columnsToFilter.includes(columnHeader)) {\r\n        if (!(collectUniqueVals[columnHeader].includes(fieldValue))) {\r\n            collectUniqueVals[columnHeader].push(fieldValue)\r\n        }\r\n    }\r\n};\r\n\r\nexport function createLinkItem(fieldValue, columnHeader, columnsHaveLinks) {\r\n    let linkPathEnd = columnsHaveLinks[columnHeader][\"linkPathUseSelf\"]\r\n        ? fieldValue\r\n        : fieldValue[1];\r\n\r\n    let fieldValueFIN = Array.isArray(fieldValue)\r\n        ? fieldValue[1]\r\n        : fieldValue\r\n    return <Link to={columnsHaveLinks[columnHeader][\"basePath\"] + linkPathEnd}>{fieldValueFIN}</Link>\r\n}\r\n\r\nexport function FilterOut(excludeRow, value, filterVal, columnHeader, columnsToFilter) {\r\n    if (excludeRow) {\r\n        return true\r\n    }\r\n    if (columnsToFilter.includes(columnHeader)\r\n        && !(filterVal === value) \r\n        && !(filterVal === \"No Filter\")\r\n    ) { return true }\r\n    return false\r\n}\r\n\r\nexport function paginateList(arr, size) {\r\n    return arr.reduce((acc, val, i) => {\r\n        let idx = Math.floor(i / size)\r\n        let page = acc[idx] || (acc[idx] = [])\r\n        page.push(val)\r\n        return acc\r\n    }, [])\r\n}\r\n\r\nexport function startEndPaginateLinks(pagesCutOff, numPages, currentPage) {\r\n    var start,\r\n        end,\r\n        ceiling = Math.ceil(pagesCutOff / 2),\r\n        floor = Math.floor(pagesCutOff / 2);\r\n\r\n    if (numPages < pagesCutOff) {\r\n        start = 0;\r\n        end = numPages;\r\n    } else if (currentPage >= 0 && currentPage <= ceiling) {\r\n        start = 0;\r\n        end = pagesCutOff;\r\n    } else if ((currentPage + floor) >= numPages) {\r\n        start = (numPages - pagesCutOff);\r\n        end = numPages;\r\n    } else {\r\n        start = (currentPage - ceiling);\r\n        end = (currentPage + floor);\r\n    }\r\n\r\n    return [start, end]\r\n}\r\n\r\n\r\nconst useTableScript = (tableData, columnsHaveLinks, columnsToFilter, columnsHaveList, customColumns, columnHeaders) => {\r\n\r\n    // Prepare filter state and storage for values for filter options\r\n    var collectUniqueVals = {}\r\n    var objForFilterState = {}\r\n    for (var i = 0; i < columnsToFilter.length; i++) {\r\n        collectUniqueVals[columnsToFilter[i]] = [\"No Filter\"];\r\n        objForFilterState[columnsToFilter[i]] = \"No Filter\";\r\n    }\r\n    const [filters, setFilters] = useState(objForFilterState)\r\n\r\n    var rowList = [] // collect table rows\r\n    // iteratively create table rows\r\n\r\n    for (var k = 0; k < tableData.length; k++) {\r\n        var excludeRow = false;\r\n        var entry = tableData[k];\r\n\r\n        // iterate over column headers\r\n        var rowScript = [];\r\n        var fieldValue = null\r\n        var fieldScript = null;\r\n\r\n        //const columnHeaders = Object.keys(entry);\r\n\r\n        for (var j = 0; j < columnHeaders.length; j++) {\r\n            var columnHeader = columnHeaders[j]\r\n\r\n            const hasLink = Object.keys(columnsHaveLinks).includes(columnHeader)\r\n            const hasList = columnsHaveList.includes(columnHeader)\r\n\r\n            if (Object.keys(customColumns).includes(columnHeader)){\r\n                if ( columnsToFilter.includes(columnHeader) ) {\r\n\r\n                    var tmp = customColumns[columnHeader](entry[columnHeader], columnHeader, excludeRow, columnsToFilter, filters, collectUniqueVals)\r\n                    \r\n\r\n                    fieldScript = tmp.props.children[0]\r\n                    excludeRow = tmp.props.children[1]\r\n                    collectUniqueVals = tmp.props.children[2]\r\n\r\n\r\n                } else {\r\n                    fieldScript = <td>customColumns[columnHeader](entry[columnHeader], columnHeader, excludeRow, columnsToFilter, filters, collectUniqueVals)}</td>\r\n\r\n                }\r\n            } else if (hasLink && !hasList) {\r\n\r\n                fieldScript = (\r\n                    <td>\r\n                        {createLinkItem(entry[columnHeader], columnHeader, columnsHaveLinks)}\r\n                    </td>\r\n                )\r\n                fieldValue = columnsHaveLinks[columnHeader][\"linkPathUseSelf\"]\r\n                    ? entry[columnHeader]\r\n                    : entry[columnHeader][1];\r\n                \r\n                collectUniqueValsFun(columnsToFilter, collectUniqueVals, columnHeader, fieldValue)\r\n\r\n                excludeRow = FilterOut(excludeRow, fieldValue, filters[columnHeader], columnHeader, columnsToFilter)\r\n\r\n            } else if (!hasLink && hasList) {\r\n                const fieldValueList = entry[columnHeader]\r\n                const fieldValListLen = fieldValueList.length\r\n                fieldScript = entry[columnHeader].map((fieldValue, i) => {\r\n                    \r\n                    collectUniqueValsFun(columnsToFilter, collectUniqueVals, columnHeader, fieldValue)\r\n                    excludeRow = FilterOut(excludeRow, fieldValue, filters[columnHeader], columnHeader, columnsToFilter)\r\n\r\n                    if (i + 1 === fieldValListLen) {\r\n                        return (<span>{fieldValue}</span>)\r\n                    } else {\r\n                        return (<span>{fieldValue}, </span>)\r\n                    }\r\n                })\r\n\r\n\r\n\r\n            } else if (hasLink && hasList) {\r\n                const fieldValueList = entry[columnHeader]\r\n                const fieldValListLen = fieldValueList.length\r\n                var excludeRow_ListCheck = []\r\n                let fieldScriptTmp = entry[columnHeader].map((listEntry, i) => {\r\n\r\n                    fieldValue = columnsHaveLinks[columnHeader][\"linkPathUseSelf\"]\r\n                        ? listEntry\r\n                        : listEntry[1];\r\n                    collectUniqueValsFun(columnsToFilter, collectUniqueVals, columnHeader, fieldValue)\r\n\r\n                    excludeRow_ListCheck[i] = FilterOut(excludeRow, fieldValue, filters[columnHeader], columnHeader, columnsToFilter)\r\n\r\n                    if (i + 1 === fieldValListLen) {\r\n                        return (<span>{createLinkItem(listEntry, columnHeader, columnsHaveLinks)}</span>)\r\n                    } else {\r\n                        return (<span>{createLinkItem(listEntry, columnHeader, columnsHaveLinks)}, </span>)\r\n                    }\r\n                })\r\n                \r\n                excludeRow = !excludeRow_ListCheck.includes(false) \r\n                fieldScript = <td>{fieldScriptTmp}</td>\r\n\r\n            } else {\r\n                fieldValue = entry[columnHeader]\r\n                excludeRow = FilterOut(excludeRow, fieldValue, filters[columnHeader], columnHeader, columnsToFilter)\r\n                collectUniqueValsFun(columnsToFilter, collectUniqueVals, columnHeader, fieldValue)\r\n                fieldScript = <td>{fieldValue}</td>\r\n            }\r\n\r\n            //Add field to row\r\n            if (fieldScript){\r\n                rowScript.push(fieldScript)\r\n            }\r\n        }\r\n        // Add row or filter out\r\n        if (!excludeRow) rowList.push(<tr>{rowScript}</tr>)\r\n    }\r\n\r\n    const [itemsPerPage, setItemsPerPage] = useState(10);\r\n    const [currentPage, setCurrentPage] = useState(0);\r\n\r\n    let paginatedRowList = paginateList(rowList, itemsPerPage);\r\n    const [start, end] = startEndPaginateLinks(9, paginatedRowList.length, currentPage)\r\n\r\n    const linkNewPage = (e) => {\r\n        if (e.target.id === \"prev\"){\r\n            setCurrentPage(currentPage - 1)\r\n        } else if (e.target.id === \"next\"){\r\n            setCurrentPage(currentPage + 1)\r\n        } else {\r\n            setCurrentPage(Number(e.target.id))\r\n        }\r\n    }\r\n\r\n    var pageLinks = []\r\n    for (var a = start; a < end; a++) {\r\n        pageLinks.push(\r\n            <li \r\n                className={`PageNumberLinks ${a === currentPage ? \"active\" : \"\"} pagination-link`} \r\n                id={a} \r\n                onClick={ linkNewPage }\r\n            >\r\n                {a+1}\r\n            </li>\r\n        )\r\n    }\r\n\r\n    if (currentPage !== 0) {\r\n        pageLinks.unshift(<li className=\"PageNumberLinks pagination-link\" id={\"prev\"} onClick={linkNewPage}>Prev</li>)\r\n    } \r\n    if (currentPage !== end -1) {\r\n        pageLinks.push(<li className=\"PageNumberLinks pagination-link\" id={\"next\"} onClick={linkNewPage}>Next</li>)\r\n    }  \r\n\r\n    // Use state to set filter values when user selects them\r\n    const handleFilter = (e) => {\r\n        const filtersNew = {...filters}\r\n        filtersNew[e.target.id] = e.target.value\r\n        setFilters(filtersNew)\r\n        setCurrentPage(0)\r\n    }\r\n\r\n    // Create filter option dropdowns\r\n    const UniqueVals = Object.entries(collectUniqueVals)\r\n    var filterDropdowns = UniqueVals.map( filterVariables => {\r\n        var columnHeader = filterVariables[0]\r\n        filterVariables = filterVariables[1];\r\n        const filterOptions = filterVariables.map( option => {\r\n            return (\r\n                <option id={option} key={option}>\r\n                    {option}\r\n                </option>\r\n            )\r\n        }); \r\n\r\n        return <select key={columnHeader} id={columnHeader} onChange={ handleFilter }>{filterOptions}</select>\r\n    });\r\n\r\n    return [paginatedRowList[currentPage], filterDropdowns, pageLinks]\r\n}\r\n\r\nexport default useTableScript\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { FilterOut, collectUniqueValsFun } from '../hooks/react-table-creator'\r\n\r\n//with filter\r\nexport function PredictedProteinsWithIdsFilter(entry, baseLinkOuter, baseLinkInner, innerKey, outerKey, columnHeader, excludeRow, columnsToFilter, filters, collectUniqueVals) {\r\n    var excludeRow_ListCheck = [] // list booleans, record if filtering value present\r\n    const entryTmp = Object.values(entry)\r\n    const fieldScriptTmp = entryTmp.map( (outerEntry, i) =>{\r\n        var tmpInnerScript = outerEntry[innerKey].map( (innerEntry, i) => {\r\n            var tmpInnerLink = <Link to={baseLinkInner + innerEntry}>{innerEntry}</Link>\r\n\r\n            if (i !== outerEntry[innerKey].length -1){\r\n                return <span>{tmpInnerLink}, </span>\r\n            } else {\r\n                return <span>{tmpInnerLink}</span>\r\n            }\r\n        });\r\n\r\n        var fieldValue = outerEntry[outerKey][1]\r\n        collectUniqueValsFun(columnsToFilter, collectUniqueVals, columnHeader, fieldValue)\r\n        excludeRow_ListCheck[i] = FilterOut(excludeRow, fieldValue, filters[columnHeader], columnHeader, columnsToFilter)\r\n\r\n        var tmpOuterLink = <Link to={baseLinkOuter + outerEntry[outerKey][0]}>{outerEntry[outerKey][1]}</Link>\r\n\r\n        if (i !== entryTmp.length - 1) {\r\n            return <span>{tmpOuterLink} ({tmpInnerScript}), </span>\r\n        } else {\r\n            return <span>{tmpOuterLink} ({tmpInnerScript})</span>\r\n        }\r\n    })\r\n    excludeRow = !excludeRow_ListCheck.includes(false)\r\n    var fieldScript = <td>{fieldScriptTmp}</td>\r\n    return [fieldScript, excludeRow, collectUniqueVals]\r\n}\r\n    \r\n\r\n// without filter\r\nexport function PredictedProteinsWithIdsNoFilter(entry, baseLinkOuter, baseLinkInner, innerKey, outerKey) {\r\n    const entryTmp = Object.values(entry)\r\n    const fieldScript = entryTmp.map((outerEntry, i) => {\r\n        var tmpInnerScript = outerEntry[innerKey].map((innerEntry, i) => {\r\n            var tmpInnerLink = <Link to={baseLinkInner + innerEntry}>{innerEntry}</Link>\r\n\r\n            if (i !== outerEntry[innerKey].length - 1) {\r\n                return <span>{tmpInnerLink}, </span>\r\n            } else {\r\n                return <span>{tmpInnerLink}</span>\r\n            }\r\n        });\r\n\r\n        var tmpOuterLink = <Link to={baseLinkOuter + outerEntry[outerKey][0]}>{outerEntry[outerKey][1]}</Link>\r\n\r\n        if (i !== entryTmp.length - 1) {\r\n            return <span>{tmpOuterLink} ({tmpInnerScript}), </span>\r\n        } else {\r\n            return <span>{tmpOuterLink} ({tmpInnerScript})</span>\r\n        }\r\n    })\r\n    return fieldScript\r\n}\r\n\r\n// DNA search results protein column pre-process\r\nexport const processDNAQueryProts = (data, prot_idURL, protURL) => {\r\n    var listOffSet = 0\r\n    let processedData = []\r\n    for (var i = 0; i < data.length; i++) {\r\n\r\n        var current = data[i]\r\n\r\n        if (i!==0){\r\n            var prev = processedData[i -1 -listOffSet]\r\n        } else {\r\n            var prev = {\"dna_id\": \"\"}\r\n        }\r\n        \r\n        if (current.prot_id === \"null\") {\r\n            current.protein = \"None\"\r\n            processedData.push(current)\r\n            continue\r\n        }\r\n\r\n        // Create jsx for prot_id\r\n        var protIdLink = <Link to={prot_idURL + current.prot_id}>{current.prot_id}</Link>\r\n\r\n        if (current.protein.includes(\"#\")) {\r\n            // Create jsx for proteins with links: (prot1, prot2)\r\n            var protspl = current.protein.split('#');\r\n            const protLinks = protspl.map((prot, j) => {\r\n                return <>\r\n                    <Link to={protURL + prot}>\r\n                        {prot}\r\n                    </Link>\r\n                    {j !== protspl.length - 1\r\n                        ? \", \"\r\n                        : null\r\n                    }\r\n                </>\r\n            });\r\n        } else {\r\n            var protLinks =\r\n                <Link to={protURL + current.protein}>\r\n                    {current.protein}\r\n                </Link>;\r\n        };\r\n\r\n        try{\r\n            const first = prev.dna_id\r\n            const sec = current.dna_id            \r\n        } catch {\r\n            console.log(\"HEREE BE ERROR: \", processedData)\r\n        }\r\n\r\n\r\n\r\n        if (prev.dna_id === current.dna_id) {\r\n            current.protein = <>{protIdLink} ({protLinks})</>\r\n            prev.protein.push(<p>{current.protein}</p>)\r\n            listOffSet++\r\n        } else {\r\n            current.protein = [<>{protIdLink} ({protLinks})</>]\r\n            processedData.push(current)\r\n        }\r\n        console.log(current)\r\n    }\r\n    return processedData\r\n}\r\n\r\nexport const FilterDNAProts = (fieldValue, columnHeader, excludeRow, columnsToFilter, filters, collectUniqueVals) => {\r\n    const proteins = fieldValue.split(\"#\")\r\n    var excludeRow_ListCheck = [] // list booleans, record if filtering value present\r\n\r\n    for (var i=0; i<proteins.length; i++){\r\n        var protein = proteins[i]\r\n\r\n        collectUniqueValsFun(columnsToFilter, collectUniqueVals, columnHeader, protein)\r\n        var filter_bool = FilterOut(excludeRow, protein, filters[columnHeader], columnHeader, columnsToFilter)        \r\n        excludeRow_ListCheck.push( filter_bool )\r\n\r\n        if (excludeRow_ListCheck.length >1){\r\n            console.log(excludeRow, fieldValue, filters[columnHeader], columnHeader, columnsToFilter   )\r\n        }\r\n    }\r\n    excludeRow = !excludeRow_ListCheck.includes(false)\r\n\r\n    return [false, excludeRow, collectUniqueVals]\r\n}\r\n\r\n// Wait x amount of miliseconds before next line\r\nexport const delay = ms => new Promise(res => setTimeout(res, ms));\r\n\r\n\r\n","import axios from 'axios';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport useTableScript, { FilterOut, collectUniqueValsFun } from '../hooks/react-table-creator'\r\nimport { processDNAQueryProts, FilterDNAProts, delay } from '../functions/functions'\r\n\r\n\r\nconst prot_idURL = \"/predictedprotein/\"\r\nconst protURL = \"/knownprotein/\"\r\n\r\n\r\nconst DnaSearchResults = (props) => {\r\n\r\n    const [querying, setQuerying] = useState(false)\r\n    const [dataResponse, setDataResponse] = useState([])\r\n\r\n\r\n    var columnsHaveLinks = {\r\n        \"dna_id\": {\r\n            \"basePath\": \"/dna/\",\r\n            \"linkPathUseSelf\": true\r\n        },\r\n        \"class\": {\r\n            \"basePath\": \"/class/\",\r\n            \"linkPathUseSelf\": true\r\n        }\r\n    }\r\n\r\n    var columnsToFilter = [\r\n        \"class\",        \r\n        \"family\",\r\n        \"all_rec_prots\"\r\n    ]\r\n\r\n    var columnsHaveList = []\r\n\r\n    var customColumns = {\r\n        \"all_rec_prots\": (string, columnHeader, excludeRow, columnsToFilter, filters, collectUniqueVals) => {\r\n            const tmp = <>{FilterDNAProts(string, columnHeader, excludeRow, columnsToFilter, filters, collectUniqueVals)}</>\r\n            return tmp\r\n        }\r\n    }\r\n\r\n    const columnHeaders = [\"dna_id\", \"class\", \"family\", \"protein\", \"coords\", \"all_rec_prots\"]\r\n    \r\n    const data = JSON.parse(props.location.state.data)\r\n    const processedData = processDNAQueryProts(data, prot_idURL, protURL)\r\n    \r\n    var [dataTable, filterDropdownsRaw, pageLinks] = useTableScript(processedData, columnsHaveLinks, columnsToFilter, columnsHaveList, customColumns, columnHeaders)\r\n\r\n    const filterLabels = [<span>Class:</span>, <span>Family:</span>, <span>Predicted Protein:</span>]\r\n    const filterDropdowns = filterDropdownsRaw.map( (filterVariable, i) => {\r\n        return (\r\n            <div className=\"filter-item\">\r\n                <div className=\"filter-element\">{filterLabels[i]}</div>\r\n                <div className=\"filter-element\">{filterVariable}</div>                \r\n            </div>\r\n\r\n        )\r\n    })\r\n\r\n    return (\r\n\r\n        <section className=\"query-results-page\">\r\n            <div className=\"box queryResults\">\r\n            {querying\r\n                ?\r\n                    <div>\r\n                        < h3 > Querying</h3 >\r\n                        <p>Your query is in progress. Please do not refresh...</p>\r\n                    </div >\r\n                : <>\r\n                    <h1>Query Results</h1>\r\n                        <div className=\"query-filters-box\">\r\n                            <h3 className=\"query-filters-heading\">Filters</h3>\r\n\r\n                            <div className=\"query-results-filters\">\r\n                                {filterDropdowns}\r\n                            </div>\r\n                        </div>\r\n                        \r\n\r\n                        <table className=\"querytable\">\r\n                            <thead>\r\n                                <tr className=\"querytableheading\">\r\n                                    <th scope=\"column\">ID</th>\r\n                                    <th scope=\"column\">Class</th>\r\n                                    <th scope=\"column\">Family</th>\r\n                                    <th scope=\"column\">Predicted Proteins (Known Protein Names)</th>\t                        \r\n                                    <th scope=\"column\">Genomic Coordinates</th>\t\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {dataTable}\r\n                            </tbody>\r\n                        </table>\r\n\r\n                        <div className=\"border-top pt-3\">\r\n                            <small className=\"text-muted\">\r\n                                <Link to=\"/query\"><small>Search Again</small></Link>\r\n                            </small>\r\n                        </div>\r\n                        <div className=\"page-numbers-container\">{pageLinks}</div>\r\n                </>\r\n                }\r\n            </div>\r\n            \r\n        </section>\r\n            \r\n    )\r\n}\r\n\r\nexport default DnaSearchResults\r\n","import axios from 'axios';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport useTableScript, { FilterOut, collectUniqueValsFun } from '../hooks/react-table-creator';\r\nimport Spinner from 'react-bootstrap/Spinner';\r\n\r\nfunction MultiValStringColLink(string, div, baseurl, columnHeader, excludeRow, columnsToFilter, filters, collectUniqueVals) {\r\n    var vals = string.split(div)\r\n    var fieldScriptTmp = vals.map((val, i) => {\r\n        if (i+1 !== vals.length) {\r\n            return <Link to={baseurl + val}>{val},</Link>\r\n        } else {\r\n            return <Link to={baseurl + val}>{val}</Link>\r\n        }\r\n    })\r\n\r\n    var excludeRow_ListCheck = [] // list booleans, record if filtering value present\r\n    for (let i=0; i<vals.length; i++){\r\n        var fieldValue = vals[i]\r\n            collectUniqueValsFun(columnsToFilter, collectUniqueVals, columnHeader, fieldValue)\r\n            excludeRow_ListCheck[i] = FilterOut(excludeRow, fieldValue, filters[columnHeader], columnHeader, columnsToFilter)\r\n    }\r\n\r\n    excludeRow = !excludeRow_ListCheck.includes(false)\r\n    var fieldScript = <td>{fieldScriptTmp}</td>\r\n    return [fieldScript, excludeRow, collectUniqueVals]\r\n}\r\n\r\nconst ProteinSearchResults = (props) => {\r\n    const dataResponse = JSON.parse(props.location.state.data)\r\n    console.log(dataResponse)\r\n\r\n    const [querying, setQuerying] = useState(false);\r\n\r\n    const query = props.match.params.query;\r\n    const string_divider = \"#\";\r\n    const baseurl_protein = \"/knownprotein/\";\r\n    var customColumns = {\r\n        \"protein\": (string, columnHeader, excludeRow, columnsToFilter, filters, collectUniqueVals) => {\r\n            return <>{MultiValStringColLink(string, string_divider, baseurl_protein, columnHeader, excludeRow, columnsToFilter, filters, collectUniqueVals)}</>\r\n        }\r\n    }\r\n\r\n    var columnsHaveLinks = {\r\n        \"prot_id\": {\r\n            \"basePath\": \"/predictedprotein/\",\r\n            \"linkPathUseSelf\": true\r\n        },\r\n        \"dna_id\": {\r\n            \"basePath\": \"/dna/\",\r\n            \"linkPathUseSelf\": true\r\n        },\r\n        \"family\": {\r\n            \"basePath\": \"/family/\",\r\n            \"linkPathUseSelf\": true\r\n        },\r\n        \"class\": {\r\n            \"basePath\": \"/class/\",\r\n            \"linkPathUseSelf\": true\r\n        },\r\n    }\r\n\r\n    var columnsToFilter = [\r\n        \"class\",\r\n        \"family\",\r\n        \"protein\"\r\n    ]\r\n\r\n    var columnsHaveList = []\r\n\r\n    \r\n    let columnHeaders = [\"prot_id\", \"class\", \"family\", \"protein\", \"dna_id\",  \"coords\"]\r\n    var [dataTable, filterDropdownsRaw, pageLinks] = useTableScript(dataResponse, columnsHaveLinks, columnsToFilter, columnsHaveList, customColumns, columnHeaders)\r\n\r\n\r\n    const filterLabels = [<span>Class:</span>, <span>Family:</span>, <span>Predicted Protein:</span>]\r\n    const filterDropdowns = filterDropdownsRaw.map((filterVariable, i) => {\r\n        return (\r\n            <div className=\"filter-item\">\r\n                <div className=\"filter-element\">{filterLabels[i]}</div>\r\n                <div className=\"filter-element\">{filterVariable}</div>\r\n            </div>\r\n\r\n        )\r\n    })\r\n\r\n    const proteinQueryTable = (\r\n        <section className=\"prot-query-results-page\">\r\n            <div className=\"box queryResults\">\r\n\r\n                <h1>Query Results</h1>\r\n\r\n                <div className=\"query-filters-box\">\r\n                    <h3 className=\"query-filters-heading\">Filters</h3>\r\n\r\n                    <div className=\"query-results-filters\">\r\n                        {filterDropdowns}\r\n                    </div>\r\n                </div>\r\n\r\n                <table className=\"querytable\">\r\n                    <thead>\r\n                        <tr className=\"querytableheading\">\r\n                            <th scope=\"column\">ID</th>\r\n                            <th scope=\"column\">Class</th>\r\n                            <th scope=\"column\">Family</th>\r\n                            <th scope=\"column\">Protein (predicted)</th>\r\n                            <th scope=\"column\">DNA Record ID</th>\r\n                            <th scope=\"column\">DNA Record Coordinates</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {dataTable}\r\n                    </tbody>\r\n                </table>\r\n\r\n                <div className=\"border-top pt-3\">\r\n                    <small className=\"text-muted\">\r\n                        <Link to=\"/query\"><small>Search Again</small></Link>\r\n                    </small>\r\n                </div>\r\n                <div className=\"page-numbers-container\">{pageLinks}</div>\r\n            </div>\r\n        </section>\r\n    )\r\n    \r\n    return(\r\n        <>\r\n            {proteinQueryTable}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ProteinSearchResults","import { useState, useEffect } from 'react';\r\n\r\nexport const useDetectOutsideClick = (el, initialState) => {\r\n    const [isActive, setIsActive] = useState(initialState);\r\n\r\n    useEffect(() => {\r\n        const pageClickEvent = (e) => {\r\n            // If the active element exists and is clicked outside of\r\n            if (el.current !== null && !el.current.contains(e.target)) {\r\n                setIsActive(!isActive);\r\n            }\r\n        };\r\n\r\n        // If the item is active (ie open) then listen for clicks\r\n        if (isActive) {\r\n            window.addEventListener('click', pageClickEvent);\r\n        }\r\n\r\n        return () => {\r\n            window.removeEventListener('click', pageClickEvent);\r\n        }\r\n\r\n    }, [isActive, el]);\r\n\r\n    return [isActive, setIsActive];\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAQAAACR313BAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQflARsNMTo4rJTsAAABLUlEQVQY063QsUpCARjF8fN912uTgxFlBBUNLjpKLj1AEkRP0BtUo0tjIBYNQmsP0d4SNEhICBYXlcgsrQRBr95M7/WeBkWamjrr/zcd4M9JQ8g3FWz4AYmzgTAsMVjXIOI+RMqYkzV+axVRH7LOB1G+aBSuPxJQbkTZW4HBesSIjV3xWDU6Y1kNhJYeTQWVaF/btcxiBvdGH3dGCgfhbsl+gpkEXO2jvOU6tpWLnKMY3MfxfKfgsbZHULErbW2imHAd27pYvsTJQqfgsZIawDPSAgrRMl9RTLiDXikbs/MeK9sOeiZBweEMlDaHbZejQTXlwDYJypkAM9CClfxqPu8Mp/FUpt9MwIdBuQrltasEJSu/zpuAhlLflaBkpnFmjpAD5BYWTH5KmviH/QAc2Znp9j39lgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMS0yN1QxMzo0OTowMSswMDowMC/tNJwAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDEtMjdUMTM6NDk6MDErMDA6MDBesIwgAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==\"","import { useRef, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useDetectOutsideClick } from '../hooks/useDetectOutsideClick';\r\n\r\n// icons\r\nimport downArrow from '../assets/downArrow.png'\r\n\r\n\r\nconst DropdownMenu = (props) => {\r\n  const dropdownRef = useRef(null);\r\n  const [isActive, setIsActive] = useDetectOutsideClick(dropdownRef, false);  \r\n  const onClick = () => setIsActive(!isActive);\r\n\r\n  const options = props.options.map(option => {\r\n      return(\r\n          <li>\r\n            {\r\n              option.route\r\n                ? <Link to={\r\n                  option.route\r\n                }>{option.title}</Link>\r\n                : <span onClick={option.function}>{option.title}</span>\r\n            }\r\n          </li>\r\n      )\r\n  })\r\n\r\n  return (\r\n    <div className={`menu-container ${props.classes}`}>\r\n      <button ref={dropdownRef} onClick={onClick} className=\"menu-trigger\">\r\n        <span className=\"flex-centered\">{props.heading}</span>\r\n      </button>\r\n      <nav  className={`menu ${isActive ? 'active' : 'inactive'}`}>\r\n        <ul>\r\n            {options}\r\n        </ul>\r\n      </nav>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DropdownMenu","export default \"data:image/png;base64,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\"","import React, { useState, useRef } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Auth } from 'aws-amplify';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useDetectOutsideClick } from '../hooks/useDetectOutsideClick';\r\nimport axios from 'axios'\r\n\r\n// icons\r\nimport DropdownMenu from './DropDown';\r\nimport downArrow from '../assets/downArrow.png'\r\nimport accountIcon from '../assets/accountIcon.png'\r\nimport spannerIcon from '../assets/spannerIcon.png'\r\nimport homeIcon from '../assets/homeIcon.png'\r\nimport searchIcon from '../assets/searchIcon.png'\r\n\r\n\r\nconst Navbar = (props) => {\r\n    //search bar submit\r\n    const history = useHistory();\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        const search = e.target.search_input.value\r\n        const fetchData = async () => {\r\n            const data = await axios.get('https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/nav-searchbar-dyn/', { params: { \"search\": search } })\r\n            setMobileSearchBarActive(false);              \r\n            history.push(\r\n                {\r\n                    pathname: \"/searchresults/\" + search,\r\n                    state: JSON.stringify(data.data.body)\r\n                }\r\n            );\r\n          \r\n        }\r\n        fetchData()\r\n\r\n    }\r\n\r\n    const pushHome = () => {\r\n        history.push(\"/\")\r\n    }\r\n\r\n    async function signOut() {\r\n        try {\r\n            await Auth.signOut();\r\n        } catch (error) {\r\n            console.log('error signing out: ', error);\r\n        }\r\n    }\r\n\r\n    // mobile logic\r\n    \r\n    // Search bar\r\n    const dropdownRef = useRef(null);\r\n    const [mobileSearchBarActive, setMobileSearchBarActive] = useDetectOutsideClick(dropdownRef, false);\r\n    const OpenMobileSearch = () => setMobileSearchBarActive(!mobileSearchBarActive)\r\n\r\n    // Tools dropdown\r\n    const dropdownMobileRef = useRef(null);\r\n    const [mobileToolsActive, setMobileToolsActive] = useDetectOutsideClick(dropdownMobileRef, false);\r\n    const OpenMobileTools = () => setMobileToolsActive(!mobileToolsActive)    \r\n\r\n    //tools dropdown menu\r\n    const toolOptions = [\r\n        {\r\n            \"title\": \"Query\",\r\n            \"route\": \"/query\"\r\n        },\r\n        {\r\n            \"title\": \"Tissue Expression Atlas\",\r\n            \"route\": \"/tissueexpression\"\r\n        }\r\n    ]\r\n\r\n    const signInOption = [\r\n        {\r\n            \"title\": \"Sign In / Register\",\r\n            \"route\": {\r\n                \"pathname\": \"/signin\",\r\n                \"state\": { \"from\": window.location.pathname}\r\n            }\r\n        }\r\n    ]\r\n\r\n    const signedInOptions = [\r\n        {\r\n            \"title\": \"Account\",\r\n            \"route\": \"/account\"\r\n        },\r\n        {\r\n            \"title\": \"Sign Out\",\r\n            \"function\": signOut\r\n        }\r\n    ]\r\n\r\n    return (\r\n        <nav className=\"navbar\">\r\n            <span id=\"mobile-nav-icons\">\r\n                <img className=\"mobile-nav-icon\" src={homeIcon} onClick={ pushHome }/>\r\n                <span className=\"mobile-tool-menu-container\">\r\n                    <DropdownMenu\r\n                        options={toolOptions}\r\n                        heading={<img className=\"mobile-nav-icon\" src={spannerIcon} onClick={OpenMobileTools} />}\r\n                        classes=\"mobile-dropdown\"\r\n                    /> \r\n                </span>\r\n                <img className=\"mobile-nav-icon\" src={searchIcon} onClick={ OpenMobileSearch }/>\r\n            </span>\r\n\r\n\r\n\r\n            {mobileSearchBarActive ?\r\n                <div className=\"mobile-search-bar-container\" ref={dropdownRef}>\r\n                    <form className=\"mobile-search-bar-form\" onSubmit={handleSubmit}>\r\n                        <input className=\"mobile-search-bar\" id=\"search_input\" type=\"text\" name=\"search_input\" placeholder=\"Search Retrobase...\" ></input>\r\n                    </form>\r\n                </div>\r\n            : null\r\n            }\r\n            \r\n            <span id=\"desktop-nav\">\r\n                <Link className=\"inline menu-button RetrobaseLogo\" to=\"/\" > Retrobase</Link>\r\n\r\n                <div className=\"search-bar-tool-menu\">\r\n                    <form className=\"inline searchBarForm\" onSubmit={ handleSubmit }>\r\n                        <input className=\"searchBar\" id=\"search_input\" type=\"text\" name=\"search_input\" placeholder=\"Search Retrobase...\" ></input>\r\n                    </form>\r\n                    <span className=\"tool-menu\">\r\n                        <DropdownMenu \r\n                            options={toolOptions} \r\n                            heading={<><span>Tools</span>\r\n                            <img src={downArrow} /></>}\r\n                            classes=\"menu-container-left-align\"\r\n                        /> \r\n                    </span>      \r\n                </div>\r\n            </span>\r\n                <span className=\"logout logout-mobile\">\r\n                    <DropdownMenu \r\n                        options={\r\n                            props.user\r\n                                ? signedInOptions\r\n                                : signInOption\r\n                        }\r\n                        heading={<><img src={accountIcon}/><img src={downArrow} /></>}\r\n                        classes=\"menu-container-right-align\"\r\n                    />\r\n                </span>   \r\n                <span className=\"logout logout-desktop\">\r\n                    <DropdownMenu\r\n                        options={\r\n                            props.user\r\n                                ? signedInOptions\r\n                                : signInOption\r\n                        }\r\n                        heading={<><img src={accountIcon} /><img src={downArrow} /></>}\r\n                        classes=\"mobile-dropdown\"\r\n                    />\r\n\r\n                </span>\r\n        </ nav>\r\n    )\r\n}\r\n\r\nexport default Navbar\r\n\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAQAAABu4E3oAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQflAgEUFRfnaHzrAAABMElEQVQ4y+XTvUpcQRiH8WdmjoVg5yXYik1uIteQKmARgiJoQEjSLIGkiZIm3XZi5QV4CXZeg43YSthK3JknxZmzGfHomtp/debj975zvqCJQQyuiNvqjrjSzzGeBry3z8dnUQM+qMViVj89iRqwq2aLqnP18z90MAr21XkFA5qIXd3zCBzWTW3u1R8PUAO+joABHYudUQyIwU6cPAEG9FtMxr5LJ36vCz6Dpj3CTvy5BAzoRIyIRy8AAzo14lS9M7+A9Og8OGON/8ltcIsNZmzyq5kui6tAqDORL5yxzjUGk/hmyZHm6rv+hXZEEpm0qB+5ZI9VJPKHb7ylEGtHSJQuZAHy8LkBN1yQKCTmXNUyw1oOJY7cYF8tkYBYx026sV8HyPURlDpuMtZlSV45+Qsw3+1isNhBfwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMi0wMVQyMDoyMTowOSswMDowMAIwxtMAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDItMDFUMjA6MjE6MDkrMDA6MDBzbX5vAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAQAAABu4E3oAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQflAgEUEyF+iE70AAABiklEQVQ4y5XUPWtUQRjF8TP35kaC+gEUthIbxUKxMWARQ2IhxNJPIPZ2dgEbv0WKoIUgFlotgiAIgoWN2mkjilhIULJ52ZefxW4kaO4aD8wUw/w58/CcZ6KoxUN8s64jKlHSLkUlLngHPjsjqulIo1LEEWvglfIvl6jUGnFK3wgLotZKVLmdToapkqxkJv0k55KUtPvo+WpJzPuJXdwRjdL6OGvo6foOBni8h7RAOj5iZGDXwAisiEZaIHHaS3saGWHLcjtUVJGSizmbJpdzI02GqbOd6+mmST8lKf50qcf9Vollm+hPdRo3Tm1GY1Zc0fsNLU2paXw8uXBYKPuhxYMh8R/QrEajPiB9LdBVUSvjvfztlESa9LOYJ5nLMHV28iifspmneZP6MDUNJ5mA1ZaE74OWDcCW516DW5kKzYr72HJJHPcM79uHoihmxD28EHPiGrarNqRIUpJsJDmaY9lJMp/kR9o1HmfnDdC14K4vWJ+OjD+sVYwm660TmSZlku+bPhjY8MBJ+QXsWdIIjLFwkwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMi0wMVQyMDoxODo0NCswMDowMIJa5CIAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDItMDFUMjA6MTg6NDQrMDA6MDDzB1yeAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAQAAADYBBcfAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQflAgITCDnTKKRTAAAChklEQVQ4y42Vz6sVZRjHP887P86pLobIdRFIXcswrq20aNO6jcuEIgha+SdIl3sXoXuR9m7Sf0BdSODChaabQuraSlDQMgvyKhb3nNN8Wsw7c+aeSnph4Hlnvp/neZnn+8yEEHQrCMAcg4hEvgZCCDsRJKQhqEg0TJEg0fTaHWjZYwUzxrzBOxxiF0+4zTfcYULBXxmLtkqXJgzDQlzxjI/VxnY987T7xTJrMBbBQjzid+ofbnrRc17yext108M9isOSJgvxgN+qDzzlQZMhHvQLH6mbvprRhYpJHHla/dmPxdLK2soQj/lYPSfWOd0ctRDf9ol6UnzRsYXJwtqx4Zp613fF0b+Bn6k/uCqO7F5XWIqv+KtTT4jjnWBCKlaBe9ymYta2GoEG2OI6Ja/l3WAlILEL2Mr+GDiFRMNvwFLvpR1gwxawG2iIHgugIbEMPIWcagAGU34E9nGIGUWWRM7/Mu/RcHexXlsRrvOUVY4BQUHku4ngU5a5z9Xe+tgHyXDsGfWhH+ZWtz3Do26rZ4d9bJ+0lmt9ekv93c/d65Iv+JLLnnBbfeBbYmHqbRciYRAkZhzmPG8S/MINHrHM++yh4SEl17jMWYA8J/nE82aveN6f3M6zMfO+X3nAC+qfboi15dwe0U9nSTDhCB+wjyWecY8r3ASO8yUAJzlFRcMs6wfnLq07W9meZWSycsOpUyeuW1h1VVtBhyZrx9bWjhxbm0wWVq47yWhp1U5nlzvmU57b0cWtdI7W7XOYowxgBrvSysJ1J86cuma1MNIsVo8BWhtuOHVb/Ugs+K+1I0mL4pr6ta+LCf4fGpYmx37iilgYwXNRui965KjJw89zwX+gzH8RfwNjrjgNDvf9eAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMi0wMlQxOTowMjoxMCswMDowMDplGp0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDItMDJUMTk6MDI6MTArMDA6MDBLOKIhAAAAAElFTkSuQmCC\"","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\n//props.title is the item attribute that will be the title of the search result\r\n//props.entity must have \"a/an\" prefixed \r\n\r\nexport const NavbarSearchResultItems = (props) => {\r\n    const resultsScript = props.items.map(item => {\r\n        return (\r\n            <Link to={props.pathName + item[props.title]} className=\"linkNoDecoration\">\r\n                <div className=\"SearchResult\">\r\n                    <h3>{item[props.title]}</h3>\r\n                    <p>{item[props.title]} is {props.entity} of the {item.class} class of retrotransposons</p>\r\n                </div>\r\n            </Link>\r\n        )\r\n    })    \r\n    return resultsScript\r\n}\r\n\r\nexport default NavbarSearchResultItems","import axios from 'axios'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { NavbarSearchResultItems } from '../NavBarSearchResultItems'\r\n\r\nconst NavbarSearchResults = (props) => {\r\n\r\n    const search = props.match.params.search\r\n    const data = JSON.parse(props.location.state)\r\n\r\n    const classResultsScript = data.classes.map( rtClass => {\r\n        return(\r\n            <Link to={\"/class/\" + rtClass.class} className=\"linkNoDecoration\">\r\n                <div className=\"SearchResult\">\r\n                    <h3>{rtClass.class}</h3>\r\n                    <p>{rtClass.description.substr(0, 200)}...</p>\r\n                </div>\r\n            </Link>\r\n            \r\n        )\r\n    })\r\n\r\n    const dnaResultsScript = <NavbarSearchResultItems pathName=\"/dna/\" items={data.dna_ids} title=\"dna_id\" entity=\"a DNA element\"/>\r\n    const familiesResultsScript = <NavbarSearchResultItems pathName=\"/family/\" items={data.families} title=\"family\" entity=\"a family\" />\r\n    const proteinResultsScript = <NavbarSearchResultItems pathName=\"/knownprotein/\" items={data.proteins} title=\"protein\" entity=\"a protein\" />\r\n    const prot_idResultsScript = <NavbarSearchResultItems pathName=\"/predictedprotein/\" items={data.prot_ids} title=\"prot_id\" entity=\"an in silico predicted protein sequence\" />\r\n\r\n\r\n    return (\r\n        <section>\r\n            <div className=\"box\">\r\n                <h1>Search Results for <i>\"{search}\"</i></h1>\r\n\r\n                <div style={{\"height\": \"20px\"}}></div>\r\n                <>{classResultsScript}</>\r\n                <>{dnaResultsScript}</>\r\n                <>{prot_idResultsScript}</>\r\n                <>{familiesResultsScript}</>\r\n                <>{proteinResultsScript}</>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default NavbarSearchResults","import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { delay } from '../functions/functions';\r\nimport FadeLoader from 'react-spinners/FadeLoader'\r\n\r\n\r\nconst QueryFormPage = (props) => {\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [querying, setQuerying] = useState(false);\r\n    const [success, setSuccess] = useState(false);\r\n    const [errorMessage, setErrorMessage] = useState(false);\r\n\r\n    const [file, setFile] = useState(null);\r\n    const [inputType, setInputType] = useState(\"manual\");\r\n\r\n    // error handling\r\n    const [error, setError] = useState(false);\r\n\r\n    function FormGetFile(e) {\r\n        setFile(e.target.files[0])\r\n    }\r\n\r\n    const onInputTypeChange = (e) => {\r\n        setInputType(e.target.value)\r\n    }\r\n\r\n    const submitManual = (e) => {\r\n        e.preventDefault()\r\n        setQuerying(true)\r\n        if (e.target.sequenceType.value === \"Protein Records\") {\r\n            \r\n            const fetchData = async () => {\r\n                const res = await axios.get('https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/proteinsearchresults/', { params: { \"query\": e.target.query.value } })\r\n                setQuerying(false)\r\n                console.log(res)\r\n                JSON.stringify(res)\r\n                props.history.push(\r\n                    {\r\n                        pathname: \"/proteinquery/\" + e.target.query.value,\r\n                        state: { \"data\": JSON.stringify(res.data.body)}\r\n                    }\r\n                )\r\n            }\r\n            fetchData()\r\n\r\n        } else {\r\n            /*const fetchData = async () => {\r\n                setQuerying(true);\r\n                const response1 = await axios.get('https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/dnasearchresults-dyn/', { params: { \"query\": e.target.query.value } })\r\n                const token = response1.data.body.token\r\n\r\n\r\n                while (true) {\r\n                    const response2 = await axios.get('https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/query-dna-get-results/', { params: { \"token\": token } })\r\n                    if (response2.data.statusCode === 200) {\r\n                        setQuerying(false);\r\n                        props.history.push(\r\n                            {\r\n                                pathname: \"/dnaquery/\" + e.target.query.value,\r\n                                state: { \"data\": JSON.stringify(response2.data.body) }\r\n                            }\r\n                        )\r\n\r\n                        break\r\n                    } else {\r\n                        await delay(5000);\r\n                    }\r\n                }\r\n            }\r\n            */\r\n            const fetchData = async () => {\r\n                setQuerying(true);\r\n                const res = await axios.get('https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/dnasearchresults/', { params: { \"query\": e.target.query.value } })\r\n                if (res.data.statusCode === 200) {\r\n                    setQuerying(false);\r\n                    props.history.push(\r\n                        {\r\n                            pathname: \"/dnaquery/\" + e.target.query.value,\r\n                            state: { \"data\": JSON.stringify(res.data.body) }\r\n                        }\r\n                    )\r\n                }\r\n            }\r\n            fetchData()\r\n        }\r\n    }\r\n\r\n    const submitFile = async (e) => {\r\n        setError(false);\r\n        //Make filename key\r\n        const metadata = {\r\n            \"username\": props.user.username\r\n        }\r\n\r\n        const SubmitFormParams = {\r\n            \"headers\": {\r\n                \"Authorization\": props.user.signInUserSession.idToken.jwtToken\r\n            },\r\n            \"params\": metadata\r\n        }\r\n\r\n        try {\r\n            setLoading(true)\r\n            const response = await axios.get(\"https://kvuhomev06.execute-api.us-east-1.amazonaws.com/dev/get-s3-presigned-url\", SubmitFormParams)\r\n            console.log(\"Collected presigned url\")\r\n            const signedURL = response.data.url\r\n            //rename file to key for presigned upload\r\n            Object.defineProperty(file, 'name', {\r\n                writable: true,\r\n                value: response.data.key\r\n            });\r\n\r\n            console.log(signedURL, \"sending file\")\r\n            const axiosResponse = await axios.put(signedURL, file);\r\n            console.info(axiosResponse)\r\n\r\n            setLoading(false)\r\n            setSuccess(true)\r\n\r\n        } catch (error) {\r\n            setLoading(false)\r\n\r\n            setError(true);\r\n            setErrorMessage(\"Authorization to upload data not granted\")\r\n        }\r\n    }\r\n\r\n    const submitData = (e) => {\r\n        if (inputType === \"manual\") {\r\n            submitManual(e)\r\n        } else if (inputType === \"file\") {\r\n            submitFile(e)\r\n        }\r\n    }\r\n\r\n    const inputFields = inputType === \"manual\"\r\n        ?\r\n            <>\r\n                <tr>\r\n                    <th>Enter Query</th>\r\n                    <td><textarea type=\"text\" id=\"query\" name=\"query\"></textarea></td>\r\n                </tr>\r\n                <tr>\r\n                    <th>Protein or DNA</th>\r\n                    <td>\r\n                        <select id=\"sequenceType\" name=\"sequenceType\">\r\n                            <option>DNA Records</option>\r\n                            <option>Protein Records</option>\r\n                        </select>\r\n                    </td>\r\n                </tr>\r\n            </>\r\n        : \r\n            <tr>\r\n                <td>Upload MZID file:</td>\r\n                <td>\r\n                    <input type=\"file\" id=\"uploadFile\" name=\"uploadFile\" value={null} onChange={FormGetFile}></input>\r\n                </td>\r\n            </tr>\r\n\r\n    const queryLoading = (\r\n        <section className=\"queryLoading\">\r\n            <div className=\"box\">\r\n                <h3> Querying</h3>\r\n                <p>Your query is in progress. Please do not refresh...</p>\r\n            </div>                \r\n                <FadeLoader />\r\n\r\n        </section>\r\n    )\r\n\r\n    const queryForm = (\r\n        <section className = \"queryForm\" >\r\n            <div className=\"box queryForm\">\r\n                <div className=\"container\">\r\n                    <div className=\"smallertext\">\r\n\r\n                        <h1>Query sequences against the Retrobase database</h1>\r\n                        <form onSubmit={submitData}>\r\n                            <table class=\"queryFormTable\">\r\n                                <tbody>\r\n                                    <tr>\r\n                                        <th>Input Type: </th>\r\n                                        <td>\r\n                                            <span className=\"nowrap\" style={{ \"paddingRight\": \"4rem\" }}>\r\n                                                <label for=\"manual\">Manually enter sequence: </label><input type=\"radio\" value=\"manual\" name=\"inputType\" checked={inputType === \"manual\"} onChange={onInputTypeChange}></input>\r\n                                            </span>\r\n                                            <span className=\"nowrap\">\r\n                                                <label for=\"file\">MZID File: </label><input type=\"radio\" value=\"file\" name=\"inputType\" checked={inputType === \"file\"} disabled onChange={onInputTypeChange}></input>\r\n                                            </span>\r\n                                        </td>\r\n                                    </tr>\r\n                                    {inputFields}\r\n                                    <tr>\r\n                                        <button>Submit</button>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </form>\r\n                    </div>\r\n                    <div>\r\n                        <h2>About Query</h2>\r\n                        <p>The Retrobase Query tool performs exact matching of query sequences to sequences in the database. Currently BLAST algorithms are not available.</p>\r\n                        <p>Note: The protein query option is currently connected to a working API that calls a lambda function to queries a relational database in AWS RDS. However, to save costs, the DB is not kept running.</p>\r\n                    </div>\r\n\r\n                </div>\r\n            </div >\r\n        </section>\r\n    )\r\n\r\n    return (\r\n        <>\r\n            {querying\r\n                ? queryLoading\r\n                : queryForm\r\n            }\r\n        </>\r\n    )\r\n};\r\n\r\nexport default QueryFormPage;","import axios from 'axios';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst ClassDetail = (props) => {\r\n\r\n    const [rtClass, setRtClass] = useState(\"\")\r\n    const [proteins, setProteins] = useState(\"\")\r\n    const [families, setFamilies] = useState(\"\")\r\n    const [description, setDescription] = useState(\"\")\r\n\r\n    useEffect(() => {\r\n        const FetchData = async () => {\r\n            const rtClass = props.match.params.class\r\n            const response = await axios.get('https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/classdata/', {params: {\"class\": rtClass}});\r\n            setRtClass(response.data.body.class)\r\n            setProteins(response.data.body.proteins)\r\n            setFamilies(response.data.body.families)\r\n            setDescription(response.data.body.description)\r\n        }\r\n \r\n        FetchData();\r\n    }, []); \r\n    \r\n    const proteinsScript = proteins.split(\"#\").map( protein => {\r\n        return <li><Link to={\"/knownprotein/\" + protein}>{protein}</Link></li>\r\n    });\r\n\r\n    const familiesScript = families.split(\"#\").map( family => {\r\n        return <li><Link to={\"/family/\" + family}>{family}</Link></li>\r\n    });\r\n\r\n    const descriptionScript = description.split(\"\\n\").map( paragraph => {\r\n        return <p>{paragraph}</p>\r\n    })\r\n\r\n    return(\r\n        <section className=\"classDetail\">\r\n            <div className=\"box\">\r\n\r\n                <h1> Class: {rtClass}</h1>\r\n\r\n                <h2>Description</h2>\r\n                    <div>{descriptionScript}</div>\r\n                <h2>Proteins Encoded By This Class:</h2>\r\n                    <ul>\r\n                        <li>{proteinsScript}</li>\r\n                    </ul>\r\n\r\n                <h2>Families</h2>\r\n                    <ul className=\"familyList\">\r\n                        <li>{familiesScript}</li>\r\n                    </ul>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default ClassDetail","import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios'\r\n\r\nconst FamilyDetail = (props) => {\r\n    \r\n    const [family, setFamily] = useState(props.match.params.family_id)\r\n    const [rtClass, setRtClass] = useState(\"\")\r\n    const [data, setData] = useState([])\r\n\r\n    useEffect(() => {\r\n        axios.get('https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/rtfamilydata/', { \"params\": { \"family\": family}})\r\n            .then(res => {\r\n                console.log(props)\r\n                setFamily(res.data.body[0].family)\r\n                setRtClass(res.data.body[0].class)\r\n                setData(res.data.body)\r\n                console.log(res.data.body[0])\r\n            })\r\n    }, []);\r\n    \r\n    const dnaListScript = data.map( (item, i) => {\r\n        return(\r\n            <>\r\n                {(i !== 0)\r\n                    ? <Link to={\"/dna/\" + item.dna_id}>, {item.dna_id}</Link>\r\n                    : <Link to={\"/dna/\" + item.dna_id}>{item.dna_id}</Link>\r\n                }\r\n            </>\r\n        )\r\n    })\r\n\r\n    return (\r\n        <section>\r\n            <div className=\"box\">\r\n                <h1>{family}</h1>\r\n                <table className=\"infotable\">\r\n                    <tbody>\r\n                        <tr>\r\n                            <th>Class: </th>\r\n                            <td><Link to={\"/rtclass/\" + rtClass}>{rtClass}</Link></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <th>DNA Sequences: </th>\r\n                            <td>{dnaListScript}</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default FamilyDetail","import axios from 'axios'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\n\r\nconst ProteinNameDetail = (props) => {\r\n    const [proteinName, setProteinName] = useState(props.match.params.knownprotein);\r\n    const [proteinFunction, setProteinFunction] = useState([]);\r\n    const [rtClass, setRtClass] = useState([]);\r\n    const [sequence, setSequence] = useState([]);\r\n    const [uniprotAccession, setUniprotAccession] = useState([]);\r\n\r\n    useEffect(()=>{\r\n        axios.get('https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/proteinnamedata/', { params: { \"protein\": proteinName}})\r\n        .then(res =>{\r\n            console.log(res.data.body)\r\n            setProteinName(res.data.body.protein)\r\n            setProteinFunction(res.data.body.function)\r\n            setRtClass(res.data.body.class)\r\n            setSequence(res.data.body.sequence)\r\n            setUniprotAccession(res.data.body.accession)\r\n        })\r\n    }, [])\r\n\r\n    const proteinFunctionScript = <p> {proteinFunction}</p >\r\n\r\n    return (\r\n        <section>\r\n            <div className=\"box\">\r\n                <h1>Protein Name: {proteinName}</h1>\r\n                <p>All information presented on this page is acquired from the <a href={\"https://www.uniprot.org/uniprot/\" + uniprotAccession} >Uniprot record, {uniprotAccession}</a>. Click through for much more information on this protein.</p>\r\n                <h2>Function</h2>\r\n                <div>{proteinFunctionScript}</div>\r\n\r\n                <h2>Sequence</h2>\r\n                    <p>The following sequence was used for predicting which <i>in silico</i>-translated transcripts from the retrotransposon family, <Link to={/class/ + rtClass[0]}>{rtClass[1]}</Link>, are {proteinName} sequences: </p>\r\n                    <p class= \"wrapped nokern\">{sequence}</p>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default ProteinNameDetail","import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nconst ProteinRecordDetail = (props) => {\r\n\r\n\r\n    const [proteinNames, setProteinNames] = useState([])\r\n    const [protId, setProtId] = useState([])\r\n    const [dnaId, setDnaId] = useState([])\r\n    const [coords, setCoords] = useState([])\r\n    const [family, setFamily] = useState([])\r\n    const [rtClass, setRtClass] = useState([])\r\n    const [sequence, setSequence] = useState([])\r\n    const [knownProt, setKnownProt] = useState([])\r\n\r\n\r\n    useEffect(() => {\r\n        const prot_id = props.match.params.protein_id\r\n        axios.get('https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/proteinrecorddata/', {\"params\": {\"prot_id\": prot_id}})\r\n            .then(res => {\r\n                console.log(res.data)                \r\n                console.log(res.data)\r\n                setProtId(res.data.body.prot_id)\r\n                setDnaId(res.data.body.dna_id)\r\n                setCoords(res.data.body.coords)\r\n                setFamily(res.data.body.family)\r\n                setRtClass(res.data.body.class)\r\n                setSequence(res.data.body.prot_seq)\r\n                setKnownProt(res.data.body.known_prot)\r\n            })\r\n    }, []);\r\n\r\n\r\n    const proteinNameListScript = knownProt.map( (proteinName, i) => {\r\n        \r\n        var tmp = (\r\n            <Link to={\"/knownprotein/\" + proteinName.protein}>\r\n                <span>{proteinName.protein}</span>\r\n            </Link>\r\n        )\r\n        \r\n        if (i !== 0) {\r\n            return <span>, {tmp}</span>\r\n        } else {\r\n            return <span>{tmp}</span>\r\n        }\r\n    });\r\n\r\n    const proteinFunctions = knownProt.map( proteinName => {\r\n        return(\r\n            <div>\r\n                <h2> {proteinName.protein}</h2>\r\n                <h3> Function </h3>\r\n                <p><i>Information taken from Uniprot</i> <a href={\"https://www.uniprot.org/\" + proteinName.accession}>({proteinName.accession})</a></p>\r\n                    <p>{proteinName.function}</p>\r\n                    <h3>Reference Sequence</h3>\r\n                        <p class=\"wrapped nokern\">{proteinName.sequence}</p>\r\n            </div>\r\n\r\n        )\r\n    })\r\n    return (\r\n        <section>\r\n            <div className=\"box\">\r\n                <h1 class=\"msaIdCatcher\">Protein Record: {protId}</h1>\r\n                <table class= \"infotable\">\r\n                    <tbody>\r\n                        <tr>\r\n                            <th scope=\"row\">Proteins Predicted:</th>\r\n                            <td>{proteinNameListScript}</td>\r\n                        </tr>\t\t\t\r\n                        <tr>\r\n                            <th scope=\"row\">Retrotransposon Class: </th>\r\n                            <td><Link to={\"/class/\" + rtClass}>{rtClass}</Link></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <th scope=\"row\">Family:</th>\r\n                            <td><Link to={\"/family/\" + family}>{family}</Link></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <th scope=\"row\">Translated From DNA Record:</th>\r\n                            <td><Link to={\"/dna/\" + dnaId}>{dnaId}</Link></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <th scope=\"row\">DNA Record Coordinates:</th>\r\n                            <td>{coords}</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <h2>Sequence</h2>\r\n                <p class=\"wrapped nokern\">{sequence}</p>\r\n\r\n                <h1>Predicted Proteins</h1>\r\n                <p>Note: protein prediction was done using psi-blast. This detects distantly related sequences and can potentially detect sequencs related to adjacent sequences. Discretion is advised.</p>\r\n                <div>\r\n                    {proteinFunctions}\r\n                </div>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default ProteinRecordDetail","import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport { Link } from 'react-router-dom'\r\nimport { PredictedProteinsWithIdsNoFilter } from '../../functions/functions'\r\n\r\n\r\nconst DnaDetail = (props) => {\r\n    const [dna_id, setId] = useState(props.match.params.dna_id);\r\n    const [family, setFamily] = useState();\r\n    const [rtClass, setRtClass] = useState([]);\r\n    const [sequence, setSequence] = useState([]);\r\n    const [proteinRecords, setProteinRecords] = useState([]);\r\n\r\n    useEffect(() => {\r\n        axios.get('https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/dnarecorddata/', {params: {\"dna_id\": dna_id}})\r\n            .then(res => {\r\n                console.log(res.data)\r\n                setId(res.data.body.dna_id)\r\n                setFamily(res.data.body.family)\r\n                setRtClass(res.data.body.class)\r\n                setSequence(res.data.body.dna_seq)\r\n                setProteinRecords(res.data.body.protein_data)\r\n            })\r\n    }, [])\r\n\r\n    const proteinScript = proteinRecords\r\n        && Object.keys(proteinRecords).length === 0 \r\n        && typeof(proteinRecords) === \"object\"\r\n        ?\r\n            <span>No Proteins Predicted</span>\r\n        :\r\n            proteinRecords.map( (protrec, j) => {\r\n                if (protrec.protein.includes(\"#\")){\r\n                    var protspl = protrec.split(\"#\");\r\n                    var protnames = protspl.map( (protein, i) => {\r\n                        return (\r\n                            <>\r\n                                <Link to={\"/knownprotein/\" + protein}>\r\n                                    {protein}\r\n                                </Link>\r\n                                {\r\n                                    i !== protspl.length - 1\r\n                                    ? \", \"\r\n                                    : null\r\n                                }\r\n                            </> \r\n                        )\r\n                    });\r\n                    \r\n                } else {\r\n                    var protnames = <Link to={\"/knownprotein/\" + protrec.protein}>{protrec.protein}</Link>\r\n                }\r\n        \r\n                return (\r\n                    <>\r\n                        <Link>{protrec.prot_id}</Link> ({protnames})\r\n                        {j !== proteinRecords.length - 1\r\n                            ? \", \"\r\n                            : null\r\n                        }\r\n                    </>\r\n                )\r\n            })\r\n\r\n    console.log(proteinScript)\r\n    return (\r\n        <section>\r\n            <div className=\"box\">\r\n                <h1>DNA Repeat Record: {dna_id}</h1>\r\n                    <table class= \"infotable\">\r\n                        <tbody>\r\n                        <tr>\r\n                            <th scope=\"row\">Retrotransposon Class: </th>\r\n                            <td><Link to={\"/class/\" + rtClass}>{rtClass}</Link></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <th scope=\"row\">Family:</th>\r\n                                <td><Link to={\"/family/\"+ family}>{family}</Link></td>\r\n                        </tr>\r\n                        <tr >\r\n                            <th scope=\"row\">Protein Sequences Predicted:</th>\r\n                            <td>{proteinScript}</td>\r\n                        </tr >\r\n                        </tbody>\r\n                    </table >\r\n                    <h2>DNA sequence</h2>\r\n                        <p class=\"wrapped nokern\">{sequence}</p>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default DnaDetail","import axios from 'axios';\r\nimport React, { useEffect, useState, useRef } from 'react';\r\nimport Chartjs from 'chart.js';\r\n\r\nconst TeGraphComponent = (props) => {\r\n    \r\n    const [tissue, setTissue] = useState(null)\r\n    const [data, setData] = useState(null)\r\n\r\n    useEffect(() => {\r\n        const FetchData = async () => {\r\n            const tissueSelectedGet = { \"tissue\": props.tissueSelected }\r\n            const response = await axios.get('https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/tegraphs', tissueSelectedGet);\r\n            setTissue(response.data.tissue)\r\n            setData(response.data.counts)\r\n        }\r\n        FetchData();\r\n    }, [props.tissueSelected]);\r\n\r\n\r\n    const chartContainer = useRef(null);\r\n    const [chartInstance, setChartInstance] = useState(null);\r\n\r\n    useEffect(() => {\r\n\r\n        if (data) {\r\n            const rtClass = Object.keys(data)[0];\r\n            const y = Object.keys(data[rtClass]);\r\n            const x = Object.values(data[rtClass])\r\n\r\n            const chartConfig = {\r\n                responsive: true,\r\n                maintainAspectRatio: false,\r\n                type: 'bar',\r\n                data: {\r\n                    labels: y,\r\n                    datasets: [{\r\n                        label: '#Detections',\r\n                        data: x,\r\n                        borderWidth: 1,\r\n                        backgroundColor: '#2e70b3'\r\n                    }]\r\n                },\r\n                options: {\r\n                    scales: {\r\n                        yAxes: [{\r\n                            ticks: {\r\n                                beginAtZero: true,\r\n                                precision: 0\r\n                            }\r\n                        }]\r\n                    }\r\n                }\r\n            }\r\n            if (chartContainer && chartContainer.current) {\r\n                const newChartInstance = new Chartjs(chartContainer.current, chartConfig);\r\n                setChartInstance(newChartInstance);\r\n            }\r\n        }\r\n    }, [data]);\r\n\r\n\r\n    return (\r\n        <canvas ref={chartContainer} className=\"GraphBox\"/>\r\n\r\n    );\r\n};\r\n\r\nexport default TeGraphComponent","import axios from 'axios';\r\nimport React, { useEffect, useState, useRef } from 'react';\r\nimport TeGraphComponent from './TeGraphs';\r\nimport { Link } from 'react-router-dom';\r\nimport { Auth } from 'aws-amplify';\r\n\r\nconst TeContainer = (props) => {\r\n\r\n    const [tissueSelected, setTissueSelected] = useState(null);\r\n    const SelectTissue = (e) => {\r\n        setTissueSelected(e.target.innerHTML)\r\n    }\r\n\r\n    async function signOut() {\r\n        try {\r\n            await Auth.signOut();\r\n        } catch (error) {\r\n            console.log('error signing out: ', error);\r\n        }\r\n    }\r\n\r\n    \r\n    const signUpIn = props.user\r\n        ? (\r\n            <div style={{ \"padding-top\": \"2rem\" }}>\r\n                <Link to=\"/tissueexpressionupload\">Upload New Data</Link>\r\n                <div>\r\n                    <span class=\"PageNumberLinks\" style={{ \"padding-left\": 0}} onClick={signOut}>Sign out</span>\r\n                </div>\r\n            </div>\r\n            )\r\n        : (\r\n            <div style={{ \"padding-top\": \"2rem\" }}>\r\n                <span > Click here to sign in and upload your own data... </span>\r\n                <Link to={{\r\n                    \"pathname\": \"/signin\",\r\n                    \"state\": {\r\n                        \"from\": \"/tissueexpression\"\r\n                    }\r\n                }}\r\n                    > Sign in / Register\r\n                </Link> \r\n            </div>\r\n    )\r\n \r\n\r\n    return (\r\n        <section>\r\n            <div className=\"box\">\r\n                <div style={{ \"color\": \"green\", \"border\": \"green solid 2px\", \"padding\": \"1rem\", \"margin\": \"10px 0\" }}>\r\n                    <p>Tissue Expression Atlas is under development.</p>\r\n                    <p>This page is connected to a mock API</p>\r\n                </div>\r\n                <h1>Tissue Expression Atlas</h1>\r\n                <div className=\"TissueGraphsSection\">\r\n                    <div className=\"TissueList\">\r\n                        <h3>Select Tissue</h3>\r\n                        <table onClick={SelectTissue}>\r\n                            <tr>\r\n                                Lung\r\n                            </tr>\r\n                            <tr>\r\n                                Heart\r\n                            </tr>\r\n                        </table>\r\n                    </div>\r\n                    <div className=\"GraphContainer\">\r\n                        <TeGraphComponent tissueSelected={tissueSelected}/>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    {signUpIn}\r\n                </div>\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default TeContainer","//import React, {useState} from 'react';\r\nimport axios from 'axios';\r\nimport React, { useState } from 'react';\r\nimport LoadingOverlay from 'react-loading-overlay';\r\nimport FadeLoader from 'react-spinners/FadeLoader';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst UploadTeData = (props) => {  \r\n    const [loading, setLoading] = useState(false);\r\n    const [success, setSuccess] = useState(false);\r\n\r\n// Form inputs\r\n    const [file, setFile] = useState(null);\r\n    const [tissue, setTissue] = useState(null);\r\n    const [cancer, setCancer] = useState(\"No\");\r\n    const [published, setPublished] = useState(\"No\");\r\n    const [publication, setPublication] = useState(null);\r\n    const [researcher, setResearcher] = useState(null);\r\n\r\n\r\n    function FormGetFile (e) {\r\n        setFile(e.target.files[0])\r\n    }\r\n    function FormGetTissue (e) {\r\n        setTissue(e.target.value)\r\n    }\r\n    function FormGetCancer(e) {\r\n        setCancer(e.target.value)\r\n    }\r\n    function FormGetPublished(e) {\r\n        setPublished(e.target.value)\r\n    }\r\n    function FormGetPublication(e) {\r\n        setPublication(e.target.value)\r\n    }\r\n    function FormGetResearcher(e) {\r\n        setResearcher(e.target.value)\r\n    }\r\n\r\n// Form error handling\r\n    const [error, setError] = useState(false);\r\n    const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n    const SubmitForm = async (e) => {\r\n        e.preventDefault()\r\n        return\r\n        setError(false);\r\n        //Make filename key\r\n        const metadata = {\r\n            \"tissue\": tissue,\r\n            \"cancer\": ( String(cancer) === \"Yes\"? true : false ),\r\n            \"published\": ( String(published) === \"Yes\" ? true : false ),\r\n            \"publication\": publication,\r\n            \"researcher\": researcher,\r\n            \"username\": props.user.username\r\n        }\r\n        if (!tissue || !researcher || (published===\"Yes\" && !publication)) {\r\n            setError(true);\r\n            console.log(published)\r\n            setErrorMessage(\"You have missed some form fields\")\r\n            return\r\n        }\r\n        \r\n        const SubmitFormParams = { \r\n            \"headers\": {\r\n                \"Authorization\": props.user.signInUserSession.idToken.jwtToken\r\n            },\r\n            \"params\": metadata }\r\n        \r\n        \r\n        try {\r\n            setLoading(true)\r\n            const response = await axios.get(\"https://kvuhomev06.execute-api.us-east-1.amazonaws.com/dev/get-s3-presigned-url\", SubmitFormParams)\r\n            console.log(\"Collected presigned url\")\r\n            const signedURL = response.data.url\r\n            //rename file to key for presigned upload\r\n            Object.defineProperty(file, 'name', {\r\n                writable: true,\r\n                value: response.data.key\r\n            });\r\n\r\n            console.log(signedURL, \"sending file\")\r\n            const axiosResponse = await axios.put(signedURL, file);\r\n            console.info(axiosResponse)\r\n            \r\n            setLoading(false)\r\n            setSuccess(true)\r\n\r\n        } catch (error) {\r\n            setLoading(false)\r\n\r\n            setError(true);\r\n            setErrorMessage(\"Authorization to upload data not granted\")\r\n        }\r\n    }\r\n\r\n\r\n    const errorMessageBox = error\r\n        ? (<div style={{ \"color\": \"red\", \"border\": \"red solid 2px\", \"padding\": \"1rem\" }}>\r\n            {errorMessage}\r\n        </div>)\r\n        : null\r\n\r\n// if success sending file, return success page\r\n    if (success) {\r\n        return(\r\n            <div>\r\n                <h3>Success!</h3>\r\n                <p>File has been send for processing. When ready, your results will be available at <Link>My Account</Link></p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n// Publication field available if published field is set to yes\r\n    const publicationInput = (String(published) === \"Yes\")\r\n    ? (<tr>\r\n            <td>Provide link to publication: </td>\r\n            <td>\r\n                <input type=\"text\" id=\"publication\" name=\"publication\" value={publication} onChange={FormGetPublication}></input>\r\n            </td>\r\n        </tr>)\r\n    : null\r\n\r\n    return (\r\n        <section>\r\n            <div className=\"box\">\r\n                <div className=\"container\">\r\n                    <div className=\"smallertext\">\r\n                        <div style={{ \"color\": \"green\", \"border\": \"green solid 2px\", \"padding\": \"1rem\", \"margin\": \"10px 0\" }}>\r\n                            <p>This form is currently disconnected from the backend</p>\r\n                        </div>\r\n                        <h1>Query sequences against the Retrobase database</h1>\r\n                        {errorMessageBox}\r\n                        <LoadingOverlay\r\n                            active={loading}\r\n                            spinner={<FadeLoader />}\r\n                        >\r\n                            <form onSubmit={SubmitForm}>\r\n                                <table style={{ \"border-collapse\": \"collapse\" }}>\r\n                                    <tbody>\r\n                                        <tr>\r\n                                            <td>Upload MZIdentML file:</td>\r\n                                            <td>\r\n                                                <input type=\"file\" id=\"uploadFile\" name=\"uploadFile\" value={null} onChange={FormGetFile }></input>\r\n                                            </td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <td>Tissue: </td>\r\n                                            <td>\r\n                                                <input type=\"text\" id=\"tissueType\" name=\"tissueType\" value={tissue} onChange={FormGetTissue}></input>\r\n                                            </td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <td>\r\n                                                Is this a cancer sample?\r\n                                            </td>\r\n                                            <td>\r\n                                                <select id=\"cancer\" name=\"cancer\" value = {cancer} onChange={FormGetCancer}>\r\n                                                    <option>Yes</option>\r\n                                                    <option>No</option>\r\n                                                </select>\r\n                                            </td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <td>\r\n                                                Is this data published?\r\n                                            </td>\r\n                                            <td>\r\n                                                <select id=\"published\" name=\"published\" value={published} onChange={FormGetPublished}>\r\n                                                    <option>Yes</option>\r\n                                                    <option>No</option>\r\n                                                </select>\r\n                                            </td>\r\n                                        </tr>\r\n                                        {publicationInput}\r\n                                        <tr>\r\n                                            <td>Research Name: </td>\r\n                                            <td>\r\n                                                <input type=\"text\" id=\"researcher\" name=\"researcher\" value={researcher} onChange={FormGetResearcher}></input>\r\n                                            </td>\r\n                                        </tr>\r\n                                    </tbody>\r\n                                </table>\r\n                                <button>Submit</button>\r\n                            </form>\r\n                        </LoadingOverlay>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    )\r\n};\r\n\r\nexport default UploadTeData;\r\n","import { Auth } from 'aws-amplify';\r\nimport React, {useState} from 'react';\r\nimport { useHistory, useParams, Link } from \"react-router-dom\";\r\nimport LoadingOverlay from 'react-loading-overlay'\r\nimport FadeLoader from 'react-spinners/FadeLoader'\r\n\r\nconst SignUpForm = (props) => {\r\n\r\n    const history = useHistory();\r\n\r\n    const [error, setError] =useState(false);\r\n    const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\"); \r\n    const [confirmPassword, setConfirmPassword] = useState(\"\"); \r\n    \r\n\r\n    const emailChange = (e) => {\r\n        setEmail(e.target.value)\r\n    };\r\n    const passwordChange = (e) => {\r\n        setPassword(e.target.value)\r\n    };\r\n    const confirmPasswordChange = (e) => {\r\n        setConfirmPassword(e.target.value)\r\n    }\r\n\r\n\r\n    const fromURL = (typeof props.location.state !== \"undefined\")\r\n        ? props.location.state.from\r\n        : \"/\"\r\n\r\n    const handleSignUp = async (e) => {\r\n        e.preventDefault()\r\n        if (!email || !password || !confirmPassword) {\r\n            setError(true);\r\n            setErrorMessage(\"All fields must be used\")\r\n            return\r\n        }\r\n        try {\r\n            setError(false);\r\n            if(password !== confirmPassword) {\r\n                setError(true);\r\n                setErrorMessage(\"Passwords do not match\")\r\n                return\r\n            } else if (password.length < 8) {\r\n                setError(true);\r\n                setErrorMessage(\"Password must be a minimum of 8 characters\")\r\n                return\r\n            }\r\n            setLoading(true)\r\n            await Auth.signUp({ username:email, password, attributes: { \"email\": email}}) \r\n            history.push( {\r\n                pathname: '/confirmsignup',\r\n                state: {\r\n                    \"username\": email,\r\n                    \"from\": fromURL\r\n            }\r\n            });\r\n        } catch (error) {\r\n            console.log(\"Error signing up: \", error)\r\n            setLoading(false)\r\n\r\n            if (error.code === \"UsernameExistsException\") {\r\n                setErrorMessage(\r\n                <div>\r\n                    <p>Email already registered.</p>\r\n                    <p>If you attempted to register and need to validate email <span class=\"PageNumberLinks\" onClick={ resendConfirmationCode }>click here.</span></p>\r\n                </div>);\r\n                setError(true);\r\n            }\r\n        };\r\n    }\r\n\r\n    async function resendConfirmationCode() {\r\n        try {\r\n            setLoading(true);\r\n\r\n            await Auth.resendSignUp(email);\r\n            setLoading(false);\r\n            history.push({\r\n                pathname: '/confirmsignup',\r\n                state: {\r\n                    \"username\": email,\r\n                    \"from\": fromURL\r\n                }\r\n            });\r\n            console.log('code resent successfully');\r\n        } catch (error) {\r\n            console.log('error resending code: ', error);\r\n            setLoading(false);\r\n            setError(false);\r\n            setErrorMessage(\"Error resending code\")\r\n        }\r\n    }\r\n\r\n    const errorMessageBox = error\r\n    ? (<div style={{\"color\": \"red\", \"border\": \"red solid 2px\", \"padding\": \"1rem\"}}>\r\n        {errorMessage}\r\n    </div>)\r\n    : null\r\n\r\n    return(\r\n        <section class=\"sign-in-up\">\r\n            <div className=\"box\">\r\n\r\n                <h1>Register User</h1>\r\n                <LoadingOverlay\r\n                    active={loading}\r\n                    spinner={<FadeLoader />}\r\n                >\r\n                    {errorMessageBox}\r\n                    <form className=\"sign-in-up-form\" onSubmit={handleSignUp}>\r\n                        <table>\r\n                            <tr>\r\n                                <th>Email</th>\r\n                                <td><input className=\"sign-in-up-input\" type=\"text\" name=\"username\" id=\"username\" onChange={emailChange}></input></td>\r\n                            </tr>\r\n\r\n                            <tr>\r\n                                <th>Password</th>\r\n                                <td><input className=\"sign-in-up-input\" type=\"password\" name=\"password\" id=\"password\" onChange={passwordChange}></input></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <th>Confirm Password</th>\r\n                                <td><input className=\"sign-in-up-input\" type=\"password\" name=\"confirm_password\" id=\"confirm_password\" onChange={confirmPasswordChange}></input></td>\r\n                            </tr>\r\n                        </table>\r\n                        <div>\r\n                            <button>Submit</button>\r\n                        </div>\r\n                    </form>\r\n                </LoadingOverlay>\r\n                <div style={{ \"padding-top\": \"2rem\" }}>\r\n                    <span>Already have an account? </span>\r\n                    <Link \r\n                        to={{ pathname: '/signin', state: { \"from\": fromURL}}}>\r\n                            Sign In\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default SignUpForm;","import { Auth } from 'aws-amplify';\r\nimport React, { useState } from 'react';\r\nimport { useHistory, Link} from \"react-router-dom\";\r\nimport LoadingOverlay from 'react-loading-overlay'\r\nimport FadeLoader from 'react-spinners/FadeLoader'\r\n\r\n\r\nconst SignInForm = (props) => {\r\n\r\n    const history = useHistory();\r\n\r\n    const [username, setUsername] = useState(\"\");\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\"); \r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(false);\r\n    const [errorMessage, setErrorMessage] = useState(\"\");   \r\n    \r\n    const fromURL = (typeof props.location.state != \"undefined\")\r\n        ? props.location.state.from    \r\n        : \"/\"\r\n\r\n    const emailChange = (e) => {\r\n        setEmail(e.target.value)\r\n    };\r\n    const passwordChange = (e) => {\r\n        setPassword(e.target.value)\r\n    };\r\n\r\n    const handleSignIn = async (e) => {\r\n        e.preventDefault()\r\n        setError(false)\r\n        if (!password || !email) {\r\n            setError(true);\r\n            setErrorMessage(\"Missing email or password\")\r\n            return\r\n        }\r\n        try {\r\n            setLoading(true)\r\n            await Auth.signIn(email, password);\r\n            setLoading(false)\r\n            history.push(fromURL)\r\n        } catch (error) {\r\n            console.log('error signing in', error)\r\n            setLoading(false);\r\n            if (error.code === \"NotAuthorizedException\"){\r\n                setError(true);\r\n                setErrorMessage(\"Incorrect email or password\")\r\n            } else if (error.code ===\"UserNotConfirmedException\") {\r\n                setError(true);\r\n                setErrorMessage(<div>\r\n                    <p>Registration attempted with this email. Email needs validating.</p>\r\n                    <p>To resend confirmation code, <span class=\"PageNumberLinks\" onClick={resendConfirmationCode}>click here</span></p>\r\n                    </div>)\r\n            }\r\n        }\r\n    }\r\n\r\n    async function resendConfirmationCode() {\r\n        try {\r\n            setLoading(true);\r\n\r\n            await Auth.resendSignUp(email);\r\n            setLoading(false);\r\n            history.push({\r\n                pathname: '/confirmsignup',\r\n                state: {\r\n                    \"username\": email,\r\n                    \"from\": fromURL\r\n                }\r\n            });\r\n            console.log('code resent successfully');\r\n        } catch (error) {\r\n            console.log('error resending code: ', error);\r\n            setLoading(false);\r\n            setError(false);\r\n            setErrorMessage(\"Error resending code\")\r\n        }\r\n    }\r\n\r\n    const successMessageBox = props.location.state.success\r\n        ? (<div style={{ \"color\": \"green\", \"border\": \"green solid 2px\", \"padding\": \"1rem\" }}>\r\n            {props.location.state.successMessage}\r\n            </div>)\r\n        : null \r\n\r\n    const errorMessageBox = error\r\n        ? (<div style={{ \"color\": \"red\", \"border\": \"red solid 2px\", \"padding\": \"1rem\" }}>\r\n            {errorMessage}\r\n        </div>)\r\n        : null\r\n\r\n    return (\r\n        <section class=\"sign-in-up\">\r\n            <div className=\"box\">\r\n\r\n                <div>\r\n                    <LoadingOverlay\r\n                        active={loading}\r\n                        spinner={<FadeLoader />}\r\n                    >\r\n                    \r\n                    <h1>Sign In</h1>\r\n                    {successMessageBox}\r\n                    {errorMessageBox}\r\n                        <form className=\"sign-in-up-form\" onSubmit={handleSignIn}>\r\n                            <table>\r\n                                <tr>\r\n                                    <th>Email</th>\r\n                                    <td><input className=\"sign-in-up-input\" type=\"email\" name=\"email\" onChange={emailChange}></input></td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <th>Password</th>\r\n                                    <td><input className=\"sign-in-up-input\" type=\"password\" name=\"password\" onChange={passwordChange}></input></td>\r\n                                </tr>\r\n                            </table>\r\n                            <button>Submit</button>\r\n                            <div>\r\n                                <Link \r\n                                    to={{\"pathname\": 'user-registration',\r\n                                        \"state\": {\r\n                                            \"from\": fromURL\r\n                                        }\r\n                                    }}>Register\r\n                                </Link>\r\n                            </div>\r\n                        </form>\r\n                    </LoadingOverlay>\r\n               </div>                    \r\n            </div>\r\n        </section>\r\n\r\n    )\r\n}\r\nexport default SignInForm;","import { Auth } from 'aws-amplify';\r\nimport React, {useState} from 'react';\r\nimport { useHistory, useParams, Link } from \"react-router-dom\";\r\nimport LoadingOverlay from 'react-loading-overlay';\r\nimport FadeLoader from 'react-spinners/FadeLoader';\r\n\r\n\r\nconst ConfirmSignUp = (props) => {\r\n\r\n    const history = useHistory();\r\n\r\n    const [confirmation, setConfirmation] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [success, setSuccess] = useState(false);\r\n    const [successMessage, setSuccessMessage] = useState(\"\");\r\n    const [error, setError] = useState(false);\r\n    const [errorMessage, setErrorMessage] = useState(\"\") \r\n\r\n    const confirmationChange = (e) => {\r\n        setConfirmation(e.target.value)\r\n    }\r\n\r\n    const handleConfirmSignUp = async (e) => {\r\n        e.preventDefault();\r\n        setError(false);\r\n        setSuccess(false);\r\n        if (!confirmation){\r\n            setError(true);\r\n            setErrorMessage(\"Please enter confirmation code sent to your email\");\r\n            return\r\n        }\r\n        var regex = /^[0-9]+$/;\r\n        if (!confirmation.match(regex) || confirmation.length !== 6) {\r\n            setError(true);\r\n            setErrorMessage(\"Code should be 6 digit number\")\r\n            return\r\n        }\r\n        try {\r\n            setLoading(true)\r\n            await Auth.confirmSignUp(props.location.state.username, confirmation);\r\n            setLoading(false)\r\n            history.push({\r\n                pathname: '/signin',\r\n                state: { \r\n                    \"from\": props.location.state.from,\r\n                    \"success\": true,\r\n                    \"successMessage\": \"Account registered! You may now sign in.\"}\r\n            })\r\n        } catch (error) {\r\n            setLoading(false);\r\n            if (error.code === \"CodeMismatchException\") {\r\n                setError(true);\r\n                setErrorMessage(\"Incorrect code\");\r\n            }\r\n        }\r\n    }\r\n\r\n    async function resendConfirmationCode() {\r\n\r\n        try {\r\n            setLoading(true);\r\n            await Auth.resendSignUp(props.location.state.username);\r\n            setLoading(false);\r\n            setSuccess(true);\r\n            setSuccessMessage(\"Confirmation code resent!\")\r\n            console.log('code resent successfully');\r\n        } catch (err) {\r\n            console.log('error resending code: ', err);\r\n        }\r\n    }\r\n\r\n    const successMessageBox = success\r\n        ? (<div style={{ \"color\": \"green\", \"border\": \"green solid 2px\", \"padding\": \"1rem\", \"margin-bottom\": \"1rem\" }}>\r\n            {successMessage}\r\n        </div>)\r\n        : null\r\n\r\n    const errorMessageBox = error\r\n        ? (<div style={{ \"color\": \"red\", \"border\": \"red solid 2px\", \"padding\": \"1rem\", \"margin-bottom\": \"1rem\" }}>\r\n            {errorMessage}\r\n        </div>)\r\n        : null\r\n\r\n    return (\r\n        <section className=\"sign-in-up\">\r\n            <div className=\"box\">\r\n                <LoadingOverlay\r\n                    active={loading}\r\n                    spinner={<FadeLoader />}\r\n                >\r\n                    <h3>Please enter the confirmation code sent to your email...</h3>\r\n                    {successMessageBox}\r\n                    {errorMessageBox}\r\n                    <form className=\"sign-in-up-form\" onSubmit={handleConfirmSignUp}>\r\n                            <label for=\"confirmation\">Confirmation Code: </label>\r\n                            <span className=\"sign-in-up-input-container\">\r\n                                <input className=\"sign-in-up-input\" type=\"text\" name=\"confirmation\" id=\"confirmation\" onChange={confirmationChange}></input>\r\n                                <button className=\"sign-in-up-submit\">Submit</button>\r\n                            </span>\r\n                        <div style={{\"padding-top\": \"1rem\"}}>\r\n                            <span>Did not receive confirmation code? </span><span class='PageNumberLinks' onClick={resendConfirmationCode}>Resend</span>\r\n                        </div>\r\n                    </form>\r\n                </LoadingOverlay>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default ConfirmSignUp;","export default __webpack_public_path__ + \"static/media/queryRawSeq.edd4f9b2.png\";","export default __webpack_public_path__ + \"static/media/queryRawSeqSmall.985e31a7.png\";","import React from 'react';\r\nimport { HashLink as Link } from 'react-router-hash-link';\r\nimport queryRawSeq from '../assets/architecture_diagrams/queryRawSeq.png'\r\nimport queryRawSeqSmall from '../assets/architecture_diagrams/queryRawSeqSmall.png'\r\n\r\n\r\nconst Documentation = () => {\r\n\r\n    return(\r\n        <section className=\"documentation\">\r\n            <div className=\"box\">\r\n                <h1>Documentation</h1>\r\n                <h2>The purpose of the project</h2>\r\n                <p>Retrobase is a project I am undertaking both as a vehicle for self-teaching full stack development and cloud architecting skills in AWS, as well as a means of demonstrating my abilities to prospective employers. It is a project in progress. </p>\r\n                <h2>The Specification</h2>\r\n                <p>Retrobase is a database of retrotransposon DNA sequences acquired from UCSC Table Browser, as well as protein sequences predicted <i>in silico</i> from those DNA sequences. DNA sequences were translated into potential protein sequences by a simple algorithm. These potential protein sequences were compared to the sequences of known retrotransposon proteins and, based on similarity, were predicted to be real retrotransposon protein sequences or not. Psi-BLAST was used to achieve this. The database can be queried using the Retrobase Query tool, both by manually entering DNA or protein sequences and by submitting a zipped MZID-formatted file containing peptide sequences. In order to submit a file via Query, the user must register and log in. Another tool under development is Tissue Expression Atlas, which will be an analytics tool, providing graphical insight into which retrotransposon classes, families and proteins are found expressed in different tissues of the body. The data presented in Tissue Expression Atlas will be from files uploaded by users, in Query, who give permission for it to be stored and made publically available.</p>\r\n                <p>Retrobase's frontend is composed of a React.js single page application run from AWS S3. The back end is composed of an AWS-based serverless application, using DynamoDB, S3, S3 Select, Lambda,  API Gateway, Cognito and Amplify. See below in the <Link to='/documentation#architectureDoc'>Architecture</Link> section for details on the architecture.</p>\r\n                <p>Originally, both tools were to be based on PostgreSQL in AWS RDS but I have decided to transition to DynamoDB to address the limitations of scaling with RDS in a serverless application. </p>\r\n\r\n                <h2 id=\"whatIsRetro\">What is a retrotransposon?</h2>\r\n                <p>In short, retrotransposons are sections of our genomes that descend from retroviruses. Retroviruses reproduce by inserting their own DNA into the host genome and tricking the host into reading their DNA and making more copies of the virus. When these viral elements enter the genomes of germ-line cells (sperms and egg cells) or foetal cells, all cells descending from those infected cells will contain the viral sequences. These viral sequences can also have the ability to amplify themselves by having the host cell create copies of them and insert them elsewhere in the genome- a process called transposition. As much as 40% of the human genome is composed of retrotransposon sequences, making their study an important part of biology. Thankfully, the majority of these sequences are inactivated by our cells or are mutated to the point of no long functioning, so usually do not cause us harm. However, there are disease conditions involving their activity.</p>\r\n\r\n                <h2 id=\"architectureDoc\">The Architecture</h2>\r\n                <h3>Database</h3>\r\n                <p>The backend is centered around the following <b>DynamoDB</b> tables:</p>\r\n                <p><b>query_db</b>, contains data on DNA sequences, protein sequences predicted from those DNA sequences and metadata on those sequences. As DynamoDB cannot be queried for substrings (besides begins with), DynamoDB is partnered with S3 Select. User input sequences are queried against parquet files containing the either DNA or protein sequences, along with the corresponding partition keys for the DynamoDB items containing sequence. These queries are orchestrated by Lambda functions, which the partition keys of matching sequences from the S3 select queries and collect the corresponding data from DynamoDB.</p>\r\n                <p><b>prot_db</b> simply contains data on known retrotransposon proteins, including protein functions and sequences. This data does not need to be accessed simultaneously with data retrieved by the Query tool and is therefore kept separately to avoid excessive data duplication. Data in this table need only be retrieved to display details on a given known retrotransposon protein.</p>\r\n                <p>Similarly, <b>class_db</b> contains data on retrotransposon classes for population of detail pages.</p>\r\n                <p><b>te_db</b> contains the data of Tissue Expression Atlas. Users upload MZID files to the application, which are stored in S3 and processed via a series of Lambda functions to extract sequences and query for substring matches to sequences in query_db. In te_db, an item is composed of a peptide ID and sequence that was found to have a match in the database, the ID of the file from which the peptide comes, the ID of the potential (<a href='#'>see The Specification above</a>) protein sequence to which the peptide was matched, the known protein(s) that Retrobase predicts the potential protein to be and the family and class of the sequence from which the potential protein was translated.</p>\r\n                <p><b>family_te_db</b> contains summary descriptive data on retrotransposon families expressed in different tissues.</p>\r\n                <p><b>protein_te_db</b> contains summary descriptive data on retrotransposon families expressed in different tissues.</p>\r\n\r\n                <h3>Query</h3>\r\n                <h3>With Raw sequence:</h3>\r\n                <img src={queryRawSeq} className=\"queryRawDiagram widthheight100 borderBlack1px\"/>\r\n                <img src={queryRawSeqSmall} className=\"queryRawDiagramSmall widthheight100 borderBlack1px\" />\r\n\r\n                <ol>\r\n                    <li>Client submits an asynchronous GET request to API Gateway: to a resource specifically for either DNA or protein sequences, with a query sequence in its params.</li>\r\n                    <li>API gateway passes the query to a Lambda function. The function creates a token. An item is created in a table, query_progress, in DynamoDB with the token as its key and an attribute, \"complete\", set to 0. The token is returned to the client via API gateway. The rest of the process will be asynchronous.</li>\r\n                    <li>A second Lambda is invoked asynchronously and is passed the query string and the token created by the first function.</li>\r\n                    <li>If the query string is less than 5 characters, a DynamoDB scan is executed immediately for sequences containing the query, skipping straight to step 6. This is because there will be so many sequences containing such a generic query that it is more efficient to scan the whole table than to run get_item individually on each partition key. If the query length is greater than 5, the Lambda function runs an S3 Select query on an parquet file in S3, composed of DNA or protein sequences and their corresponding partition keys in DynamoDB.</li>\r\n                    <li>The returned partition keys are then used to collect the relevant items from DynamoDB.</li>\r\n                    <li>The data is packaged into a JSON file and put in an S3 bucket.</li>\r\n                    <li>The item in the DynamoDB table, query_progress, with the token create in step 1 as key, has its \"completed\" attribute set to 1.</li>\r\n                    <li>The client is polling a separate API gateway resource. Sending a GET request to this method with a token triggers a third Lambda function.</li>\r\n                    <li>The third function checks if the item in the query_progress DynamoDB table with the token as its partition key has the \"complete\" attribute set to 1.</li>\r\n                    <li>If complete is now true, the data is retrieved from S3 and returned to the client via API Gateway.</li>\r\n\r\n                </ol>\r\n\r\n                <b>Limitations:</b>\r\n                <p>It is possible to simply contain all the relevant columns in the paquet file in S3 on which the initial SELECT query is run. This eliminates the need to query for the remaining values in DynamoDB. Therefore, the current architecture is illogical. I created the current architecture as a means of gaining experience creating asynchronous processes involving multiple cloud resources.</p>\r\n\r\n                <h3>With MZID file:</h3>\r\n                <p>Documentation coming soon!</p>\r\n\r\n                <h3>Tissue Expression Atlas</h3>\r\n                <p>Documentation coming soon!</p>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default Documentation","/* eslint-disable */\n// WARNING: DO NOT EDIT. This file is automatically generated by AWS Amplify. It will be overwritten.\n\nconst awsmobile = {\n    \"aws_project_region\": \"us-east-1\",\n    \"aws_cognito_identity_pool_id\": \"us-east-1:3895c96c-f6f3-4543-af88-ff83dcf41ddc\",\n    \"aws_cognito_region\": \"us-east-1\",\n    \"aws_user_pools_id\": \"us-east-1_R6k5YitAi\",\n    \"aws_user_pools_web_client_id\": \"16u09k5qchdspo07tfmqlftemq\",\n    \"oauth\": {}\n};\n\n\nexport default awsmobile;\n","import './App.css';\n\n// Components\nimport HomePage from './components/HomePage';\nimport AccountPage from './components/AccountPage';\nimport DnaSearchResults from './components/DnaSearchResults';\nimport ProteinSearchResults from './components/ProteinSearchResults';\nimport Navbar from './components/Navbar';\nimport NavbarSearchResults from './components/detailsPages/NavbarSearchResults'\nimport QueryFormPage from './components/QueryFormPage';\nimport ClassDetail from './components/detailsPages/ClassDetail';\nimport FamilyDetail from './components/detailsPages/FamilyDetail';\nimport ProteinNameDetail from './components/detailsPages/ProteinNameDetail';\nimport ProteinRecordDetail from './components/detailsPages/ProteinRecordDetail';\nimport DnaDetail from './components/detailsPages/DnaDetail';\nimport TeContainer from './components/TissueExpression/TeContainer';\nimport UploadTeData from './components/TissueExpression/TeUserUpload';\nimport SignUpForm from './components/SignUp';\nimport SignInForm from './components/SignIn';\nimport ConfirmSignUp from './components/ConfirmSignUp';\nimport Documentation from './components/Documentation';\n\n// React hooks\nimport { BrowserRouter, Route } from 'react-router-dom';\nimport {useState, useEffect } from 'react';\n\n// Amplify\nimport Amplify, { Auth } from 'aws-amplify';\nimport { Hub } from '@aws-amplify/core';\nimport awsconfig from './aws-exports';\nAmplify.configure(awsconfig);\n\n\nfunction App() {\n\n  let [user, setUser] = useState(null)\n  useEffect(() => {\n    let updateUser = async authState => {\n      try {\n        let user = await Auth.currentAuthenticatedUser()\n        setUser(user)\n      } catch {\n        setUser(null)\n      }\n    }\n    Hub.listen('auth', updateUser) // listen for login/signup events\n    updateUser() // check manually the first time because we won't get a Hub event\n    return () => Hub.remove('auth', updateUser) // cleanup\n  }, []);\n  return (\n    <BrowserRouter>\n    <div className=\"App\">\n      <Navbar user={user}/> \n      \n\n            <Route exact path=\"/\" component={HomePage} />\n            <Route exact path=\"/account\" component={AccountPage} />\n           \n            <Route path=\"/class/:class\" component={ClassDetail} />\n            <Route path=\"/family/:family_id\" component={FamilyDetail} />\n            <Route path=\"/knownprotein/:knownprotein\" component={ProteinNameDetail} />\n            <Route path=\"/dna/:dna_id\" component={DnaDetail} />\n            <Route path=\"/predictedprotein/:protein_id\" component={ProteinRecordDetail} />\n            <Route exact path=\"/query\" component={QueryFormPage} />\n            <Route path=\"/proteinquery/:query\" component={ProteinSearchResults} />\n            <Route path=\"/dnaquery/:query\" component={DnaSearchResults} />\n            <Route path=\"/searchresults/:search\" component={NavbarSearchResults} />\n            <Route path=\"/tissueexpressionupload\">\n              <UploadTeData user={user}/>\n            </Route>          \n\n            <Route path=\"/tissueexpression\">\n              <TeContainer user={user}/>\n            </Route>\n            \n            <Route path=\"/user-registration\" component={SignUpForm}/>\n            <Route path=\"/confirmsignup\" component={ConfirmSignUp}/>\n            <Route path=\"/signin\" component={SignInForm} />\n\n            <Route path=\"/documentation\" component={Documentation}></Route>\n\n    </div>\n  </BrowserRouter>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n//Authentication\nimport Amplify, { Auth } from 'aws-amplify';\nimport awsconfig from './aws-exports';\nAmplify.configure(awsconfig);\n\n\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}