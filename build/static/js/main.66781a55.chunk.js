(this.webpackJsonpretrobase=this.webpackJsonpretrobase||[]).push([[0],{221:function(e,t,n){},248:function(e,t){},250:function(e,t){},261:function(e,t){},263:function(e,t){},290:function(e,t){},292:function(e,t){},293:function(e,t){},298:function(e,t){},300:function(e,t){},319:function(e,t){},331:function(e,t){},334:function(e,t){},380:function(e,t,n){"use strict";n.r(t);var s=n(0),c=n(3),a=n.n(c),r=n(78),i=n.n(r),o=n(9),l=n.n(o),d=n(12),j=n(5),u=(n(221),n(11)),b=n.n(u),h=n(6),p=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2);t[0],t[1];return Object(s.jsx)("section",{className:"home-page",children:Object(s.jsxs)("div",{className:"box",children:[Object(s.jsxs)("div",{className:"title-section",children:[Object(s.jsx)("h1",{children:"Retrobase"}),Object(s.jsxs)("p",{children:["Retrobase is a database of retrotransposon DNA sequences acquired from UCSC Table Browser and proteins translated ",Object(s.jsx)("i",{children:"in silico"})," from these sequences. All protein name labels are predicted using psi-BLAST. Retrobase serves to make these sequences queriable aid in identification of retroviral sequences in proteomic assays. "]}),Object(s.jsx)("h3",{children:"The Purpose of The Project"}),Object(s.jsx)("p",{children:"I am undertaking this project as a vehicle to develop my skills in serverless application design and development."}),Object(s.jsxs)("p",{children:["For more information on the project, ",Object(s.jsx)(h.b,{to:"/documentation/",children:"click here"}),"."]})]}),Object(s.jsxs)("div",{className:"text-boxes",children:[Object(s.jsxs)("div",{className:"text-section",children:[Object(s.jsx)("h2",{children:"Data Available"}),Object(s.jsx)("p",{children:"The database is a prototype and presently contains data on the following retrotransposon families:"}),Object(s.jsx)("ul",{children:Object(s.jsx)("li",{children:Object(s.jsx)(h.b,{to:"/class/ERV",children:"ERV"})})})]}),Object(s.jsxs)("div",{class:"text-section",children:[Object(s.jsx)("h2",{className:"UnderLineHover",children:Object(s.jsx)(h.b,{to:"/query/",children:" Query Tool"})}),Object(s.jsx)("p",{children:"Querying Retrobase allows exact matching of query sequences (whole or partial) to sequences in the database for identification of retroviral proteins. Queries can be of raw single sequences or MZID-formatted files containing many sequences."})]}),Object(s.jsxs)("div",{class:"text-section",children:[Object(s.jsx)("h2",{children:Object(s.jsx)("a",{class:"UnderLineHover",href:"#",children:"Evolutionary Trees"})}),Object(s.jsx)("p",{children:"Tool currently unavailable."}),Object(s.jsx)("p",{children:"Evolutionary Trees is a tool for viewing the evolutionary relationships between families of retrotransposons of a given class/superfamily."})]}),Object(s.jsxs)("div",{class:"text-section",children:[Object(s.jsx)("h2",{children:Object(s.jsx)("a",{class:"UnderLineHover",href:"#",children:"Tissue Expression Atlas"})}),Object(s.jsx)("p",{children:"Tool currently unavailable"}),Object(s.jsx)("p",{children:"The Tissue Expression Atlas is tool for community sourcing data on the tissue specificity of expression of retrotransposon protein sequence variants."})]})]})]})})},O=function(){return Object(s.jsx)("section",{children:Object(s.jsxs)("div",{className:"box",children:[Object(s.jsx)("div",{style:{color:"green",border:"green solid 2px",padding:"1rem",margin:"10px 0"},children:Object(s.jsx)("p",{children:"Account page coming soon!"})}),Object(s.jsx)("h1",{children:"Account"})]})})},x=n(207);function m(e,t,n,s){e.includes(n)&&(t[n].includes(s)||t[n].push(s))}function f(e,t,n){var c=n[t].linkPathUseSelf?e:e[1],a=Array.isArray(e)?e[1]:e;return Object(s.jsx)(h.b,{to:n[t].basePath+c,children:a})}function A(e,t,n,s,c){return!!e||!(!c.includes(s)||n===t||"No Filter"===n)}var g=function(e,t,n,a,r,i){for(var o={},l={},d=0;d<n.length;d++)o[n[d]]=["No Filter"],l[n[d]]="No Filter";for(var u=Object(c.useState)(l),b=Object(j.a)(u,2),h=b[0],p=b[1],O=[],g=0;g<e.length;g++){for(var v=!1,y=e[g],w=[],S=null,N=null,k=0;k<i.length;k++){var q=i[k],D=Object.keys(t).includes(q),T=a.includes(q);if(Object.keys(r).includes(q))if(n.includes(q)){var R=r[q](y[q],q,v,n,h,o);N=R.props.children[0],v=R.props.children[1],o=R.props.children[2]}else N=Object(s.jsx)("td",{children:"customColumns[columnHeader](entry[columnHeader], columnHeader, excludeRow, columnsToFilter, filters, collectUniqueVals)}"});else if(D&&!T)N=Object(s.jsx)("td",{children:f(y[q],q,t)}),S=t[q].linkPathUseSelf?y[q]:y[q][1],m(n,o,q,S),v=A(v,S,h[q],q,n);else if(!D&&T)!function(){var e=y[q].length;N=y[q].map((function(t,c){return m(n,o,q,t),v=A(v,t,h[q],q,n),c+1===e?Object(s.jsx)("span",{children:t}):Object(s.jsxs)("span",{children:[t,", "]})}))}();else if(D&&T){var M;!function(){var e=y[q].length;M=[];var c=y[q].map((function(c,a){return S=t[q].linkPathUseSelf?c:c[1],m(n,o,q,S),M[a]=A(v,S,h[q],q,n),a+1===e?Object(s.jsx)("span",{children:f(c,q,t)}):Object(s.jsxs)("span",{children:[f(c,q,t),", "]})}));v=!M.includes(!1),N=Object(s.jsx)("td",{children:c})}()}else S=y[q],v=A(v,S,h[q],q,n),m(n,o,q,S),N=Object(s.jsx)("td",{children:S});N&&w.push(N)}v||O.push(Object(s.jsx)("tr",{children:w}))}for(var C,I=Object(c.useState)(10),E=Object(j.a)(I,2),B=E[0],P=(E[1],Object(c.useState)(0)),Q=Object(j.a)(P,2),U=Q[0],F=Q[1],L=(C=B,O.reduce((function(e,t,n){var s=Math.floor(n/C);return(e[s]||(e[s]=[])).push(t),e}),[])),J=function(e,t,n){var s,c,a=Math.ceil(e/2),r=Math.floor(e/2);return t<e?(s=0,c=t):n>=0&&n<=a?(s=0,c=e):n+r>=t?(s=t-e,c=t):(s=n-a,c=n+r),[s,c]}(9,L.length,U),W=Object(j.a)(J,2),Z=W[0],V=W[1],G=function(e){"prev"===e.target.id?F(U-1):"next"===e.target.id?F(U+1):F(Number(e.target.id))},z=[],H=Z;H<V;H++)z.push(Object(s.jsx)("li",{className:"PageNumberLinks ".concat(H===U?"active":""," pagination-link"),id:H,onClick:G,children:H+1}));0!==U&&z.unshift(Object(s.jsx)("li",{className:"PageNumberLinks pagination-link",id:"prev",onClick:G,children:"Prev"})),U!==V-1&&z.push(Object(s.jsx)("li",{className:"PageNumberLinks pagination-link",id:"next",onClick:G,children:"Next"}));var Y=function(e){var t=Object(x.a)({},h);t[e.target.id]=e.target.value,p(t),F(0)},_=Object.entries(o).map((function(e){var t=e[0],n=(e=e[1]).map((function(e){return Object(s.jsx)("option",{id:e,children:e},e)}));return Object(s.jsx)("select",{id:t,onChange:Y,children:n},t)}));return[L[U],_,z]};var v=function(e,t,n,s,c,a){for(var r=e.split("#"),i=[],o=0;o<r.length;o++){var l=r[o];m(s,a,t,l);var d=A(n,l,c[t],t,s);i.push(d),i.length>1&&console.log(n,e,c[t],t,s)}return[!1,n=!i.includes(!1),a]},y=function(e){var t=Object(c.useState)(!1),n=Object(j.a)(t,2),a=n[0],r=(n[1],Object(c.useState)([])),i=Object(j.a)(r,2),o=(i[0],i[1],{all_rec_prots:function(e,t,n,c,a,r){return Object(s.jsx)(s.Fragment,{children:v(e,t,n,c,a,r)})}}),l=function(e,t,n){for(var c=0,a=[],r=0;r<e.length;r++){var i=e[r];if(0!==r)var o=a[r-1-c];else o={dna_id:""};if("null"!==i.prot_id){var l=Object(s.jsx)(h.b,{to:t+i.prot_id,children:i.prot_id});if(i.protein.includes("#")){var d=i.protein.split("#");d.map((function(e,t){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(h.b,{to:n+e,children:e}),t!==d.length-1?", ":null]})}))}else var j=Object(s.jsx)(h.b,{to:n+i.protein,children:i.protein});try{o.dna_id,i.dna_id}catch(u){console.log("HEREE BE ERROR: ",a)}o.dna_id===i.dna_id?(i.protein=Object(s.jsxs)(s.Fragment,{children:[l," (",j,")"]}),o.protein.push(Object(s.jsx)("p",{children:i.protein})),c++):(i.protein=[Object(s.jsxs)(s.Fragment,{children:[l," (",j,")"]})],a.push(i)),console.log(i)}else i.protein="None",a.push(i)}return a}(JSON.parse(e.location.state.data),"/predictedprotein/","/knownprotein/"),d=g(l,{dna_id:{basePath:"/dna/",linkPathUseSelf:!0},class:{basePath:"/class/",linkPathUseSelf:!0}},["class","family","all_rec_prots"],[],o,["dna_id","class","family","protein","coords","all_rec_prots"]),u=Object(j.a)(d,3),b=u[0],p=u[1],O=u[2],x=[Object(s.jsx)("span",{children:"Class:"}),Object(s.jsx)("span",{children:"Family:"}),Object(s.jsx)("span",{children:"Predicted Protein:"})],m=p.map((function(e,t){return Object(s.jsxs)("div",{className:"filter-item",children:[Object(s.jsx)("div",{className:"filter-element",children:x[t]}),Object(s.jsx)("div",{className:"filter-element",children:e})]})}));return Object(s.jsx)("section",{className:"query-results-page",children:Object(s.jsx)("div",{className:"box queryResults",children:a?Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:" Querying"}),Object(s.jsx)("p",{children:"Your query is in progress. Please do not refresh..."})]}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h1",{children:"Query Results"}),Object(s.jsxs)("div",{className:"query-filters-box",children:[Object(s.jsx)("h3",{className:"query-filters-heading",children:"Filters"}),Object(s.jsx)("div",{className:"query-results-filters",children:m})]}),Object(s.jsxs)("table",{className:"querytable",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{className:"querytableheading",children:[Object(s.jsx)("th",{scope:"column",children:"ID"}),Object(s.jsx)("th",{scope:"column",children:"Class"}),Object(s.jsx)("th",{scope:"column",children:"Family"}),Object(s.jsx)("th",{scope:"column",children:"Predicted Proteins (Known Protein Names)"}),Object(s.jsx)("th",{scope:"column",children:"Genomic Coordinates"})]})}),Object(s.jsx)("tbody",{children:b})]}),Object(s.jsx)("div",{className:"border-top pt-3",children:Object(s.jsx)("small",{className:"text-muted",children:Object(s.jsx)(h.b,{to:"/query",children:Object(s.jsx)("small",{children:"Search Again"})})})}),Object(s.jsx)("div",{className:"page-numbers-container",children:O})]})})})};function w(e,t,n,c,a,r,i,o){for(var l=e.split(t),d=l.map((function(e,t){return t+1!==l.length?Object(s.jsxs)(h.b,{to:n+e,children:[e,","]}):Object(s.jsx)(h.b,{to:n+e,children:e})})),j=[],u=0;u<l.length;u++){var b=l[u];m(r,o,c,b),j[u]=A(a,b,i[c],c,r)}return a=!j.includes(!1),[Object(s.jsx)("td",{children:d}),a,o]}var S=function(e){var t=JSON.parse(e.location.state.data);console.log(t);var n=Object(c.useState)(!1),a=Object(j.a)(n,2),r=(a[0],a[1],e.match.params.query,{protein:function(e,t,n,c,a,r){return Object(s.jsx)(s.Fragment,{children:w(e,"#","/knownprotein/",t,n,c,a,r)})}}),i=g(t,{prot_id:{basePath:"/predictedprotein/",linkPathUseSelf:!0},dna_id:{basePath:"/dna/",linkPathUseSelf:!0},family:{basePath:"/family/",linkPathUseSelf:!0},class:{basePath:"/class/",linkPathUseSelf:!0}},["class","family","protein"],[],r,["prot_id","class","family","protein","dna_id","coords"]),o=Object(j.a)(i,3),l=o[0],d=o[1],u=o[2],b=[Object(s.jsx)("span",{children:"Class:"}),Object(s.jsx)("span",{children:"Family:"}),Object(s.jsx)("span",{children:"Predicted Protein:"})],p=d.map((function(e,t){return Object(s.jsxs)("div",{className:"filter-item",children:[Object(s.jsx)("div",{className:"filter-element",children:b[t]}),Object(s.jsx)("div",{className:"filter-element",children:e})]})})),O=Object(s.jsx)("section",{className:"prot-query-results-page",children:Object(s.jsxs)("div",{className:"box queryResults",children:[Object(s.jsx)("h1",{children:"Query Results"}),Object(s.jsxs)("div",{className:"query-filters-box",children:[Object(s.jsx)("h3",{className:"query-filters-heading",children:"Filters"}),Object(s.jsx)("div",{className:"query-results-filters",children:p})]}),Object(s.jsxs)("table",{className:"querytable",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{className:"querytableheading",children:[Object(s.jsx)("th",{scope:"column",children:"ID"}),Object(s.jsx)("th",{scope:"column",children:"Class"}),Object(s.jsx)("th",{scope:"column",children:"Family"}),Object(s.jsx)("th",{scope:"column",children:"Protein (predicted)"}),Object(s.jsx)("th",{scope:"column",children:"DNA Record ID"}),Object(s.jsx)("th",{scope:"column",children:"DNA Record Coordinates"})]})}),Object(s.jsx)("tbody",{children:l})]}),Object(s.jsx)("div",{className:"border-top pt-3",children:Object(s.jsx)("small",{className:"text-muted",children:Object(s.jsx)(h.b,{to:"/query",children:Object(s.jsx)("small",{children:"Search Again"})})})}),Object(s.jsx)("div",{className:"page-numbers-container",children:u})]})});return Object(s.jsx)(s.Fragment,{children:O})},N=n(206),k=n(14),q=function(e,t){var n=Object(c.useState)(t),s=Object(j.a)(n,2),a=s[0],r=s[1];return Object(c.useEffect)((function(){var t=function(t){null===e.current||e.current.contains(t.target)||r(!a)};return a&&window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}),[a,e]),[a,r]},D="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAQAAACR313BAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQflARsNMTo4rJTsAAABLUlEQVQY063QsUpCARjF8fN912uTgxFlBBUNLjpKLj1AEkRP0BtUo0tjIBYNQmsP0d4SNEhICBYXlcgsrQRBr95M7/WeBkWamjrr/zcd4M9JQ8g3FWz4AYmzgTAsMVjXIOI+RMqYkzV+axVRH7LOB1G+aBSuPxJQbkTZW4HBesSIjV3xWDU6Y1kNhJYeTQWVaF/btcxiBvdGH3dGCgfhbsl+gpkEXO2jvOU6tpWLnKMY3MfxfKfgsbZHULErbW2imHAd27pYvsTJQqfgsZIawDPSAgrRMl9RTLiDXikbs/MeK9sOeiZBweEMlDaHbZejQTXlwDYJypkAM9CClfxqPu8Mp/FUpt9MwIdBuQrltasEJSu/zpuAhlLflaBkpnFmjpAD5BYWTH5KmviH/QAc2Znp9j39lgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMS0yN1QxMzo0OTowMSswMDowMC/tNJwAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDEtMjdUMTM6NDk6MDErMDA6MDBesIwgAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",T=function(e){var t=Object(c.useRef)(null),n=q(t,!1),a=Object(j.a)(n,2),r=a[0],i=a[1],o=e.options.map((function(e){return Object(s.jsx)("li",{children:e.route?Object(s.jsx)(h.b,{to:e.route,children:e.title}):Object(s.jsx)("span",{onClick:e.function,children:e.title})})}));return Object(s.jsxs)("div",{className:"menu-container ".concat(e.classes),children:[Object(s.jsx)("button",{ref:t,onClick:function(){return i(!r)},className:"menu-trigger",children:Object(s.jsx)("span",{className:"flex-centered",children:e.heading})}),Object(s.jsx)("nav",{className:"menu ".concat(r?"active":"inactive"),children:Object(s.jsx)("ul",{children:o})})]})},R="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAXCAYAAADgKtSgAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAAB3RJTUUH5QEcFTI6nGMNXgAABd5JREFUSMd1VEuoXWcZXd+/H+d1k9zcpGpt04akUktTMIiT1qpgQOogE6WIKAYHTlonxgqpjqQVB4KCFQk68QUO2ga1gdhY0lYDbWwexiT33uTmJvfe89rntfc+Z5+9978f/3JwH0mrfpP/44NvfYv1L5bgrup7ffGaK+isrnH/owdk1z27pT6zjUqJKkownsas1CviKEvI0pR5gWkUIQ1DNnbsENo25nbNER+sN06eEpJCEoPeQEjKcDBSw8FIhoMRhoORkHQDP5TADxEGofgj35qmkQQjX0iCpLz9tzdkE3OrWVq8LgAoIpLpDHsf2odqtYoLZ/8pBx//5KdI+ZIx5mM0vGHIV3ort96bX13j+XPncOz5Y1y8No9qtUoAsnf/vjvsXzz6HDZZkxSv46m8yB2SyPLiO1mW6Uk0bQb++FwUxc0syzOts6MAJMsLu9/rW3fv/+i733u/LK21lsxfmce7Z98RneUVQyJNsyNJqul5/Z//+IWffIgk3j7z9w/HSfJSlhfM8+IISeRFUXnvnfOyeO062q2OvA/4xaPPbendbrZtkjZJZFlxdjQKzrx15h8zF85fhtba7bQ8tFc7M+Nx9Fac6LN45jGM49ge9Ab2XcwFANSW+CIEACVQrdZaEY7H+0nuU6JOfOZzT0SPPPpw9ebNVVOpVSr37vlIpLU+YUy5r/jZpYdqyinKslCbOOS65AofKMuy4FguFMQVgWvbVrExz73VW2bnzh0FANTqtcJxLNf3fbfVbsMYs4Xxf8HX2QtEIBCIKNk4qlBrNO52mABKSCNkCeCOQUTkf4OXxmDQ60FrPQWRKMvatjHngYMHAcBsAOwgGSdxGjXXOiiK8r9JjkYBLNvGvesLMvC88uOPHbB27d69AsFtJXKo0+rWHctCWZYWAHqd/gyIQ2VZrjywd8/Kpz/7uB2MfCMblG3bxmQyBdqtDkjKwvx1ISnHf/qSxHFSSVONJEmfTVPNLMufjqcJXj95GiTh++FXoyjmcOh/ezj0EQRh5Xe//o2QlJtLt4Wk9HuDdfH/9PKrWLpxU5prTSEpvh86JF2SmEymr+R5YVKtj3Q63p7JZPrNOE4Z+OMTG9ZzoyhyitKI1/FkbaUpp0+eAklInhFBOBLXdTc/S6VpUjiO05idnbV1pl+g4bccxzGGrNAYTcAyRXmclv39PE1KY8pppVKxRcSIsphnGbZvn6GkqZY8z5GmqczNzSmlpAjH0SOOYz8D4uuiZNs4HP+wXqueqVRrn+i025dmd84eqtVqPyhKM6Yxv3Vc+5cV153PssxK4sQ4FZeO7UBIyqA/kFqjjka9buI4/bKI/KIoS8Oy/Mt4PH5t5ebyqcbMTHb/3gdkZtt2lmVZcV3nsCnNF0XJU0oJcp0/W6tXXy6KQkWTCLM7Z4kgCJXOcpsk4iQ9nCQ6DYPxn1dWVj96a/k2Wq2OKkvjaJ25gR9Wh8OR2/MGjimNSuIUOs325FnxWl4UOk31YZIojbHH44lCGI4trTW0zu7TOlsdT6K/fuNrR6okle+HtXarU7mxuKRGXgcAJJn4GPSHKvCD6nDo10jK4tWFWqr16bwoVo3hfWVpEEVTCyQtktBaf0XrLGs1u19YnF/CaBQ0rvx7QZrdgYRRKlGcis4N4mksJOXVP/xRLl+8LNNp3Gi1PYxGwVNxkuRZnj+dpCmm0/gOeJKkz8dxunz69Td3k7Q63f5Wym2+vz/+q6301GkqADAcBjZJtby0ds8kim4lSXJs4A8RTiYWLl64pAbhBN1O98FOx3sSgASDoVy9sqBICgC5vby6eQAk0VprC7Buhiv/uqoWrl0VANLtek/2vN6DXq+Hi+cvKRmHoWykjgzHMTZ7EDA0dB1X5nbvIgA0XLWVfkN/LHlRcCvZNvbqjtrqVb/bw5FDn5c8y2Vu+4x698ybMh2NMGi3MGy30Vm5Db/XQ8NdzzilFKJpCq/ZhN/twve6iPwhFi5clJm6q+IkkSfuf1jarTb+A66HPTqEAmlmAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIxLTAxLTI4VDIxOjUwOjQzKzAwOjAwk3Qo7wAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMS0wMS0yOFQyMTo1MDo0MyswMDowMOIpkFMAAAAASUVORK5CYII=",M=function(e){var t=Object(k.e)(),n=function(e){e.preventDefault();var n=e.target.search_input.value;(function(){var e=Object(d.a)(l.a.mark((function e(){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/nav-searchbar-dyn/",{params:{search:n}});case 2:s=e.sent,p(!1),t.push({pathname:"/searchresults/"+n,state:JSON.stringify(s.data.body)});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()};function a(){return(a=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.signOut();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("error signing out: ",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}var r=Object(c.useRef)(null),i=q(r,!1),o=Object(j.a)(i,2),u=o[0],p=o[1],O=Object(c.useRef)(null),x=q(O,!1),m=Object(j.a)(x,2),f=m[0],A=m[1],g=[{title:"Query",route:"/query"},{title:"Tissue Expression Atlas",route:"/tissueexpression"}],v=[{title:"Sign In / Register",route:{pathname:"/signin",state:{from:window.location.pathname}}}],y=[{title:"Account",route:"/account"},{title:"Sign Out",function:function(){return a.apply(this,arguments)}}];return Object(s.jsxs)("nav",{className:"navbar",children:[Object(s.jsxs)("span",{id:"mobile-nav-icons",children:[Object(s.jsx)("img",{className:"mobile-nav-icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAQAAABu4E3oAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQflAgEUFRfnaHzrAAABMElEQVQ4y+XTvUpcQRiH8WdmjoVg5yXYik1uIteQKmARgiJoQEjSLIGkiZIm3XZi5QV4CXZeg43YSthK3JknxZmzGfHomtp/debj975zvqCJQQyuiNvqjrjSzzGeBry3z8dnUQM+qMViVj89iRqwq2aLqnP18z90MAr21XkFA5qIXd3zCBzWTW3u1R8PUAO+joABHYudUQyIwU6cPAEG9FtMxr5LJ36vCz6Dpj3CTvy5BAzoRIyIRy8AAzo14lS9M7+A9Og8OGON/8ltcIsNZmzyq5kui6tAqDORL5yxzjUGk/hmyZHm6rv+hXZEEpm0qB+5ZI9VJPKHb7ylEGtHSJQuZAHy8LkBN1yQKCTmXNUyw1oOJY7cYF8tkYBYx026sV8HyPURlDpuMtZlSV45+Qsw3+1isNhBfwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMi0wMVQyMDoyMTowOSswMDowMAIwxtMAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDItMDFUMjA6MjE6MDkrMDA6MDBzbX5vAAAAAElFTkSuQmCC",onClick:function(){t.push("/")}}),Object(s.jsx)("span",{className:"mobile-tool-menu-container",children:Object(s.jsx)(T,{options:g,heading:Object(s.jsx)("img",{className:"mobile-nav-icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAQAAABu4E3oAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQflAgEUEyF+iE70AAABiklEQVQ4y5XUPWtUQRjF8TP35kaC+gEUthIbxUKxMWARQ2IhxNJPIPZ2dgEbv0WKoIUgFlotgiAIgoWN2mkjilhIULJ52ZefxW4kaO4aD8wUw/w58/CcZ6KoxUN8s64jKlHSLkUlLngHPjsjqulIo1LEEWvglfIvl6jUGnFK3wgLotZKVLmdToapkqxkJv0k55KUtPvo+WpJzPuJXdwRjdL6OGvo6foOBni8h7RAOj5iZGDXwAisiEZaIHHaS3saGWHLcjtUVJGSizmbJpdzI02GqbOd6+mmST8lKf50qcf9Vollm+hPdRo3Tm1GY1Zc0fsNLU2paXw8uXBYKPuhxYMh8R/QrEajPiB9LdBVUSvjvfztlESa9LOYJ5nLMHV28iifspmneZP6MDUNJ5mA1ZaE74OWDcCW516DW5kKzYr72HJJHPcM79uHoihmxD28EHPiGrarNqRIUpJsJDmaY9lJMp/kR9o1HmfnDdC14K4vWJ+OjD+sVYwm660TmSZlku+bPhjY8MBJ+QXsWdIIjLFwkwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMi0wMVQyMDoxODo0NCswMDowMIJa5CIAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDItMDFUMjA6MTg6NDQrMDA6MDDzB1yeAAAAAElFTkSuQmCC",onClick:function(){return A(!f)}}),classes:"mobile-dropdown"})}),Object(s.jsx)("img",{className:"mobile-nav-icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAQAAADYBBcfAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQflAgITCDnTKKRTAAAChklEQVQ4y42Vz6sVZRjHP887P86pLobIdRFIXcswrq20aNO6jcuEIgha+SdIl3sXoXuR9m7Sf0BdSODChaabQuraSlDQMgvyKhb3nNN8Wsw7c+aeSnph4Hlnvp/neZnn+8yEEHQrCMAcg4hEvgZCCDsRJKQhqEg0TJEg0fTaHWjZYwUzxrzBOxxiF0+4zTfcYULBXxmLtkqXJgzDQlzxjI/VxnY987T7xTJrMBbBQjzid+ofbnrRc17yext108M9isOSJgvxgN+qDzzlQZMhHvQLH6mbvprRhYpJHHla/dmPxdLK2soQj/lYPSfWOd0ctRDf9ol6UnzRsYXJwtqx4Zp613fF0b+Bn6k/uCqO7F5XWIqv+KtTT4jjnWBCKlaBe9ymYta2GoEG2OI6Ja/l3WAlILEL2Mr+GDiFRMNvwFLvpR1gwxawG2iIHgugIbEMPIWcagAGU34E9nGIGUWWRM7/Mu/RcHexXlsRrvOUVY4BQUHku4ngU5a5z9Xe+tgHyXDsGfWhH+ZWtz3Do26rZ4d9bJ+0lmt9ekv93c/d65Iv+JLLnnBbfeBbYmHqbRciYRAkZhzmPG8S/MINHrHM++yh4SEl17jMWYA8J/nE82aveN6f3M6zMfO+X3nAC+qfboi15dwe0U9nSTDhCB+wjyWecY8r3ASO8yUAJzlFRcMs6wfnLq07W9meZWSycsOpUyeuW1h1VVtBhyZrx9bWjhxbm0wWVq47yWhp1U5nlzvmU57b0cWtdI7W7XOYowxgBrvSysJ1J86cuma1MNIsVo8BWhtuOHVb/Ugs+K+1I0mL4pr6ta+LCf4fGpYmx37iilgYwXNRui965KjJw89zwX+gzH8RfwNjrjgNDvf9eAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMi0wMlQxOTowMjoxMCswMDowMDplGp0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDItMDJUMTk6MDI6MTArMDA6MDBLOKIhAAAAAElFTkSuQmCC",onClick:function(){return p(!u)}})]}),u?Object(s.jsx)("div",{className:"mobile-search-bar-container",ref:r,children:Object(s.jsx)("form",{className:"mobile-search-bar-form",onSubmit:n,children:Object(s.jsx)("input",{className:"mobile-search-bar",id:"search_input",type:"text",name:"search_input",placeholder:"Search Retrobase..."})})}):null,Object(s.jsxs)("span",{id:"desktop-nav",children:[Object(s.jsx)(h.b,{className:"inline menu-button RetrobaseLogo",to:"/",children:" Retrobase"}),Object(s.jsxs)("div",{className:"search-bar-tool-menu",children:[Object(s.jsx)("form",{className:"inline searchBarForm",onSubmit:n,children:Object(s.jsx)("input",{className:"searchBar",id:"search_input",type:"text",name:"search_input",placeholder:"Search Retrobase..."})}),Object(s.jsx)("span",{className:"tool-menu",children:Object(s.jsx)(T,{options:g,heading:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("span",{children:"Tools"}),Object(s.jsx)("img",{src:D})]}),classes:"menu-container-left-align"})})]})]}),Object(s.jsx)("span",{className:"logout logout-mobile",children:Object(s.jsx)(T,{options:e.user?y:v,heading:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("img",{src:R}),Object(s.jsx)("img",{src:D})]}),classes:"menu-container-right-align"})}),Object(s.jsx)("span",{className:"logout logout-desktop",children:Object(s.jsx)(T,{options:e.user?y:v,heading:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("img",{src:R}),Object(s.jsx)("img",{src:D})]}),classes:"mobile-dropdown"})})]})},C=function(e){return e.items.map((function(t){return Object(s.jsx)(h.b,{to:e.pathName+t[e.title],className:"linkNoDecoration",children:Object(s.jsxs)("div",{className:"SearchResult",children:[Object(s.jsx)("h3",{children:t[e.title]}),Object(s.jsxs)("p",{children:[t[e.title]," is ",e.entity," of the ",t.class," class of retrotransposons"]})]})})}))},I=function(e){var t=e.match.params.search,n=JSON.parse(e.location.state),c=n.classes.map((function(e){return Object(s.jsx)(h.b,{to:"/class/"+e.class,className:"linkNoDecoration",children:Object(s.jsxs)("div",{className:"SearchResult",children:[Object(s.jsx)("h3",{children:e.class}),Object(s.jsxs)("p",{children:[e.description.substr(0,200),"..."]})]})})})),a=Object(s.jsx)(C,{pathName:"/dna/",items:n.dna_ids,title:"dna_id",entity:"a DNA element"}),r=Object(s.jsx)(C,{pathName:"/family/",items:n.families,title:"family",entity:"a family"}),i=Object(s.jsx)(C,{pathName:"/knownprotein/",items:n.proteins,title:"protein",entity:"a protein"}),o=Object(s.jsx)(C,{pathName:"/predictedprotein/",items:n.prot_ids,title:"prot_id",entity:"an in silico predicted protein sequence"});return Object(s.jsx)("section",{children:Object(s.jsxs)("div",{className:"box",children:[Object(s.jsxs)("h1",{children:["Search Results for ",Object(s.jsxs)("i",{children:['"',t,'"']})]}),Object(s.jsx)("div",{style:{height:"20px"}}),Object(s.jsx)(s.Fragment,{children:c}),Object(s.jsx)(s.Fragment,{children:a}),Object(s.jsx)(s.Fragment,{children:o}),Object(s.jsx)(s.Fragment,{children:r}),Object(s.jsx)(s.Fragment,{children:i})]})})},E=n(34),B=n.n(E),P=function(e){var t=Object(c.useState)(!1),n=Object(j.a)(t,2),a=(n[0],n[1]),r=Object(c.useState)(!1),i=Object(j.a)(r,2),o=i[0],u=i[1],h=Object(c.useState)(!1),p=Object(j.a)(h,2),O=(p[0],p[1]),x=Object(c.useState)(!1),m=Object(j.a)(x,2),f=(m[0],m[1]),A=Object(c.useState)(null),g=Object(j.a)(A,2),v=g[0],y=g[1],w=Object(c.useState)("manual"),S=Object(j.a)(w,2),N=S[0],k=S[1],q=Object(c.useState)(!1),D=Object(j.a)(q,2),T=(D[0],D[1]);var R=function(e){k(e.target.value)},M=function(){var t=Object(d.a)(l.a.mark((function t(n){var s,c,r,i,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return T(!1),s={username:e.user.username},c={headers:{Authorization:e.user.signInUserSession.idToken.jwtToken},params:s},t.prev=3,a(!0),t.next=7,b.a.get("https://kvuhomev06.execute-api.us-east-1.amazonaws.com/dev/get-s3-presigned-url",c);case 7:return r=t.sent,console.log("Collected presigned url"),i=r.data.url,Object.defineProperty(v,"name",{writable:!0,value:r.data.key}),console.log(i,"sending file"),t.next=14,b.a.put(i,v);case 14:o=t.sent,console.info(o),a(!1),O(!0),t.next=25;break;case 20:t.prev=20,t.t0=t.catch(3),a(!1),T(!0),f("Authorization to upload data not granted");case 25:case"end":return t.stop()}}),t,null,[[3,20]])})));return function(e){return t.apply(this,arguments)}}(),C="manual"===N?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Enter Query"}),Object(s.jsx)("td",{children:Object(s.jsx)("textarea",{type:"text",id:"query",name:"query"})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Protein or DNA"}),Object(s.jsx)("td",{children:Object(s.jsxs)("select",{id:"sequenceType",name:"sequenceType",children:[Object(s.jsx)("option",{children:"DNA Records"}),Object(s.jsx)("option",{children:"Protein Records"})]})})]})]}):Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:"Upload MZID file:"}),Object(s.jsx)("td",{children:Object(s.jsx)("input",{type:"file",id:"uploadFile",name:"uploadFile",value:null,onChange:function(e){y(e.target.files[0])}})})]}),I=Object(s.jsxs)("section",{className:"queryLoading",children:[Object(s.jsxs)("div",{className:"box",children:[Object(s.jsx)("h3",{children:" Querying"}),Object(s.jsx)("p",{children:"Your query is in progress. Please do not refresh..."})]}),Object(s.jsx)(B.a,{})]}),E=Object(s.jsx)("section",{className:"queryForm",children:Object(s.jsx)("div",{className:"box queryForm",children:Object(s.jsxs)("div",{className:"container",children:[Object(s.jsxs)("div",{className:"smallertext",children:[Object(s.jsx)("h1",{children:"Query sequences against the Retrobase database"}),Object(s.jsx)("form",{onSubmit:function(t){"manual"===N?function(t){t.preventDefault(),u(!0),"Protein Records"===t.target.sequenceType.value?function(){var n=Object(d.a)(l.a.mark((function n(){var s;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.a.get("https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/proteinsearchresults/",{params:{query:t.target.query.value}});case 2:s=n.sent,u(!1),console.log(s),JSON.stringify(s),e.history.push({pathname:"/proteinquery/"+t.target.query.value,state:{data:JSON.stringify(s.data.body)}});case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()():function(){var n=Object(d.a)(l.a.mark((function n(){var s;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u(!0),n.next=3,b.a.get("https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/dnasearchresults/",{params:{query:t.target.query.value}});case 3:200===(s=n.sent).data.statusCode&&(u(!1),e.history.push({pathname:"/dnaquery/"+t.target.query.value,state:{data:JSON.stringify(s.data.body)}}));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}(t):"file"===N&&M(t)},children:Object(s.jsx)("table",{class:"queryFormTable",children:Object(s.jsxs)("tbody",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Input Type: "}),Object(s.jsxs)("td",{children:[Object(s.jsxs)("span",{className:"nowrap",style:{paddingRight:"4rem"},children:[Object(s.jsx)("label",{for:"manual",children:"Manually enter sequence: "}),Object(s.jsx)("input",{type:"radio",value:"manual",name:"inputType",checked:"manual"===N,onChange:R})]}),Object(s.jsxs)("span",{className:"nowrap",children:[Object(s.jsx)("label",{for:"file",children:"MZID File: "}),Object(s.jsx)("input",{type:"radio",value:"file",name:"inputType",checked:"file"===N,disabled:!0,onChange:R})]})]})]}),C,Object(s.jsx)("tr",{children:Object(s.jsx)("button",{children:"Submit"})})]})})})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"About Query"}),Object(s.jsx)("p",{children:"The Retrobase Query tool performs exact matching of query sequences to sequences in the database. Currently BLAST algorithms are not available."}),Object(s.jsx)("p",{children:"Note: The protein query option is currently connected to a working API that calls a lambda function to queries a relational database in AWS RDS. However, to save costs, the DB is not kept running."})]})]})})});return Object(s.jsx)(s.Fragment,{children:o?I:E})},Q=function(e){var t=Object(c.useState)(""),n=Object(j.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(""),o=Object(j.a)(i,2),u=o[0],p=o[1],O=Object(c.useState)(""),x=Object(j.a)(O,2),m=x[0],f=x[1],A=Object(c.useState)(""),g=Object(j.a)(A,2),v=g[0],y=g[1];Object(c.useEffect)((function(){(function(){var t=Object(d.a)(l.a.mark((function t(){var n,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.match.params.class,t.next=3,b.a.get("https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/classdata/",{params:{class:n}});case 3:s=t.sent,r(s.data.body.class),p(s.data.body.proteins),f(s.data.body.families),y(s.data.body.description);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var w=u.split("#").map((function(e){return Object(s.jsx)("li",{children:Object(s.jsx)(h.b,{to:"/knownprotein/"+e,children:e})})})),S=m.split("#").map((function(e){return Object(s.jsx)("li",{children:Object(s.jsx)(h.b,{to:"/family/"+e,children:e})})})),N=v.split("\n").map((function(e){return Object(s.jsx)("p",{children:e})}));return Object(s.jsx)("section",{className:"classDetail",children:Object(s.jsxs)("div",{className:"box",children:[Object(s.jsxs)("h1",{children:[" Class: ",a]}),Object(s.jsx)("h2",{children:"Description"}),Object(s.jsx)("div",{children:N}),Object(s.jsx)("h2",{children:"Proteins Encoded By This Class:"}),Object(s.jsx)("ul",{children:Object(s.jsx)("li",{children:w})}),Object(s.jsx)("h2",{children:"Families"}),Object(s.jsx)("ul",{className:"familyList",children:Object(s.jsx)("li",{children:S})})]})})},U=function(e){var t=Object(c.useState)(e.match.params.family_id),n=Object(j.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(""),o=Object(j.a)(i,2),l=o[0],d=o[1],u=Object(c.useState)([]),p=Object(j.a)(u,2),O=p[0],x=p[1];Object(c.useEffect)((function(){b.a.get("https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/rtfamilydata/",{params:{family:a}}).then((function(t){console.log(e),r(t.data.body[0].family),d(t.data.body[0].class),x(t.data.body),console.log(t.data.body[0])}))}),[]);var m=O.map((function(e,t){return Object(s.jsx)(s.Fragment,{children:0!==t?Object(s.jsxs)(h.b,{to:"/dna/"+e.dna_id,children:[", ",e.dna_id]}):Object(s.jsx)(h.b,{to:"/dna/"+e.dna_id,children:e.dna_id})})}));return Object(s.jsx)("section",{children:Object(s.jsxs)("div",{className:"box",children:[Object(s.jsx)("h1",{children:a}),Object(s.jsx)("table",{className:"infotable",children:Object(s.jsxs)("tbody",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Class: "}),Object(s.jsx)("td",{children:Object(s.jsx)(h.b,{to:"/rtclass/"+l,children:l})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"DNA Sequences: "}),Object(s.jsx)("td",{children:m})]})]})})]})})},F=function(e){var t=Object(c.useState)(e.match.params.knownprotein),n=Object(j.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)([]),o=Object(j.a)(i,2),l=o[0],d=o[1],u=Object(c.useState)([]),p=Object(j.a)(u,2),O=p[0],x=p[1],m=Object(c.useState)([]),f=Object(j.a)(m,2),A=f[0],g=f[1],v=Object(c.useState)([]),y=Object(j.a)(v,2),w=y[0],S=y[1];Object(c.useEffect)((function(){b.a.get("https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/proteinnamedata/",{params:{protein:a}}).then((function(e){console.log(e.data.body),r(e.data.body.protein),d(e.data.body.function),x(e.data.body.class),g(e.data.body.sequence),S(e.data.body.accession)}))}),[]);var N=Object(s.jsxs)("p",{children:[" ",l]});return Object(s.jsx)("section",{children:Object(s.jsxs)("div",{className:"box",children:[Object(s.jsxs)("h1",{children:["Protein Name: ",a]}),Object(s.jsxs)("p",{children:["All information presented on this page is acquired from the ",Object(s.jsxs)("a",{href:"https://www.uniprot.org/uniprot/"+w,children:["Uniprot record, ",w]}),". Click through for much more information on this protein."]}),Object(s.jsx)("h2",{children:"Function"}),Object(s.jsx)("div",{children:N}),Object(s.jsx)("h2",{children:"Sequence"}),Object(s.jsxs)("p",{children:["The following sequence was used for predicting which ",Object(s.jsx)("i",{children:"in silico"}),"-translated transcripts from the retrotransposon family, ",Object(s.jsx)(h.b,{to:/class/+O[0],children:O[1]}),", are ",a," sequences: "]}),Object(s.jsx)("p",{class:"wrapped nokern",children:A})]})})},L=function(e){var t=Object(c.useState)([]),n=Object(j.a)(t,2),a=(n[0],n[1],Object(c.useState)([])),r=Object(j.a)(a,2),i=r[0],o=r[1],l=Object(c.useState)([]),d=Object(j.a)(l,2),u=d[0],p=d[1],O=Object(c.useState)([]),x=Object(j.a)(O,2),m=x[0],f=x[1],A=Object(c.useState)([]),g=Object(j.a)(A,2),v=g[0],y=g[1],w=Object(c.useState)([]),S=Object(j.a)(w,2),N=S[0],k=S[1],q=Object(c.useState)([]),D=Object(j.a)(q,2),T=D[0],R=D[1],M=Object(c.useState)([]),C=Object(j.a)(M,2),I=C[0],E=C[1];Object(c.useEffect)((function(){var t=e.match.params.protein_id;b.a.get("https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/proteinrecorddata/",{params:{prot_id:t}}).then((function(e){console.log(e.data),console.log(e.data),o(e.data.body.prot_id),p(e.data.body.dna_id),f(e.data.body.coords),y(e.data.body.family),k(e.data.body.class),R(e.data.body.prot_seq),E(e.data.body.known_prot)}))}),[]);var B=I.map((function(e,t){var n=Object(s.jsx)(h.b,{to:"/knownprotein/"+e.protein,children:Object(s.jsx)("span",{children:e.protein})});return 0!==t?Object(s.jsxs)("span",{children:[", ",n]}):Object(s.jsx)("span",{children:n})})),P=I.map((function(e){return Object(s.jsxs)("div",{children:[Object(s.jsxs)("h2",{children:[" ",e.protein]}),Object(s.jsx)("h3",{children:" Function "}),Object(s.jsxs)("p",{children:[Object(s.jsx)("i",{children:"Information taken from Uniprot"})," ",Object(s.jsxs)("a",{href:"https://www.uniprot.org/"+e.accession,children:["(",e.accession,")"]})]}),Object(s.jsx)("p",{children:e.function}),Object(s.jsx)("h3",{children:"Reference Sequence"}),Object(s.jsx)("p",{class:"wrapped nokern",children:e.sequence})]})}));return Object(s.jsx)("section",{children:Object(s.jsxs)("div",{className:"box",children:[Object(s.jsxs)("h1",{class:"msaIdCatcher",children:["Protein Record: ",i]}),Object(s.jsx)("table",{class:"infotable",children:Object(s.jsxs)("tbody",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{scope:"row",children:"Proteins Predicted:"}),Object(s.jsx)("td",{children:B})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{scope:"row",children:"Retrotransposon Class: "}),Object(s.jsx)("td",{children:Object(s.jsx)(h.b,{to:"/class/"+N,children:N})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{scope:"row",children:"Family:"}),Object(s.jsx)("td",{children:Object(s.jsx)(h.b,{to:"/family/"+v,children:v})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{scope:"row",children:"Translated From DNA Record:"}),Object(s.jsx)("td",{children:Object(s.jsx)(h.b,{to:"/dna/"+u,children:u})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{scope:"row",children:"DNA Record Coordinates:"}),Object(s.jsx)("td",{children:m})]})]})}),Object(s.jsx)("h2",{children:"Sequence"}),Object(s.jsx)("p",{class:"wrapped nokern",children:T}),Object(s.jsx)("h1",{children:"Predicted Proteins"}),Object(s.jsx)("p",{children:"Note: protein prediction was done using psi-blast. This detects distantly related sequences and can potentially detect sequencs related to adjacent sequences. Discretion is advised."}),Object(s.jsx)("div",{children:P})]})})},J=function(e){var t=Object(c.useState)(e.match.params.dna_id),n=Object(j.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(),o=Object(j.a)(i,2),l=o[0],d=o[1],u=Object(c.useState)([]),p=Object(j.a)(u,2),O=p[0],x=p[1],m=Object(c.useState)([]),f=Object(j.a)(m,2),A=f[0],g=f[1],v=Object(c.useState)([]),y=Object(j.a)(v,2),w=y[0],S=y[1];Object(c.useEffect)((function(){b.a.get("https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/dnarecorddata/",{params:{dna_id:a}}).then((function(e){console.log(e.data),r(e.data.body.dna_id),d(e.data.body.family),x(e.data.body.class),g(e.data.body.dna_seq),S(e.data.body.protein_data)}))}),[]);var N=w&&0===Object.keys(w).length&&"object"===typeof w?Object(s.jsx)("span",{children:"No Proteins Predicted"}):w.map((function(e,t){if(e.protein.includes("#"))var n=e.split("#"),c=n.map((function(e,t){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(h.b,{to:"/knownprotein/"+e,children:e}),t!==n.length-1?", ":null]})}));else c=Object(s.jsx)(h.b,{to:"/knownprotein/"+e.protein,children:e.protein});return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(h.b,{children:e.prot_id})," (",c,")",t!==w.length-1?", ":null]})}));return console.log(N),Object(s.jsx)("section",{children:Object(s.jsxs)("div",{className:"box",children:[Object(s.jsxs)("h1",{children:["DNA Repeat Record: ",a]}),Object(s.jsx)("table",{class:"infotable",children:Object(s.jsxs)("tbody",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{scope:"row",children:"Retrotransposon Class: "}),Object(s.jsx)("td",{children:Object(s.jsx)(h.b,{to:"/class/"+O,children:O})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{scope:"row",children:"Family:"}),Object(s.jsx)("td",{children:Object(s.jsx)(h.b,{to:"/family/"+l,children:l})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{scope:"row",children:"Protein Sequences Predicted:"}),Object(s.jsx)("td",{children:N})]})]})}),Object(s.jsx)("h2",{children:"DNA sequence"}),Object(s.jsx)("p",{class:"wrapped nokern",children:A})]})})},W=n(202),Z=n.n(W),V=function(e){var t=Object(c.useState)(null),n=Object(j.a)(t,2),a=(n[0],n[1]),r=Object(c.useState)(null),i=Object(j.a)(r,2),o=i[0],u=i[1];Object(c.useEffect)((function(){(function(){var t=Object(d.a)(l.a.mark((function t(){var n,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={tissue:e.tissueSelected},t.next=3,b.a.get("https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/tegraphs",n);case 3:s=t.sent,a(s.data.tissue),u(s.data.counts);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.tissueSelected]);var h=Object(c.useRef)(null),p=Object(c.useState)(null),O=Object(j.a)(p,2),x=(O[0],O[1]);return Object(c.useEffect)((function(){if(o){var e=Object.keys(o)[0],t={responsive:!0,maintainAspectRatio:!1,type:"bar",data:{labels:Object.keys(o[e]),datasets:[{label:"#Detections",data:Object.values(o[e]),borderWidth:1,backgroundColor:"#2e70b3"}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0,precision:0}}]}}};if(h&&h.current){var n=new Z.a(h.current,t);x(n)}}}),[o]),Object(s.jsx)("canvas",{ref:h,className:"GraphBox"})},G=function(e){var t=Object(c.useState)(null),n=Object(j.a)(t,2),a=n[0],r=n[1];function i(){return(i=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.signOut();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("error signing out: ",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}var o=e.user?Object(s.jsxs)("div",{style:{"padding-top":"2rem"},children:[Object(s.jsx)(h.b,{to:"/tissueexpressionupload",children:"Upload New Data"}),Object(s.jsx)("div",{children:Object(s.jsx)("span",{class:"PageNumberLinks",style:{"padding-left":0},onClick:function(){return i.apply(this,arguments)},children:"Sign out"})})]}):Object(s.jsxs)("div",{style:{"padding-top":"2rem"},children:[Object(s.jsx)("span",{children:" Click here to sign in and upload your own data... "}),Object(s.jsx)(h.b,{to:{pathname:"/signin",state:{from:"/tissueexpression"}},children:" Sign in / Register"})]});return Object(s.jsx)("section",{children:Object(s.jsxs)("div",{className:"box",children:[Object(s.jsxs)("div",{style:{color:"green",border:"green solid 2px",padding:"1rem",margin:"10px 0"},children:[Object(s.jsx)("p",{children:"Tissue Expression Atlas is under development."}),Object(s.jsx)("p",{children:"This page is connected to a mock API"})]}),Object(s.jsx)("h1",{children:"Tissue Expression Atlas"}),Object(s.jsxs)("div",{className:"TissueGraphsSection",children:[Object(s.jsxs)("div",{className:"TissueList",children:[Object(s.jsx)("h3",{children:"Select Tissue"}),Object(s.jsxs)("table",{onClick:function(e){r(e.target.innerHTML)},children:[Object(s.jsx)("tr",{children:"Lung"}),Object(s.jsx)("tr",{children:"Heart"})]})]}),Object(s.jsx)("div",{className:"GraphContainer",children:Object(s.jsx)(V,{tissueSelected:a})})]}),Object(s.jsx)("div",{children:o})]})})},z=n(43),H=n.n(z),Y=function(e){var t=Object(c.useState)(!1),n=Object(j.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(!1),o=Object(j.a)(i,2),u=o[0],p=o[1],O=Object(c.useState)(null),x=Object(j.a)(O,2),m=x[0],f=x[1],A=Object(c.useState)(null),g=Object(j.a)(A,2),v=g[0],y=g[1],w=Object(c.useState)("No"),S=Object(j.a)(w,2),N=S[0],k=S[1],q=Object(c.useState)("No"),D=Object(j.a)(q,2),T=D[0],R=D[1],M=Object(c.useState)(null),C=Object(j.a)(M,2),I=C[0],E=C[1],P=Object(c.useState)(null),Q=Object(j.a)(P,2),U=Q[0],F=Q[1];var L=Object(c.useState)(!1),J=Object(j.a)(L,2),W=J[0],Z=J[1],V=Object(c.useState)(""),G=Object(j.a)(V,2),z=G[0],Y=G[1],_=function(){var t=Object(d.a)(l.a.mark((function t(n){var s,c,a,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.abrupt("return");case 9:return s={headers:{Authorization:e.user.signInUserSession.idToken.jwtToken},params:undefined},t.prev=10,r(!0),t.next=14,b.a.get("https://kvuhomev06.execute-api.us-east-1.amazonaws.com/dev/get-s3-presigned-url",s);case 14:return c=t.sent,console.log("Collected presigned url"),a=c.data.url,Object.defineProperty(m,"name",{writable:!0,value:c.data.key}),console.log(a,"sending file"),t.next=21,b.a.put(a,m);case 21:i=t.sent,console.info(i),r(!1),p(!0),t.next=32;break;case 27:t.prev=27,t.t0=t.catch(10),r(!1),Z(!0),Y("Authorization to upload data not granted");case 32:case"end":return t.stop()}}),t,null,[[10,27]])})));return function(e){return t.apply(this,arguments)}}(),K=W?Object(s.jsx)("div",{style:{color:"red",border:"red solid 2px",padding:"1rem"},children:z}):null;if(u)return Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:"Success!"}),Object(s.jsxs)("p",{children:["File has been send for processing. When ready, your results will be available at ",Object(s.jsx)(h.b,{children:"My Account"})]})]});var X="Yes"===String(T)?Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:"Provide link to publication: "}),Object(s.jsx)("td",{children:Object(s.jsx)("input",{type:"text",id:"publication",name:"publication",value:I,onChange:function(e){E(e.target.value)}})})]}):null;return Object(s.jsx)("section",{children:Object(s.jsx)("div",{className:"box",children:Object(s.jsx)("div",{className:"container",children:Object(s.jsxs)("div",{className:"smallertext",children:[Object(s.jsx)("div",{style:{color:"green",border:"green solid 2px",padding:"1rem",margin:"10px 0"},children:Object(s.jsx)("p",{children:"This form is currently disconnected from the backend"})}),Object(s.jsx)("h1",{children:"Query sequences against the Retrobase database"}),K,Object(s.jsx)(H.a,{active:a,spinner:Object(s.jsx)(B.a,{}),children:Object(s.jsxs)("form",{onSubmit:_,children:[Object(s.jsx)("table",{style:{"border-collapse":"collapse"},children:Object(s.jsxs)("tbody",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:"Upload MZIdentML file:"}),Object(s.jsx)("td",{children:Object(s.jsx)("input",{type:"file",id:"uploadFile",name:"uploadFile",value:null,onChange:function(e){f(e.target.files[0])}})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:"Tissue: "}),Object(s.jsx)("td",{children:Object(s.jsx)("input",{type:"text",id:"tissueType",name:"tissueType",value:v,onChange:function(e){y(e.target.value)}})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:"Is this a cancer sample?"}),Object(s.jsx)("td",{children:Object(s.jsxs)("select",{id:"cancer",name:"cancer",value:N,onChange:function(e){k(e.target.value)},children:[Object(s.jsx)("option",{children:"Yes"}),Object(s.jsx)("option",{children:"No"})]})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:"Is this data published?"}),Object(s.jsx)("td",{children:Object(s.jsxs)("select",{id:"published",name:"published",value:T,onChange:function(e){R(e.target.value)},children:[Object(s.jsx)("option",{children:"Yes"}),Object(s.jsx)("option",{children:"No"})]})})]}),X,Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:"Research Name: "}),Object(s.jsx)("td",{children:Object(s.jsx)("input",{type:"text",id:"researcher",name:"researcher",value:U,onChange:function(e){F(e.target.value)}})})]})]})}),Object(s.jsx)("button",{children:"Submit"})]})})]})})})})},_=function(e){var t=Object(k.e)(),n=Object(c.useState)(!1),a=Object(j.a)(n,2),r=a[0],i=a[1],o=Object(c.useState)(""),u=Object(j.a)(o,2),b=u[0],p=u[1],O=Object(c.useState)(!1),x=Object(j.a)(O,2),m=x[0],f=x[1],A=Object(c.useState)(""),g=Object(j.a)(A,2),v=g[0],y=g[1],w=Object(c.useState)(""),S=Object(j.a)(w,2),q=S[0],D=S[1],T=Object(c.useState)(""),R=Object(j.a)(T,2),M=R[0],C=R[1],I="undefined"!==typeof e.location.state?e.location.state.from:"/",E=function(){var e=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),v&&q&&M){e.next=5;break}return i(!0),p("All fields must be used"),e.abrupt("return");case 5:if(e.prev=5,i(!1),q===M){e.next=13;break}return i(!0),p("Passwords do not match"),e.abrupt("return");case 13:if(!(q.length<8)){e.next=17;break}return i(!0),p("Password must be a minimum of 8 characters"),e.abrupt("return");case 17:return f(!0),e.next=20,N.a.signUp({username:v,password:q,attributes:{email:v}});case 20:t.push({pathname:"/confirmsignup",state:{username:v,from:I}}),e.next=28;break;case 23:e.prev=23,e.t0=e.catch(5),console.log("Error signing up: ",e.t0),f(!1),"UsernameExistsException"===e.t0.code&&(p(Object(s.jsxs)("div",{children:[Object(s.jsx)("p",{children:"Email already registered."}),Object(s.jsxs)("p",{children:["If you attempted to register and need to validate email ",Object(s.jsx)("span",{class:"PageNumberLinks",onClick:P,children:"click here."})]})]})),i(!0));case 28:case 29:case"end":return e.stop()}}),e,null,[[5,23]])})));return function(t){return e.apply(this,arguments)}}();function P(){return Q.apply(this,arguments)}function Q(){return(Q=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,N.a.resendSignUp(v);case 4:f(!1),t.push({pathname:"/confirmsignup",state:{username:v,from:I}}),console.log("code resent successfully"),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("error resending code: ",e.t0),f(!1),i(!1),p("Error resending code");case 15:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var U=r?Object(s.jsx)("div",{style:{color:"red",border:"red solid 2px",padding:"1rem"},children:b}):null;return Object(s.jsx)("section",{class:"sign-in-up",children:Object(s.jsxs)("div",{className:"box",children:[Object(s.jsx)("h1",{children:"Register User"}),Object(s.jsxs)(H.a,{active:m,spinner:Object(s.jsx)(B.a,{}),children:[U,Object(s.jsxs)("form",{className:"sign-in-up-form",onSubmit:E,children:[Object(s.jsxs)("table",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Email"}),Object(s.jsx)("td",{children:Object(s.jsx)("input",{className:"sign-in-up-input",type:"text",name:"username",id:"username",onChange:function(e){y(e.target.value)}})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Password"}),Object(s.jsx)("td",{children:Object(s.jsx)("input",{className:"sign-in-up-input",type:"password",name:"password",id:"password",onChange:function(e){D(e.target.value)}})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Confirm Password"}),Object(s.jsx)("td",{children:Object(s.jsx)("input",{className:"sign-in-up-input",type:"password",name:"confirm_password",id:"confirm_password",onChange:function(e){C(e.target.value)}})})]})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{children:"Submit"})})]})]}),Object(s.jsxs)("div",{style:{"padding-top":"2rem"},children:[Object(s.jsx)("span",{children:"Already have an account? "}),Object(s.jsx)(h.b,{to:{pathname:"/signin",state:{from:I}},children:"Sign In"})]})]})})},K=function(e){var t=Object(k.e)(),n=Object(c.useState)(""),a=Object(j.a)(n,2),r=(a[0],a[1],Object(c.useState)("")),i=Object(j.a)(r,2),o=i[0],u=i[1],b=Object(c.useState)(""),p=Object(j.a)(b,2),O=p[0],x=p[1],m=Object(c.useState)(!1),f=Object(j.a)(m,2),A=f[0],g=f[1],v=Object(c.useState)(!1),y=Object(j.a)(v,2),w=y[0],S=y[1],q=Object(c.useState)(""),D=Object(j.a)(q,2),T=D[0],R=D[1],M="undefined"!=typeof e.location.state?e.location.state.from:"/",C=function(){var e=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),S(!1),O&&o){e.next=6;break}return S(!0),R("Missing email or password"),e.abrupt("return");case 6:return e.prev=6,g(!0),e.next=10,N.a.signIn(o,O);case 10:g(!1),t.push(M),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(6),console.log("error signing in",e.t0),g(!1),"NotAuthorizedException"===e.t0.code?(S(!0),R("Incorrect email or password")):"UserNotConfirmedException"===e.t0.code&&(S(!0),R(Object(s.jsxs)("div",{children:[Object(s.jsx)("p",{children:"Registration attempted with this email. Email needs validating."}),Object(s.jsxs)("p",{children:["To resend confirmation code, ",Object(s.jsx)("span",{class:"PageNumberLinks",onClick:I,children:"click here"})]})]})));case 19:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}();function I(){return E.apply(this,arguments)}function E(){return(E=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,N.a.resendSignUp(o);case 4:g(!1),t.push({pathname:"/confirmsignup",state:{username:o,from:M}}),console.log("code resent successfully"),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("error resending code: ",e.t0),g(!1),S(!1),R("Error resending code");case 15:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var P=e.location.state.success?Object(s.jsx)("div",{style:{color:"green",border:"green solid 2px",padding:"1rem"},children:e.location.state.successMessage}):null,Q=w?Object(s.jsx)("div",{style:{color:"red",border:"red solid 2px",padding:"1rem"},children:T}):null;return Object(s.jsx)("section",{class:"sign-in-up",children:Object(s.jsx)("div",{className:"box",children:Object(s.jsx)("div",{children:Object(s.jsxs)(H.a,{active:A,spinner:Object(s.jsx)(B.a,{}),children:[Object(s.jsx)("h1",{children:"Sign In"}),P,Q,Object(s.jsxs)("form",{className:"sign-in-up-form",onSubmit:C,children:[Object(s.jsxs)("table",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Email"}),Object(s.jsx)("td",{children:Object(s.jsx)("input",{className:"sign-in-up-input",type:"email",name:"email",onChange:function(e){u(e.target.value)}})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Password"}),Object(s.jsx)("td",{children:Object(s.jsx)("input",{className:"sign-in-up-input",type:"password",name:"password",onChange:function(e){x(e.target.value)}})})]})]}),Object(s.jsx)("button",{children:"Submit"}),Object(s.jsx)("div",{children:Object(s.jsx)(h.b,{to:{pathname:"user-registration",state:{from:M}},children:"Register"})})]})]})})})})},X=function(e){var t=Object(k.e)(),n=Object(c.useState)(null),a=Object(j.a)(n,2),r=a[0],i=a[1],o=Object(c.useState)(!1),u=Object(j.a)(o,2),b=u[0],h=u[1],p=Object(c.useState)(!1),O=Object(j.a)(p,2),x=O[0],m=O[1],f=Object(c.useState)(""),A=Object(j.a)(f,2),g=A[0],v=A[1],y=Object(c.useState)(!1),w=Object(j.a)(y,2),S=w[0],q=w[1],D=Object(c.useState)(""),T=Object(j.a)(D,2),R=T[0],M=T[1],C=function(){var n=Object(d.a)(l.a.mark((function n(s){var c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s.preventDefault(),q(!1),m(!1),r){n.next=7;break}return q(!0),M("Please enter confirmation code sent to your email"),n.abrupt("return");case 7:if(c=/^[0-9]+$/,r.match(c)&&6===r.length){n.next=12;break}return q(!0),M("Code should be 6 digit number"),n.abrupt("return");case 12:return n.prev=12,h(!0),n.next=16,N.a.confirmSignUp(e.location.state.username,r);case 16:h(!1),t.push({pathname:"/signin",state:{from:e.location.state.from,success:!0,successMessage:"Account registered! You may now sign in."}}),n.next=24;break;case 20:n.prev=20,n.t0=n.catch(12),h(!1),"CodeMismatchException"===n.t0.code&&(q(!0),M("Incorrect code"));case 24:case"end":return n.stop()}}),n,null,[[12,20]])})));return function(e){return n.apply(this,arguments)}}();function I(){return(I=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(!0),t.next=4,N.a.resendSignUp(e.location.state.username);case 4:h(!1),m(!0),v("Confirmation code resent!"),console.log("code resent successfully"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("error resending code: ",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}var E=x?Object(s.jsx)("div",{style:{color:"green",border:"green solid 2px",padding:"1rem","margin-bottom":"1rem"},children:g}):null,P=S?Object(s.jsx)("div",{style:{color:"red",border:"red solid 2px",padding:"1rem","margin-bottom":"1rem"},children:R}):null;return Object(s.jsx)("section",{className:"sign-in-up",children:Object(s.jsx)("div",{className:"box",children:Object(s.jsxs)(H.a,{active:b,spinner:Object(s.jsx)(B.a,{}),children:[Object(s.jsx)("h3",{children:"Please enter the confirmation code sent to your email..."}),E,P,Object(s.jsxs)("form",{className:"sign-in-up-form",onSubmit:C,children:[Object(s.jsx)("label",{for:"confirmation",children:"Confirmation Code: "}),Object(s.jsxs)("span",{className:"sign-in-up-input-container",children:[Object(s.jsx)("input",{className:"sign-in-up-input",type:"text",name:"confirmation",id:"confirmation",onChange:function(e){i(e.target.value)}}),Object(s.jsx)("button",{className:"sign-in-up-submit",children:"Submit"})]}),Object(s.jsxs)("div",{style:{"padding-top":"1rem"},children:[Object(s.jsx)("span",{children:"Did not receive confirmation code? "}),Object(s.jsx)("span",{class:"PageNumberLinks",onClick:function(){return I.apply(this,arguments)},children:"Resend"})]})]})]})})})},$=n(203),ee=n.p+"static/media/queryRawSeq.edd4f9b2.png",te=n.p+"static/media/queryRawSeqSmall.985e31a7.png",ne=function(){return Object(s.jsx)("section",{className:"documentation",children:Object(s.jsxs)("div",{className:"box",children:[Object(s.jsx)("h1",{children:"Documentation"}),Object(s.jsx)("h2",{children:"The purpose of the project"}),Object(s.jsx)("p",{children:"Retrobase is a project I am undertaking both as a vehicle for self-teaching full stack development and cloud architecting skills in AWS, as well as a means of demonstrating my abilities to prospective employers. It is a project in progress. "}),Object(s.jsx)("h2",{children:"The Specification"}),Object(s.jsxs)("p",{children:["Retrobase is a database of retrotransposon DNA sequences acquired from UCSC Table Browser, as well as protein sequences predicted ",Object(s.jsx)("i",{children:"in silico"})," from those DNA sequences. DNA sequences were translated into potential protein sequences by a simple algorithm. These potential protein sequences were compared to the sequences of known retrotransposon proteins and, based on similarity, were predicted to be real retrotransposon protein sequences or not. Psi-BLAST was used to achieve this. The database can be queried using the Retrobase Query tool, both by manually entering DNA or protein sequences and by submitting a zipped MZID-formatted file containing peptide sequences. In order to submit a file via Query, the user must register and log in. Another tool under development is Tissue Expression Atlas, which will be an analytics tool, providing graphical insight into which retrotransposon classes, families and proteins are found expressed in different tissues of the body. The data presented in Tissue Expression Atlas will be from files uploaded by users, in Query, who give permission for it to be stored and made publically available."]}),Object(s.jsxs)("p",{children:["Retrobase's frontend is composed of a React.js single page application run from AWS S3. The back end is composed of an AWS-based serverless application, using DynamoDB, S3, S3 Select, Lambda,  API Gateway, Cognito and Amplify. See below in the ",Object(s.jsx)($.a,{to:"/documentation#architectureDoc",children:"Architecture"})," section for details on the architecture."]}),Object(s.jsx)("p",{children:"Originally, both tools were to be based on PostgreSQL in AWS RDS but I have decided to transition to DynamoDB to address the limitations of scaling with RDS in a serverless application. "}),Object(s.jsx)("h2",{id:"whatIsRetro",children:"What is a retrotransposon?"}),Object(s.jsx)("p",{children:"In short, retrotransposons are sections of our genomes that descend from retroviruses. Retroviruses reproduce by inserting their own DNA into the host genome and tricking the host into reading their DNA and making more copies of the virus. When these viral elements enter the genomes of germ-line cells (sperms and egg cells) or foetal cells, all cells descending from those infected cells will contain the viral sequences. These viral sequences can also have the ability to amplify themselves by having the host cell create copies of them and insert them elsewhere in the genome- a process called transposition. As much as 40% of the human genome is composed of retrotransposon sequences, making their study an important part of biology. Thankfully, the majority of these sequences are inactivated by our cells or are mutated to the point of no long functioning, so usually do not cause us harm. However, there are disease conditions involving their activity."}),Object(s.jsx)("h2",{id:"architectureDoc",children:"The Architecture"}),Object(s.jsx)("h3",{children:"Database"}),Object(s.jsxs)("p",{children:["The backend is centered around the following ",Object(s.jsx)("b",{children:"DynamoDB"})," tables:"]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("b",{children:"query_db"}),", contains data on DNA sequences, protein sequences predicted from those DNA sequences and metadata on those sequences. As DynamoDB cannot be queried for substrings (besides begins with), DynamoDB is partnered with S3 Select. User input sequences are queried against parquet files containing the either DNA or protein sequences, along with the corresponding partition keys for the DynamoDB items containing sequence. These queries are orchestrated by Lambda functions, which the partition keys of matching sequences from the S3 select queries and collect the corresponding data from DynamoDB."]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("b",{children:"prot_db"})," simply contains data on known retrotransposon proteins, including protein functions and sequences. This data does not need to be accessed simultaneously with data retrieved by the Query tool and is therefore kept separately to avoid excessive data duplication. Data in this table need only be retrieved to display details on a given known retrotransposon protein."]}),Object(s.jsxs)("p",{children:["Similarly, ",Object(s.jsx)("b",{children:"class_db"})," contains data on retrotransposon classes for population of detail pages."]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("b",{children:"te_db"})," contains the data of Tissue Expression Atlas. Users upload MZID files to the application, which are stored in S3 and processed via a series of Lambda functions to extract sequences and query for substring matches to sequences in query_db. In te_db, an item is composed of a peptide ID and sequence that was found to have a match in the database, the ID of the file from which the peptide comes, the ID of the potential (",Object(s.jsx)("a",{href:"#",children:"see The Specification above"}),") protein sequence to which the peptide was matched, the known protein(s) that Retrobase predicts the potential protein to be and the family and class of the sequence from which the potential protein was translated."]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("b",{children:"family_te_db"})," contains summary descriptive data on retrotransposon families expressed in different tissues."]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("b",{children:"protein_te_db"})," contains summary descriptive data on retrotransposon families expressed in different tissues."]}),Object(s.jsx)("h3",{children:"Query"}),Object(s.jsx)("h3",{children:"With Raw sequence:"}),Object(s.jsx)("img",{src:ee,className:"queryRawDiagram widthheight100 borderBlack1px"}),Object(s.jsx)("img",{src:te,className:"queryRawDiagramSmall widthheight100 borderBlack1px"}),Object(s.jsxs)("ol",{children:[Object(s.jsx)("li",{children:"Client submits an asynchronous GET request to API Gateway: to a resource specifically for either DNA or protein sequences, with a query sequence in its params."}),Object(s.jsx)("li",{children:'API gateway passes the query to a Lambda function. The function creates a token. An item is created in a table, query_progress, in DynamoDB with the token as its key and an attribute, "complete", set to 0. The token is returned to the client via API gateway. The rest of the process will be asynchronous.'}),Object(s.jsx)("li",{children:"A second Lambda is invoked asynchronously and is passed the query string and the token created by the first function."}),Object(s.jsx)("li",{children:"If the query string is less than 5 characters, a DynamoDB scan is executed immediately for sequences containing the query, skipping straight to step 6. This is because there will be so many sequences containing such a generic query that it is more efficient to scan the whole table than to run get_item individually on each partition key. If the query length is greater than 5, the Lambda function runs an S3 Select query on an parquet file in S3, composed of DNA or protein sequences and their corresponding partition keys in DynamoDB."}),Object(s.jsx)("li",{children:"The returned partition keys are then used to collect the relevant items from DynamoDB."}),Object(s.jsx)("li",{children:"The data is packaged into a JSON file and put in an S3 bucket."}),Object(s.jsx)("li",{children:'The item in the DynamoDB table, query_progress, with the token create in step 1 as key, has its "completed" attribute set to 1.'}),Object(s.jsx)("li",{children:"The client is polling a separate API gateway resource. Sending a GET request to this method with a token triggers a third Lambda function."}),Object(s.jsx)("li",{children:'The third function checks if the item in the query_progress DynamoDB table with the token as its partition key has the "complete" attribute set to 1.'}),Object(s.jsx)("li",{children:"If complete is now true, the data is retrieved from S3 and returned to the client via API Gateway."})]}),Object(s.jsx)("b",{children:"Limitations:"}),Object(s.jsx)("p",{children:"It is possible to simply contain all the relevant columns in the paquet file in S3 on which the initial SELECT query is run. This eliminates the need to query for the remaining values in DynamoDB. Therefore, the current architecture is illogical. I created the current architecture as a means of gaining experience creating asynchronous processes involving multiple cloud resources."}),Object(s.jsx)("h3",{children:"With MZID file:"}),Object(s.jsx)("p",{children:"Documentation coming soon!"}),Object(s.jsx)("h3",{children:"Tissue Expression Atlas"}),Object(s.jsx)("p",{children:"Documentation coming soon!"})]})})},se=n(40),ce=n(343),ae={aws_project_region:"us-east-1",aws_cognito_identity_pool_id:"us-east-1:3895c96c-f6f3-4543-af88-ff83dcf41ddc",aws_cognito_region:"us-east-1",aws_user_pools_id:"us-east-1_R6k5YitAi",aws_user_pools_web_client_id:"16u09k5qchdspo07tfmqlftemq",oauth:{}};se.default.configure(ae);var re=function(){var e=Object(c.useState)(null),t=Object(j.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.currentAuthenticatedUser();case 3:n=e.sent,a(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a(null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return ce.a.listen("auth",e),e(),function(){return ce.a.remove("auth",e)}}),[]),Object(s.jsx)(h.a,{children:Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(M,{user:n}),Object(s.jsx)(k.a,{exact:!0,path:"/",component:p}),Object(s.jsx)(k.a,{exact:!0,path:"/account",component:O}),Object(s.jsx)(k.a,{path:"/class/:class",component:Q}),Object(s.jsx)(k.a,{path:"/family/:family_id",component:U}),Object(s.jsx)(k.a,{path:"/knownprotein/:knownprotein",component:F}),Object(s.jsx)(k.a,{path:"/dna/:dna_id",component:J}),Object(s.jsx)(k.a,{path:"/predictedprotein/:protein_id",component:L}),Object(s.jsx)(k.a,{exact:!0,path:"/query",component:P}),Object(s.jsx)(k.a,{path:"/proteinquery/:query",component:S}),Object(s.jsx)(k.a,{path:"/dnaquery/:query",component:y}),Object(s.jsx)(k.a,{path:"/searchresults/:search",component:I}),Object(s.jsx)(k.a,{path:"/tissueexpressionupload",children:Object(s.jsx)(Y,{user:n})}),Object(s.jsx)(k.a,{path:"/tissueexpression",children:Object(s.jsx)(G,{user:n})}),Object(s.jsx)(k.a,{path:"/user-registration",component:_}),Object(s.jsx)(k.a,{path:"/confirmsignup",component:X}),Object(s.jsx)(k.a,{path:"/signin",component:K}),Object(s.jsx)(k.a,{path:"/documentation",component:ne})]})})},ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,409)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),s(e),c(e),a(e),r(e)}))};se.default.configure(ae),i.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(re,{})}),document.getElementById("root")),ie()}},[[380,1,2]]]);
//# sourceMappingURL=main.66781a55.chunk.js.map