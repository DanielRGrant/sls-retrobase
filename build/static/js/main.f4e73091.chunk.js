(this.webpackJsonpretrobase=this.webpackJsonpretrobase||[]).push([[0],{111:function(e,t){},245:function(e){e.exports=JSON.parse('{"identityPoolId":"us-east-1:fdcc6ee7-8763-4896-9a54-935a67a06545","region":"us-east-1","userPoolId":"us-east-1_afMnL1zXY","userPoolWebClientId":"71h27rnmcenh49ep2d9im6mvlq","oauth":{"domain":"https://retrobase-danielrgrant.auth.us-east-1.amazoncognito.com","scope":["email","profile","openid","aws.cognito.signin.user.admin"],"redirectSignIn":"http://localhost:3000","redirectSignOut":"http://localhost:3000","responseType":"code","auth0_identity_provider":"auth0test"}}')},273:function(e,t,s){},42:function(e){e.exports=JSON.parse('{"compilerOptions":{"baseUrl":"./src"},"queryApiUrl":"https://eip9xh6zhk.execute-api.us-east-1.amazonaws.com/dev/sls-retrobase-dev"}')},713:function(e,t){},715:function(e,t){},726:function(e,t){},728:function(e,t){},753:function(e,t){},755:function(e,t){},756:function(e,t){},761:function(e,t){},763:function(e,t){},782:function(e,t){},794:function(e,t){},797:function(e,t){},840:function(e,t,s){"use strict";s.r(t);var n=s(1),c=s(3),r=s.n(c),i=s(247),a=s.n(i),o=(s(273),s(18)),l=s(13),d=function(e){var t=e.children,s=Object(o.f)();return Object(n.jsx)(l.a,{domain:"dev-y33gimcf.eu.auth0.com",clientId:"Xn6SDc43vE8P0sQHkVLtiBSBVFT5rJMU",redirectUri:"http://localhost:3000/loginredirect",onRedirectCallback:function(e){s.push((null===e||void 0===e?void 0:e.returnTo)||window.location.pathname)},audience:"https://sls-retrobase",scope:"get:data",children:t})},j=s(38),u=s(76),h=function(e){var t,s;return console.log(e),Object(n.jsx)("section",{children:Object(n.jsxs)("div",{className:"box",children:[Object(n.jsx)("h3",{children:"Error Occured: "}),Object(n.jsx)("span",{children:(null===(t=e.location)||void 0===t||null===(s=t.state)||void 0===s?void 0:s.error)?e.location.state.error:"Unspecified Error"})]})})},b=function(e){var t;return Object(n.jsx)(u.ErrorBoundary,{FallbackComponent:h,children:Object(n.jsx)(o.a,Object(j.a)({},e))},null===(t=e.location)||void 0===t?void 0:t.pathname)},p=function(){return Object(n.jsx)("section",{children:Object(n.jsx)("div",{className:"box",children:Object(n.jsx)("p",{children:"404 Error: No page exists at this URL"})})})},O=s(7),m=s(21),x=s.n(m),f=s(8),A=s(260),g=s(12),v=s.n(g),y=s(15),N=s(138),w=function(){var e=Object(y.a)(v.a.mark((function e(t,s,n){var c,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:return c=e.sent,r=Object(N.a)(c),i=r.exp,console.log(n),e.abrupt("return",A.a.federatedSignIn(n,{token:c,expires_at:1e3*i},{sub:t.sub}));case 6:case"end":return e.stop()}}),e)})));return function(t,s,n){return e.apply(this,arguments)}}(),k=(s(161),function(){var e=Object(c.useState)([]),t=Object(O.a)(e,2),s=(t[0],t[1],Object(l.b)());s.user,s.getAccessTokenSilently;return Object(n.jsx)("section",{className:"home-page",children:Object(n.jsxs)("div",{className:"box",children:[Object(n.jsxs)("div",{className:"title-section",children:[Object(n.jsx)("h1",{children:"Retrobase"}),Object(n.jsxs)("p",{children:["Retrobase is a database of retrotransposon DNA sequences acquired from UCSC Table Browser and proteins translated ",Object(n.jsx)("i",{children:"in silico"})," from these sequences. All protein name labels are predicted using psi-BLAST. Retrobase serves to make these sequences queriable aid in identification of retroviral sequences in proteomic assays. "]}),Object(n.jsx)("h3",{children:"The Purpose of The Project"}),Object(n.jsx)("p",{children:"I am undertaking this project as a vehicle to develop my skills in serverless application design and development."}),Object(n.jsxs)("p",{children:["For more information on the project, ",Object(n.jsx)(f.b,{to:"/documentation/",children:"click here"}),"."]})]}),Object(n.jsxs)("div",{className:"text-boxes",children:[Object(n.jsxs)("div",{className:"text-section",children:[Object(n.jsx)("h2",{children:"Data Available"}),Object(n.jsx)("p",{children:"The database is a prototype and presently contains data on the following retrotransposon classes:"}),Object(n.jsx)("ul",{children:Object(n.jsx)("li",{children:Object(n.jsx)(f.b,{to:"/class/ERV",children:"ERV"})})})]}),Object(n.jsxs)("div",{class:"text-section",children:[Object(n.jsx)("h2",{className:"UnderLineHover",children:Object(n.jsx)(f.b,{to:"/query/",children:" Query Tool"})}),Object(n.jsx)("p",{children:"Querying Retrobase allows exact matching of query sequences (whole or partial) to sequences in the database for identification of retroviral proteins. Queries can be of raw single sequences or MZID-formatted files containing many sequences."})]}),Object(n.jsxs)("div",{class:"text-section",children:[Object(n.jsx)("h2",{children:Object(n.jsx)("a",{class:"UnderLineHover",href:"#",children:"Evolutionary Trees"})}),Object(n.jsx)("p",{children:"Tool currently unavailable."}),Object(n.jsx)("p",{children:"Evolutionary Trees is a tool for viewing the evolutionary relationships between families of retrotransposons of a given class/superfamily."})]}),Object(n.jsxs)("div",{class:"text-section",children:[Object(n.jsx)("h2",{children:Object(n.jsx)("a",{class:"UnderLineHover",href:"#",children:"Tissue Expression Atlas"})}),Object(n.jsx)("p",{children:"Tool currently unavailable"}),Object(n.jsx)("p",{children:"The Tissue Expression Atlas is tool for community sourcing data on the tissue specificity of expression of retrotransposon protein sequence variants."})]})]})]})})}),q=function(e){if(!(e instanceof Error))return{success:!0,message:"No error"};switch(e.message){case"Network Error":return{success:!1,message:"Network error: Check internet connection"};default:return{success:!1,message:e.message}}},S=function(){var e=Object(y.a)(v.a.mark((function e(t,s,n,c){var r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get(s,{params:t}).catch((function(e){return e}));case 2:if(r=e.sent,(i=q(r)).success){e.next=6;break}return e.abrupt("return",i);case 6:return c.push({pathname:n,state:{data:JSON.stringify(r.data.body)}}),e.abrupt("return",{success:!0,message:"No error"});case 8:case"end":return e.stop()}}),e)})));return function(t,s,n,c){return e.apply(this,arguments)}}(),T=function(){var e=Object(y.a)(v.a.mark((function e(t){var s,n,c,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.headersParams,n=t.requestUrl,c=t.errorUrl,r=t.history,e.prev=1,e.next=4,x.a.get(n,s);case 4:return i=e.sent,e.abrupt("return",i.data);case 8:e.prev=8,e.t0=e.catch(1),r.push({pathname:c,state:{error:"Network Error"===e.t0.message?"Network Error; Check internet connection":"Unspecified Error"}});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(y.a)(v.a.mark((function e(t){var s,n,c,r,i,a,o,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.metadata,n=t.formData,c=t.accessToken,r=t.getPresignedUrlUrl,i=t.history,t.pushUrl,a={headers:{Authorization:"Bearer ".concat(c)},params:s},n.file){e.next=4;break}return e.abrupt("return",{success:!1,message:"Please select a file"});case 4:if("Yes"!==s.uploadTe||s.tissue&&s.researcher&&("Yes"!==s.published||s.publication)){e.next=6;break}return e.abrupt("return",{success:!1,message:"You have missed some form fields"});case 6:return e.prev=6,e.next=9,x.a.get(r,a);case 9:return o=e.sent,l=o.data.url,Object.defineProperty(n.file,"name",{writable:!0,value:o.data.key}),e.next=14,x.a.put(l,n.file);case 14:return i.push("/filesentsuccess"),e.abrupt("return",{success:!0,message:"Success!"});case 18:return e.prev=18,e.t0=e.catch(6),e.abrupt("return",{success:!1,message:"Network Error"});case 21:case"end":return e.stop()}}),e,null,[[6,18]])})));return function(t){return e.apply(this,arguments)}}(),R=(s(711),s(801).default,function(e,t){var s=Object(c.useState)(t),n=Object(O.a)(s,2),r=n[0],i=n[1];return Object(c.useEffect)((function(){var t=function(t){null===e.current||e.current.contains(t.target)||i(!r)};return r&&window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}),[r,e]),[r,i]});function P(e,t,s,n){e.includes(s)&&(t[s].includes(n)||t[s].push(n))}function M(e,t,s,n,c){return!!e||!(!c.includes(n)||s===t||"No Filter"===s)}function C(e,t,s){var c=s[t].linkPathUseSelf?e:e[1],r=Array.isArray(e)?e[1]:e;return Object(n.jsx)(f.b,{to:s[t].basePath+c,children:r})}var U=function(e){var t=e.tableData,s=e.colParams,r=e.itemsPerPageIn,i=void 0===r?10:r,a=e.numPageNumbers,o=void 0===a?11:a,l=e.rowActions,d=void 0===l?null:l,u=Object(c.useState)(i),h=Object(O.a)(u,2),b=h[0],p=h[1],m=Object(c.useState)(0),x=Object(O.a)(m,2),f=x[0],A=x[1],g=Object(c.useState)({col:null,desc:!0}),v=Object(O.a)(g,2),y=v[0],N=v[1],w=Object(c.useState)(null),k=Object(O.a)(w,2),q=k[0],S=k[1],T=s.columnsHaveLinks,D=s.columnsToFilter,R=s.customColumns,U=s.columnHeaders,I=s.columnHeadersFinal;if(!U)throw{name:"MissingArgumentException",message:"columnHeaders key missing from params"};for(var F,B,E,Q=y.col?(F=t,B=y.col,E=y.desc,F.sort((function(e,t){var s=e[B].toString(),n=t[B].toString();return E?n.localeCompare(s):s.localeCompare(n)}))):t,L=function(e){var t=s.columnHeadersFinal.indexOf(e.target.innerHTML),n=s.columnHeaders[t];N({col:n,desc:n!==y.col||!y.desc})},H=function(e){var t=function(e,t){console.log(e.currentTarget);var s=e.currentTarget.parentNode.parentNode.childNodes;return console.log(s[t]),s[t].lastChild.innerHTML}(e,d.colIndex);console.log(t),S(t)},V={},J={},W=0;W<D.length;W++)V[D[W]]=["No Filter"],J[D[W]]="No Filter";for(var G=Object(c.useState)(J),Z=Object(O.a)(G,2),z=Z[0],Y=Z[1],_=[],K=0;K<Q.length;K++){for(var X=!1,$=Q[K],ee=[],te=null,se=null,ne=0;ne<U.length;ne++){var ce=U[ne],re=(te=$[ce],Object.keys(T).includes(ce));if(Object.keys(R).includes(ce)){var ie={fieldValue:te,columnHeader:ce,excludeRow:X,columnsToFilter:D,filters:z,collectUniqueVals:V,entry:$},ae=R[ce](ie),oe=Object(O.a)(ae,3);se=oe[0],X=oe[1],V=oe[2]}else re?(se=Object(n.jsx)("td",{children:C($[ce],ce,T)}),P(D,V,ce,te=T[ce].linkPathUseSelf?$[ce]:$[ce][1]),X=M(X,te,z[ce],ce,D)):(X=M(X,te=$[ce],z[ce],ce,D),P(D,V,ce,te),se=Object(n.jsx)("td",{children:te}));se&&ee.push(se)}d&&ee.unshift(Object(n.jsx)("td",{children:Object(n.jsx)("input",{type:"radio",name:"row",onChange:H})})),X||_.push(Object(n.jsx)("tr",{children:ee}))}for(var le=function(e,t){return e.reduce((function(e,s,n){var c=Math.floor(n/t);return(e[c]||(e[c]=[])).push(s),e}),[])}(_,b),de=function(e,t,s){var n,c,r=Math.ceil(e/2),i=Math.floor(e/2);return t<e?(n=0,c=t):s>=0&&s<=r?(n=0,c=e):s+i>=t?(n=t-e,c=t):(n=s-r,c=s+i),[n,c]}(o,le.length,f),je=Object(O.a)(de,2),ue=je[0],he=je[1],be=function(e){"prev"===e.target.id?A(f-1):"next"===e.target.id?A(f+1):A(Number(e.target.id))},pe=[],Oe=ue;Oe<he;Oe++)pe.push(Object(n.jsx)("li",{className:"PageNumberLinks ".concat(Oe===f?"active":""," pagination-link"),id:Oe,onClick:be,children:Oe+1}));0!==f&&pe.unshift(Object(n.jsx)("li",{className:"PageNumberLinks pagination-link",id:"prev",onClick:be,children:"Prev"})),f!==he-1&&pe.push(Object(n.jsx)("li",{className:"PageNumberLinks pagination-link",id:"next",onClick:be,children:"Next"}));var me=function(e){var t=Object(j.a)({},z);t[e.target.id]=e.target.value,Y(t),A(0)},xe=Object.entries(V).map((function(e){var t=e[0],s=(e=e[1]).map((function(e){return Object(n.jsx)("option",{id:e,children:e},e)}));return Object(n.jsx)("select",{id:t,onChange:me,children:s},t)})),fe=(I||U).map((function(e){return Object(n.jsx)("th",{scope:"column",onClick:L,children:e})}));d&&fe.unshift(Object(n.jsx)("th",{}));var Ae,ge=Object(n.jsxs)("select",{onChange:function(e){"All"===e.target.value?p(t.length):p(Number(e.target.value))},children:[Object(n.jsx)("option",{children:"10"}),Object(n.jsx)("option",{children:"50"}),Object(n.jsx)("option",{children:"100"}),Object(n.jsx)("option",{children:"All"})]}),ve=Object(n.jsxs)("table",{children:[Object(n.jsx)("thead",{children:Object(n.jsx)("tr",{children:fe})}),Object(n.jsx)("tbody",{children:le[f]})]});return d&&(Ae=Object(n.jsx)("button",{onClick:function(){return d.deleteFileData(q)},children:"Delete Data"})),[ve,xe,pe,ge,Ae]};s(42);var I=function(){var e=Object(y.a)(v.a.mark((function e(t,s,n){var c,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={headersParams:{params:{},headers:{Authorization:"Bearer ".concat(t)}},requestUrl:"https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/teuploadcheckprogress/",errorUrl:"/error",history:s},e.next=3,T(c);case 3:r=e.sent,console.log(r.body),n(r.body);case 6:case"end":return e.stop()}}),e)})));return function(t,s,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(y.a)(v.a.mark((function e(t,s){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(){var e=Object(y.a)(v.a.mark((function e(s){var n,c,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/teremovemziddata/",c={file_id:s},r={headers:{Authorization:"Bearer ".concat(t)}},console.log(n,c,r),e.next=6,x.a.post(n,c,r);case 6:i=e.sent,console.log(i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s({colIndex:2,deleteFileData:function(e){return n(e)}});case 3:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),B=function(e){var t=Object(l.b)(),s=t.user,r=t.getAccessTokenSilently,i=Object(c.useState)([]),a=Object(O.a)(i,2),o=a[0],d=a[1],j=Object(c.useState)(null),u=Object(O.a)(j,2),h=u[0],b=u[1],p=Object(c.useState)(null),m=Object(O.a)(p,2),x=m[0],A=m[1],g={columnHeaders:["file_name","file_id","progress","num_peptides"],columnsHaveLinks:{},columnsToFilter:[],columnHeadersFinal:["File Name","File ID","Status","Peptides Matched"],customColumns:{file_id:function(e){return function(e,t,s){var c=e.fieldValue,r=(e.columnHeader,e.excludeRow),i=(e.columnsToFilter,e.filters,e.collectUniqueVals);return["complete"===e.entry[s]?Object(n.jsx)("td",{children:Object(n.jsx)(f.b,{to:t+c,children:c})}):Object(n.jsx)("td",{children:Object(n.jsx)("span",{children:c})}),r,i]}(e,"/fileresults/","progress")},progress:function(e){return function(e,t){var s=e.fieldValue,c=e.columnHeader,r=e.excludeRow,i=e.columnsToFilter,a=e.filters,o=e.collectUniqueVals;return function(e){P(i,o,c,s),e=M(e,s,a[c],c,i);var r=Object.keys(t);return[Object(n.jsx)("td",{style:{color:r.includes(s)?t[s]:""},children:s}),e,o]}(r)}(e,{complete:"green",active:"purple",failed:"red"})}}};Object(c.useEffect)((function(){r().then((function(e){return b(e)})),s&&h&&F(h,A).then((function(){return I(h,e.history,d)}))}),[s,h]);var v=U({tableData:o,colParams:g,rowActions:x}),y=Object(O.a)(v,5),N=y[0],w=(y[1],y[2]),k=y[3],q=y[4];return Object(n.jsx)("section",{children:Object(n.jsxs)("div",{className:"box",children:[Object(n.jsx)("h1",{children:"My Account"}),Object(n.jsx)("h3",{children:"File Analysis Progress"}),Object(n.jsxs)("div",{children:[Object(n.jsx)(n.Fragment,{children:q&&q}),Object(n.jsx)("button",{onClick:function(){return I(h,e.history,d)},children:"Refresh"})]}),Object(n.jsx)("div",{className:"querytable",children:N&&N}),Object(n.jsx)("div",{className:"page-numbers-container",children:w&&w}),Object(n.jsxs)("span",{children:["Items per page: ",k&&k]})]})})},E=function(e){var t=e.item;return Object(n.jsx)("table",{className:"infotable",children:Object(n.jsxs)("tbody",{children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"row",children:"Tissue: "}),Object(n.jsx)("td",{children:t.tissue})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"row",children:"Publication: "}),Object(n.jsx)("td",{children:t.publication})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"row",children:"Cancer: "}),Object(n.jsx)("td",{children:t.cancer})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"row",children:"Validated: "}),Object(n.jsx)("td",{children:t.validated})]})]})})},Q=(s(42),function(e){var t=Object(c.useState)([]),s=Object(O.a)(t,2),r=s[0],i=s[1],a=Object(c.useState)(e.match.params.fileid),o=Object(O.a)(a,2),l=o[0];o[1];Object(c.useEffect)((function(){(function(){var t=Object(y.a)(v.a.mark((function t(){var s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s={headersParams:{params:{file_id:l}},requestUrl:"https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/tefileresults",errorUrl:"/error",history:e.history},T(s).then((function(e){i(e.body)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var d=U(r,{columnHeaders:["peptide_id","seq_observed","protein","prot_id","dna_id","class","family"],columnsHaveLinks:{protein:{basePath:"protein",linkPathUseSelf:!0},prot_id:{basePath:"prot_id",linkPathUseSelf:!0},dna_id:{basePath:"dna_id",linkPathUseSelf:!0},class:{basePath:"class",linkPathUseSelf:!0},family:{basePath:"family",linkPathUseSelf:!0}},columnsToFilter:["protein","prot_id","dna_id","class","family","peptide_id"],columnHeadersFinal:["Peptide ID","Sequence Observed","Protein","Matched Sequence","DNA ID","Class","Family"],customColumns:{}}),j=Object(O.a)(d,4),u=j[0],h=j[1],b=j[2],p=j[3],m=["Protein","Matched Protein","DNA ID","Class","Family","Peptide ID"],x=h.map((function(e,t){return Object(n.jsxs)("div",{className:"filter-item",children:[Object(n.jsx)("div",{className:"filter-element",children:Object(n.jsx)("span",{children:m[t]})}),Object(n.jsx)("div",{className:"filter-element",children:e})]})}));return Object(n.jsx)("section",{className:"TeResultsPage",children:Object(n.jsxs)("div",{className:"box",children:[Object(n.jsxs)("h2",{children:["Sequence Matches In File ID: ",l]}),Object(n.jsxs)("div",{className:"infoBox",children:[Object(n.jsx)("h3",{children:"Metadata"}),Object(n.jsx)(E,{item:r.length?r[0]:[]})]}),Object(n.jsxs)("div",{className:"query-filters-box",children:[Object(n.jsx)("h3",{className:"query-filters-heading",children:"Filters"}),x]}),Object(n.jsx)("div",{className:"querytable",style:{"overflow-x":"scroll"},children:u}),Object(n.jsx)("div",{className:"page-numbers-container",children:b}),Object(n.jsxs)("span",{children:["Items per page: ",p]})]})})}),L=function(e){var t={columnHeaders:["dna_id","class","family","protein","coords","all_rec_prots"],columnsHaveLinks:{dna_id:{basePath:"/dna/",linkPathUseSelf:!0},class:{basePath:"/class/",linkPathUseSelf:!0}},columnsToFilter:["class","family","all_rec_prots"],excludeColumnHeader:["all_rec_prots"],columnHeadersFinal:["DNA Record ID","Class","Family","Protein Record ID (Predicted Proteins)","Genomic Coordinates"],customColumns:{all_rec_prots:function(e){return console.log(e),function(e){var t=e.fieldValue,s=e.columnHeader,n=e.excludeRow,c=e.columnsToFilter,r=e.filters,i=e.collectUniqueVals;console.log(c);for(var a=t.split("#"),o=[],l=0;l<a.length;l++){var d=a[l];P(c,i,s,d);var j=M(n,d,r[s],s,c);o.push(j)}return[!1,n=!o.includes(!1),i]}(e)}}},s=function(e,t,s){for(var c=0,r=[],i=0;i<e.length;i++){var a=e[i];if(0!==i)var o=r[i-1-c];else o={dna_id:""};if("null"!==a.prot_id){var l=Object(n.jsx)(f.b,{to:t+a.prot_id,children:a.prot_id});if(a.protein.includes("#")){var d=a.protein.split("#");d.map((function(e,t){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(f.b,{to:s+e,children:e}),t!==d.length-1?", ":null]})}))}else var j=Object(n.jsx)(f.b,{to:s+a.protein,children:a.protein});try{o.dna_id,a.dna_id}catch(u){console.log("HEREE BE ERROR: ",r)}o.dna_id===a.dna_id?(a.protein=Object(n.jsxs)(n.Fragment,{children:[l," (",j,")"]}),o.protein.push(Object(n.jsx)("p",{children:a.protein})),c++):(a.protein=[Object(n.jsxs)(n.Fragment,{children:[l," (",j,")"]})],r.push(a))}else a.protein="None",r.push(a)}return r}(JSON.parse(e.location.state.data),"/predictedprotein/","/knownprotein/"),c=U(s,t),r=Object(O.a)(c,3),i=r[0],a=r[1],o=r[2],l=[Object(n.jsx)("span",{children:"Class:"}),Object(n.jsx)("span",{children:"Family:"}),Object(n.jsx)("span",{children:"Predicted Protein:"})],d=a.map((function(e,t){return Object(n.jsxs)("div",{className:"filter-item",children:[Object(n.jsx)("div",{className:"filter-element",children:l[t]}),Object(n.jsx)("div",{className:"filter-element",children:e})]})}));return Object(n.jsx)("section",{className:"query-results-page",children:Object(n.jsxs)("div",{className:"box queryResults",children:[Object(n.jsx)("h1",{children:"Query Results"}),Object(n.jsxs)("div",{className:"query-filters-box",children:[Object(n.jsx)("h3",{className:"query-filters-heading",children:"Filters"}),Object(n.jsx)("div",{className:"query-results-filters",children:d})]}),Object(n.jsx)("div",{className:"querytable",children:i}),Object(n.jsx)("div",{className:"border-top pt-3",children:Object(n.jsx)("small",{className:"text-muted",children:Object(n.jsx)(f.b,{to:"/query",children:Object(n.jsx)("small",{children:"Search Again"})})})}),Object(n.jsx)("div",{className:"page-numbers-container",children:o})]})})},H=function(e){var t=JSON.parse(e.location.state.data),s=(e.match.params.query,U(t,{columnHeaders:["prot_id","class","family","protein","dna_id","coords"],columnHeadersFinal:["Protein Record ID","Class","Family","Predicted Protein(s)","DNA Record ID","DNA Record Genomic Coordinates"],columnsHaveLinks:{prot_id:{basePath:"/predictedprotein/",linkPathUseSelf:!0},dna_id:{basePath:"/dna/",linkPathUseSelf:!0},family:{basePath:"/family/",linkPathUseSelf:!0},class:{basePath:"/class/",linkPathUseSelf:!0}},columnsToFilter:["class","family","protein"],customColumns:{protein:function(e){return function(e,t,s){for(var c=e.fieldValue,r=e.columnHeader,i=e.excludeRow,a=e.columnsToFilter,o=e.filters,l=e.collectUniqueVals,d=c.split(t),j=d.map((function(e,t){return t+1!==d.length?Object(n.jsxs)(f.b,{to:s+e,children:[e,","]}):Object(n.jsx)(f.b,{to:s+e,children:e})})),u=[],h=0;h<d.length;h++){var b=d[h];P(a,l,r,b),u[h]=M(i,b,o[r],r,a)}return i=!u.includes(!1),[Object(n.jsx)("td",{children:j}),i,l]}(e,"#","/knownprotein/")}}})),c=Object(O.a)(s,3),r=c[0],i=c[1],a=c[2],o=[Object(n.jsx)("span",{children:"Class:"}),Object(n.jsx)("span",{children:"Family:"}),Object(n.jsx)("span",{children:"Predicted Protein:"})],l=i.map((function(e,t){return Object(n.jsxs)("div",{className:"filter-item",children:[Object(n.jsx)("div",{className:"filter-element",children:o[t]}),Object(n.jsx)("div",{className:"filter-element",children:e})]})})),d=Object(n.jsx)("section",{className:"prot-query-results-page",children:Object(n.jsxs)("div",{className:"box queryResults",children:[Object(n.jsx)("h1",{children:"Query Results"}),Object(n.jsxs)("div",{className:"query-filters-box",children:[Object(n.jsx)("h3",{className:"query-filters-heading",children:"Filters"}),Object(n.jsx)("div",{className:"query-results-filters",children:l})]}),Object(n.jsx)("div",{className:"querytable",children:r}),Object(n.jsx)("div",{className:"border-top pt-3",children:Object(n.jsx)("small",{className:"text-muted",children:Object(n.jsx)(f.b,{to:"/query",children:Object(n.jsx)("small",{children:"Search Again"})})})}),Object(n.jsx)("div",{className:"page-numbers-container",children:a})]})});return Object(n.jsx)(n.Fragment,{children:d})},V="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAQAAACR313BAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQflARsNMTo4rJTsAAABLUlEQVQY063QsUpCARjF8fN912uTgxFlBBUNLjpKLj1AEkRP0BtUo0tjIBYNQmsP0d4SNEhICBYXlcgsrQRBr95M7/WeBkWamjrr/zcd4M9JQ8g3FWz4AYmzgTAsMVjXIOI+RMqYkzV+axVRH7LOB1G+aBSuPxJQbkTZW4HBesSIjV3xWDU6Y1kNhJYeTQWVaF/btcxiBvdGH3dGCgfhbsl+gpkEXO2jvOU6tpWLnKMY3MfxfKfgsbZHULErbW2imHAd27pYvsTJQqfgsZIawDPSAgrRMl9RTLiDXikbs/MeK9sOeiZBweEMlDaHbZejQTXlwDYJypkAM9CClfxqPu8Mp/FUpt9MwIdBuQrltasEJSu/zpuAhlLflaBkpnFmjpAD5BYWTH5KmviH/QAc2Znp9j39lgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMS0yN1QxMzo0OTowMSswMDowMC/tNJwAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDEtMjdUMTM6NDk6MDErMDA6MDBesIwgAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",J=function(e){var t=Object(c.useRef)(null),s=R(t,!1),r=Object(O.a)(s,2),i=r[0],a=r[1],o=e.options.map((function(e){return Object(n.jsx)("li",{children:e.route?Object(n.jsx)(f.b,{to:e.route,children:e.title}):Object(n.jsx)("span",{onClick:e.function,children:e.title})})}));return Object(n.jsxs)("div",{className:"menu-container ".concat(e.classes),children:[Object(n.jsx)("button",{ref:t,onClick:function(){return a(!i)},className:"menu-trigger",children:Object(n.jsx)("span",{className:"flex-centered",children:e.heading})}),Object(n.jsx)("nav",{className:"menu ".concat(i?"active":"inactive"),children:Object(n.jsx)("ul",{children:o})})]})},W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAXCAYAAADgKtSgAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAAB3RJTUUH5QEcFTI6nGMNXgAABd5JREFUSMd1VEuoXWcZXd+/H+d1k9zcpGpt04akUktTMIiT1qpgQOogE6WIKAYHTlonxgqpjqQVB4KCFQk68QUO2ga1gdhY0lYDbWwexiT33uTmJvfe89rntfc+Z5+9978f/3JwH0mrfpP/44NvfYv1L5bgrup7ffGaK+isrnH/owdk1z27pT6zjUqJKkownsas1CviKEvI0pR5gWkUIQ1DNnbsENo25nbNER+sN06eEpJCEoPeQEjKcDBSw8FIhoMRhoORkHQDP5TADxEGofgj35qmkQQjX0iCpLz9tzdkE3OrWVq8LgAoIpLpDHsf2odqtYoLZ/8pBx//5KdI+ZIx5mM0vGHIV3ort96bX13j+XPncOz5Y1y8No9qtUoAsnf/vjvsXzz6HDZZkxSv46m8yB2SyPLiO1mW6Uk0bQb++FwUxc0syzOts6MAJMsLu9/rW3fv/+i733u/LK21lsxfmce7Z98RneUVQyJNsyNJqul5/Z//+IWffIgk3j7z9w/HSfJSlhfM8+IISeRFUXnvnfOyeO062q2OvA/4xaPPbendbrZtkjZJZFlxdjQKzrx15h8zF85fhtba7bQ8tFc7M+Nx9Fac6LN45jGM49ge9Ab2XcwFANSW+CIEACVQrdZaEY7H+0nuU6JOfOZzT0SPPPpw9ebNVVOpVSr37vlIpLU+YUy5r/jZpYdqyinKslCbOOS65AofKMuy4FguFMQVgWvbVrExz73VW2bnzh0FANTqtcJxLNf3fbfVbsMYs4Xxf8HX2QtEIBCIKNk4qlBrNO52mABKSCNkCeCOQUTkf4OXxmDQ60FrPQWRKMvatjHngYMHAcBsAOwgGSdxGjXXOiiK8r9JjkYBLNvGvesLMvC88uOPHbB27d69AsFtJXKo0+rWHctCWZYWAHqd/gyIQ2VZrjywd8/Kpz/7uB2MfCMblG3bxmQyBdqtDkjKwvx1ISnHf/qSxHFSSVONJEmfTVPNLMufjqcJXj95GiTh++FXoyjmcOh/ezj0EQRh5Xe//o2QlJtLt4Wk9HuDdfH/9PKrWLpxU5prTSEpvh86JF2SmEymr+R5YVKtj3Q63p7JZPrNOE4Z+OMTG9ZzoyhyitKI1/FkbaUpp0+eAklInhFBOBLXdTc/S6VpUjiO05idnbV1pl+g4bccxzGGrNAYTcAyRXmclv39PE1KY8pppVKxRcSIsphnGbZvn6GkqZY8z5GmqczNzSmlpAjH0SOOYz8D4uuiZNs4HP+wXqueqVRrn+i025dmd84eqtVqPyhKM6Yxv3Vc+5cV153PssxK4sQ4FZeO7UBIyqA/kFqjjka9buI4/bKI/KIoS8Oy/Mt4PH5t5ebyqcbMTHb/3gdkZtt2lmVZcV3nsCnNF0XJU0oJcp0/W6tXXy6KQkWTCLM7Z4kgCJXOcpsk4iQ9nCQ6DYPxn1dWVj96a/k2Wq2OKkvjaJ25gR9Wh8OR2/MGjimNSuIUOs325FnxWl4UOk31YZIojbHH44lCGI4trTW0zu7TOlsdT6K/fuNrR6okle+HtXarU7mxuKRGXgcAJJn4GPSHKvCD6nDo10jK4tWFWqr16bwoVo3hfWVpEEVTCyQtktBaf0XrLGs1u19YnF/CaBQ0rvx7QZrdgYRRKlGcis4N4mksJOXVP/xRLl+8LNNp3Gi1PYxGwVNxkuRZnj+dpCmm0/gOeJKkz8dxunz69Td3k7Q63f5Wym2+vz/+q6301GkqADAcBjZJtby0ds8kim4lSXJs4A8RTiYWLl64pAbhBN1O98FOx3sSgASDoVy9sqBICgC5vby6eQAk0VprC7Buhiv/uqoWrl0VANLtek/2vN6DXq+Hi+cvKRmHoWykjgzHMTZ7EDA0dB1X5nbvIgA0XLWVfkN/LHlRcCvZNvbqjtrqVb/bw5FDn5c8y2Vu+4x698ybMh2NMGi3MGy30Vm5Db/XQ8NdzzilFKJpCq/ZhN/twve6iPwhFi5clJm6q+IkkSfuf1jarTb+A66HPTqEAmlmAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIxLTAxLTI4VDIxOjUwOjQzKzAwOjAwk3Qo7wAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMS0wMS0yOFQyMTo1MDo0MyswMDowMOIpkFMAAAAASUVORK5CYII=",G=s(42),Z=function(e){var t=Object(o.f)(),s=Object(l.b)(),r=s.loginWithRedirect,i=s.logout,a=s.isAuthenticated,d=function(e){e.preventDefault(),p(!1);var s=e.target.search_input.value,n={search:s},c=G.queryApiUrl+"/navbar-search";S(n,c,"/searchresults/"+s,t)},j=Object(c.useRef)(null),u=R(j,!1),h=Object(O.a)(u,2),b=h[0],p=h[1],m=Object(c.useRef)(null),x=R(m,!1),g=Object(O.a)(x,2),v=g[0],y=g[1],N=[{title:"Query",route:"/query"},{title:"Tissue Expression Atlas",route:"/tissueexpression"}],w=[{title:"Sign In / Register",function:r}],k=[{title:"Account",route:"/account"},{title:"Sign Out",function:function(){return function(e){e({returnTo:window.location.origin}),A.a.signOut()}(i)}}];return Object(n.jsxs)("nav",{className:"navbar",children:[Object(n.jsxs)("span",{id:"mobile-nav-icons",children:[Object(n.jsx)("img",{className:"mobile-nav-icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAQAAABu4E3oAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQflAgEUFRfnaHzrAAABMElEQVQ4y+XTvUpcQRiH8WdmjoVg5yXYik1uIteQKmARgiJoQEjSLIGkiZIm3XZi5QV4CXZeg43YSthK3JknxZmzGfHomtp/debj975zvqCJQQyuiNvqjrjSzzGeBry3z8dnUQM+qMViVj89iRqwq2aLqnP18z90MAr21XkFA5qIXd3zCBzWTW3u1R8PUAO+joABHYudUQyIwU6cPAEG9FtMxr5LJ36vCz6Dpj3CTvy5BAzoRIyIRy8AAzo14lS9M7+A9Og8OGON/8ltcIsNZmzyq5kui6tAqDORL5yxzjUGk/hmyZHm6rv+hXZEEpm0qB+5ZI9VJPKHb7ylEGtHSJQuZAHy8LkBN1yQKCTmXNUyw1oOJY7cYF8tkYBYx026sV8HyPURlDpuMtZlSV45+Qsw3+1isNhBfwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMi0wMVQyMDoyMTowOSswMDowMAIwxtMAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDItMDFUMjA6MjE6MDkrMDA6MDBzbX5vAAAAAElFTkSuQmCC",onClick:function(){return t.push("/")}}),Object(n.jsx)("span",{className:"mobile-tool-menu-container",children:Object(n.jsx)(J,{options:N,heading:Object(n.jsx)("img",{className:"mobile-nav-icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAQAAABu4E3oAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQflAgEUEyF+iE70AAABiklEQVQ4y5XUPWtUQRjF8TP35kaC+gEUthIbxUKxMWARQ2IhxNJPIPZ2dgEbv0WKoIUgFlotgiAIgoWN2mkjilhIULJ52ZefxW4kaO4aD8wUw/w58/CcZ6KoxUN8s64jKlHSLkUlLngHPjsjqulIo1LEEWvglfIvl6jUGnFK3wgLotZKVLmdToapkqxkJv0k55KUtPvo+WpJzPuJXdwRjdL6OGvo6foOBni8h7RAOj5iZGDXwAisiEZaIHHaS3saGWHLcjtUVJGSizmbJpdzI02GqbOd6+mmST8lKf50qcf9Vollm+hPdRo3Tm1GY1Zc0fsNLU2paXw8uXBYKPuhxYMh8R/QrEajPiB9LdBVUSvjvfztlESa9LOYJ5nLMHV28iifspmneZP6MDUNJ5mA1ZaE74OWDcCW516DW5kKzYr72HJJHPcM79uHoihmxD28EHPiGrarNqRIUpJsJDmaY9lJMp/kR9o1HmfnDdC14K4vWJ+OjD+sVYwm660TmSZlku+bPhjY8MBJ+QXsWdIIjLFwkwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMi0wMVQyMDoxODo0NCswMDowMIJa5CIAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDItMDFUMjA6MTg6NDQrMDA6MDDzB1yeAAAAAElFTkSuQmCC",onClick:function(){return y(!v)}}),classes:"mobile-dropdown"})}),Object(n.jsx)("img",{className:"mobile-nav-icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAQAAADYBBcfAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQflAgITCDnTKKRTAAAChklEQVQ4y42Vz6sVZRjHP887P86pLobIdRFIXcswrq20aNO6jcuEIgha+SdIl3sXoXuR9m7Sf0BdSODChaabQuraSlDQMgvyKhb3nNN8Wsw7c+aeSnph4Hlnvp/neZnn+8yEEHQrCMAcg4hEvgZCCDsRJKQhqEg0TJEg0fTaHWjZYwUzxrzBOxxiF0+4zTfcYULBXxmLtkqXJgzDQlzxjI/VxnY987T7xTJrMBbBQjzid+ofbnrRc17yext108M9isOSJgvxgN+qDzzlQZMhHvQLH6mbvprRhYpJHHla/dmPxdLK2soQj/lYPSfWOd0ctRDf9ol6UnzRsYXJwtqx4Zp613fF0b+Bn6k/uCqO7F5XWIqv+KtTT4jjnWBCKlaBe9ymYta2GoEG2OI6Ja/l3WAlILEL2Mr+GDiFRMNvwFLvpR1gwxawG2iIHgugIbEMPIWcagAGU34E9nGIGUWWRM7/Mu/RcHexXlsRrvOUVY4BQUHku4ngU5a5z9Xe+tgHyXDsGfWhH+ZWtz3Do26rZ4d9bJ+0lmt9ekv93c/d65Iv+JLLnnBbfeBbYmHqbRciYRAkZhzmPG8S/MINHrHM++yh4SEl17jMWYA8J/nE82aveN6f3M6zMfO+X3nAC+qfboi15dwe0U9nSTDhCB+wjyWecY8r3ASO8yUAJzlFRcMs6wfnLq07W9meZWSycsOpUyeuW1h1VVtBhyZrx9bWjhxbm0wWVq47yWhp1U5nlzvmU57b0cWtdI7W7XOYowxgBrvSysJ1J86cuma1MNIsVo8BWhtuOHVb/Ugs+K+1I0mL4pr6ta+LCf4fGpYmx37iilgYwXNRui965KjJw89zwX+gzH8RfwNjrjgNDvf9eAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMi0wMlQxOTowMjoxMCswMDowMDplGp0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDItMDJUMTk6MDI6MTArMDA6MDBLOKIhAAAAAElFTkSuQmCC",onClick:function(){return p(!b)}})]}),b?Object(n.jsx)("div",{className:"mobile-search-bar-container",ref:j,children:Object(n.jsx)("form",{className:"mobile-search-bar-form",onSubmit:d,children:Object(n.jsx)("input",{className:"mobile-search-bar",id:"search_input",type:"text",name:"search_input",placeholder:"Search Retrobase..."})})}):null,Object(n.jsxs)("span",{id:"desktop-nav",children:[Object(n.jsx)(f.b,{className:"inline menu-button RetrobaseLogo",to:"/",children:" Retrobase"}),Object(n.jsxs)("div",{className:"search-bar-tool-menu",children:[Object(n.jsx)("form",{className:"inline searchBarForm",onSubmit:d,children:Object(n.jsx)("input",{className:"searchBar",id:"search_input",type:"text",name:"search_input",placeholder:"Search Retrobase..."})}),Object(n.jsx)("span",{className:"tool-menu",children:Object(n.jsx)(J,{options:N,heading:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{children:"Tools"}),Object(n.jsx)("img",{src:V})]}),classes:"menu-container-left-align"})})]})]}),Object(n.jsx)("span",{className:"logout logout-mobile",children:Object(n.jsx)(J,{options:a?k:w,heading:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("img",{src:W}),Object(n.jsx)("img",{src:V})]}),classes:"menu-container-right-align"})}),Object(n.jsx)("span",{className:"logout logout-desktop",children:Object(n.jsx)(J,{options:a?k:w,heading:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("img",{src:W}),Object(n.jsx)("img",{src:V})]}),classes:"mobile-dropdown"})})]})},z=function(e){return e.items.map((function(t){return Object(n.jsx)(f.b,{to:e.pathName+t[e.title],className:"linkNoDecoration",children:Object(n.jsxs)("div",{className:"SearchResult",children:[Object(n.jsx)("h3",{children:t[e.title]}),Object(n.jsxs)("p",{children:[t[e.title]," is ",e.entity," of the ",t.class," class of retrotransposons"]})]})})}))},Y=function(e){var t=e.match.params.search,s=JSON.parse(e.location.state.data),c=s.classes.map((function(e){return Object(n.jsx)(f.b,{to:"/class/"+e.class,className:"linkNoDecoration",children:Object(n.jsxs)("div",{className:"SearchResult",children:[Object(n.jsx)("h3",{children:e.class}),Object(n.jsxs)("p",{children:[e.description.substr(0,200),"..."]})]})})})),r=Object(n.jsx)(z,{pathName:"/dna/",items:s.dna_ids,title:"dna_id",entity:"a DNA element"}),i=Object(n.jsx)(z,{pathName:"/family/",items:s.families,title:"family",entity:"a family"}),a=Object(n.jsx)(z,{pathName:"/knownprotein/",items:s.proteins,title:"protein",entity:"a protein"}),o=Object(n.jsx)(z,{pathName:"/predictedprotein/",items:s.prot_ids,title:"prot_id",entity:"an in silico predicted protein sequence"});return Object(n.jsx)("section",{children:Object(n.jsxs)("div",{className:"box",children:[Object(n.jsxs)("h1",{children:["Search Results for ",Object(n.jsxs)("i",{children:['"',t,'"']})]}),Object(n.jsx)("div",{style:{height:"20px"}}),Object(n.jsx)(n.Fragment,{children:c}),Object(n.jsx)(n.Fragment,{children:r}),Object(n.jsx)(n.Fragment,{children:o}),Object(n.jsx)(n.Fragment,{children:i}),Object(n.jsx)(n.Fragment,{children:a})]})})},_=s(254),K=s.n(_),X=function(e){return Object(n.jsxs)("section",{className:"LoadingBox",children:[Object(n.jsxs)("div",{className:"box",children:[Object(n.jsx)("h3",{children:e.title}),Object(n.jsx)("p",{children:e.message})]}),Object(n.jsx)(K.a,{})]})},$=function(e){return e.show?Object(n.jsx)("div",{className:"inlineMessage ".concat(e.success?"success":"fail"),children:Object(n.jsx)("p",{children:e.message})}):null},ee=s(42),te=function(e){var t,s,r=Object(c.useState)(!1),i=Object(O.a)(r,2),a=i[0],o=i[1],d=Object(c.useState)(""),j=Object(O.a)(d,2),u=j[0],h=j[1],b=Object(c.useState)(""),p=Object(O.a)(b,2),m=p[0],x=p[1],f=Object(c.useState)(!1),A=Object(O.a)(f,2),g=A[0],N=A[1],w=Object(c.useState)(""),k=Object(O.a)(w,2),q=k[0],T=k[1],R=Object(c.useState)(null),P=Object(O.a)(R,2),M=P[0],C=P[1],U=Object(c.useState)(null),I=Object(O.a)(U,2),F=I[0],B=I[1],E=Object(c.useState)("No"),Q=Object(O.a)(E,2),L=Q[0],H=Q[1],V=Object(c.useState)("No"),J=Object(O.a)(V,2),W=J[0],G=J[1],Z=Object(c.useState)("None"),z=Object(O.a)(Z,2),Y=z[0],_=z[1],K=Object(c.useState)(null),te=Object(O.a)(K,2),se=te[0],ne=te[1],ce=Object(l.b)(),re=ce.isAuthenticated,ie=ce.getAccessTokenSilently,ae=ce.user,oe=ce.loginWithRedirect,le=Object(c.useState)((null===(t=e.location.state)||void 0===t?void 0:t.uploadTe)?"file":"sequence"),de=Object(O.a)(le,2),je=de[0],ue=de[1],he=Object(c.useState)("Yes"),be=Object(O.a)(he,2),pe=be[0],Oe=be[1];console.log(null===(s=e.location.state)||void 0===s?void 0:s.uploadTe);var me=function(e){ue(e.target.value)},xe=function(e){Oe(e.target.value),"No"===e.target.value&&(B(null),H("No"),G("No"),_("None"),ne(null))};var fe=function(){var t=Object(y.a)(v.a.mark((function t(s){var n,c,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.preventDefault(),re){t.next=5;break}oe(),t.next=16;break;case 5:return o(!0),h("Submitting File"),x("Your file is being submitted. Please do not refresh..."),n="Yes"===pe?{file_name:null===M||void 0===M?void 0:M.name,tissue:F,cancer:String(L),published:String(W),publication:Y,researcher:se,user_id:ae.sub,uploadTe:"Yes"}:{file_name:null===M||void 0===M?void 0:M.name,tissue:"",cancer:"",published:"",publication:"",researcher:"",user_id:ae.sub,uploadTe:"No"},c={file:M},t.next=12,ie({audience:"https://sls-retrobase",scope:"get:data"});case 12:r=t.sent,"https://kvuhomev06.execute-api.us-east-1.amazonaws.com/dev/get-s3-presigned-url","/filesentsuccess",D({metadata:n,formData:c,accessToken:r,getPresignedUrlUrl:"https://kvuhomev06.execute-api.us-east-1.amazonaws.com/dev/get-s3-presigned-url",history:e.history,pushUrl:"/filesentsuccess"}).then((function(e){e.success||(o(!1),N(!0),T(e.message))}));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ae=Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Enter Query"}),Object(n.jsx)("td",{children:Object(n.jsx)("textarea",{type:"text",id:"query",name:"query"})})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Protein or DNA"}),Object(n.jsx)("td",{children:Object(n.jsxs)("select",{id:"sequenceType",name:"sequenceType",children:[Object(n.jsx)("option",{children:"DNA Sequence"}),Object(n.jsx)("option",{children:"Protein Sequence"})]})})]})]}),ge=Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Upload to tissue expression atlas?"}),Object(n.jsxs)("td",{children:[Object(n.jsxs)("span",{className:"nowrap",style:{paddingRight:"4rem"},children:[Object(n.jsx)("label",{for:"uploadYes",children:"Yes"}),Object(n.jsx)("input",{type:"radio",value:"Yes",name:"uploadTe",checked:"Yes"===pe,onChange:xe})]}),Object(n.jsxs)("span",{className:"nowrap",children:[Object(n.jsx)("label",{for:"uploadNo",children:"No"}),Object(n.jsx)("input",{type:"radio",value:"No",name:"uploadTe",checked:"No"===pe,onChange:xe})]})]})]}),ve="Yes"===String(W)?Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Provide link to publication: "}),Object(n.jsx)("td",{children:Object(n.jsx)("input",{type:"text",id:"publication",name:"publication",value:Y,onChange:function(e){_(e.target.value)}})})]}):null,ye=Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Tissue: "}),Object(n.jsx)("td",{children:Object(n.jsx)("input",{type:"text",id:"tissueType",name:"tissueType",value:F,onChange:function(e){B(e.target.value)}})})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Is this a cancer sample?"}),Object(n.jsx)("td",{children:Object(n.jsxs)("select",{id:"cancer",name:"cancer",value:L,onChange:function(e){H(e.target.value)},children:[Object(n.jsx)("option",{children:"Yes"}),Object(n.jsx)("option",{children:"No"})]})})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Is this data published?"}),Object(n.jsx)("td",{children:Object(n.jsxs)("select",{id:"published",name:"published",value:W,onChange:function(e){G(e.target.value)},children:[Object(n.jsx)("option",{children:"Yes"}),Object(n.jsx)("option",{children:"No"})]})})]}),ve,Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Researcher Name: "}),Object(n.jsx)("td",{children:Object(n.jsx)("input",{type:"text",id:"researcher",name:"researcher",value:se,onChange:function(e){ne(e.target.value)}})})]})]}),Ne=Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Upload MZID .zip file:"}),Object(n.jsx)("td",{children:Object(n.jsx)("input",{type:"file",id:"uploadFile",name:"uploadFile",value:null,onChange:function(e){C(e.target.files[0])}})})]}),ge,"Yes"===pe?ye:null]}),we="sequence"===je?Ae:Ne,ke=Object(n.jsx)("section",{className:"queryForm",children:Object(n.jsx)("div",{className:"box queryForm",children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsxs)("div",{className:"smallertext",children:[Object(n.jsx)("h1",{children:"Query sequences against the Retrobase database"}),Object(n.jsx)($,{show:g,success:!1,message:q}),Object(n.jsx)($,{show:"file"===je&&!re,success:!1,message:Object(n.jsxs)("span",{children:["User must ",Object(n.jsx)("span",{className:"PageNumberLinks",onClick:oe,children:"log in"})," to submit file"]})}),Object(n.jsx)("form",{onSubmit:"sequence"===je?function(t){t.preventDefault(),o(!0),h("Querying"),x("Query in progress. Please do not refresh...");var s,n,c=t.target.sequenceType.value,r=t.target.query.value,i=function(e,t){var s={valid:!0,message:""},n={valid:!1,message:"Sequence contains invalid characters."};return e=e.toUpperCase(),"DNA Sequence"===t?RegExp("^[ATGC]+$").test(e)?s:n:"Protein Sequence"===t?RegExp("^[ABCDEFGHIKLMNPQRSTUVWXYZ]+$").test(e)?s:n:{valid:!1,message:"Invalid seqType"}}(r,c),a=i.valid,l=i.message;if(!a)return o(!1),N(!0),void T(l);"Protein Sequence"===c?(s=ee.queryApiUrl+"/sls-query-prot-s3",n="/proteinquery/"+r):(s=ee.queryApiUrl+"/sls-query-dna-s3",n="/dnaquery/"+r),S({query:r},s,n,e.history).then((function(e){o(!1),N(!0),T(e.message)}))}:fe,children:Object(n.jsx)("table",{class:"queryFormTable",children:Object(n.jsxs)("tbody",{children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Input Type: "}),Object(n.jsxs)("td",{children:[Object(n.jsxs)("span",{className:"nowrap",style:{paddingRight:"4rem"},children:[Object(n.jsx)("label",{for:"sequence",children:"Manually enter sequence: "}),Object(n.jsx)("input",{type:"radio",value:"sequence",name:"inputType",checked:"sequence"===je,onChange:me})]}),Object(n.jsxs)("span",{className:"nowrap",children:[Object(n.jsx)("label",{for:"file",children:"MZID File: "}),Object(n.jsx)("input",{type:"radio",value:"file",name:"inputType",checked:"file"===je,onChange:me})]})]})]}),we,Object(n.jsx)("tr",{children:Object(n.jsx)("button",{children:"Submit"})})]})})})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"About Query"}),Object(n.jsx)("p",{children:"The Retrobase Query tool performs exact matching of query sequences to sequences in the database. Currently BLAST algorithms are not available."}),Object(n.jsx)("p",{children:'Note: To experiment, you can simply enter the character "A", select either Protein Sequence or Dna Sequence and submit.'})]})]})})});return Object(n.jsx)(n.Fragment,{children:a?Object(n.jsx)(X,{title:u,message:m}):ke})},se=function(){return Object(n.jsx)("section",{children:Object(n.jsxs)("div",{className:"box",children:[Object(n.jsx)("h3",{children:"Success!"}),Object(n.jsxs)("p",{children:["File has been sent for processing. When ready, your results will be available at ",Object(n.jsx)(f.b,{to:"/account",children:"My Account"})]})]})})},ne=s(42),ce=function(e){var t=Object(c.useState)(e.match.params.class),s=Object(O.a)(t,2),r=s[0],i=s[1],a=Object(c.useState)(""),o=Object(O.a)(a,2),l=o[0],d=o[1],j=Object(c.useState)(""),u=Object(O.a)(j,2),h=u[0],b=u[1],p=Object(c.useState)(""),m=Object(O.a)(p,2),x=m[0],A=m[1];Object(c.useEffect)((function(){var t={headersParams:{params:{class:r}},requestUrl:"".concat(ne.queryApiUrl,"/classdetail"),errorUrl:"/error",history:e.history};T(t).then((function(e){i(e.body.class),d(e.body.proteins),b(e.body.families),A(e.body.description)}))}),[]);var g=l.split("#").map((function(e){return Object(n.jsx)("li",{children:Object(n.jsx)(f.b,{to:"/knownprotein/"+e,children:e})})})),v=h.split("#").map((function(e){return Object(n.jsx)("li",{children:Object(n.jsx)(f.b,{to:"/family/"+e,children:e})})})),y=x.split("\n").map((function(e){return Object(n.jsx)("p",{children:e})}));return Object(n.jsx)("section",{className:"classDetail",children:Object(n.jsxs)("div",{className:"box",children:[Object(n.jsxs)("h1",{children:[" Class: ",r]}),Object(n.jsx)("h2",{children:"Description"}),Object(n.jsx)("div",{children:y}),Object(n.jsx)("h2",{children:"Proteins Encoded By This Class:"}),Object(n.jsx)("ul",{children:Object(n.jsx)("li",{children:g})}),Object(n.jsx)("h2",{children:"Families"}),Object(n.jsx)("ul",{className:"familyList",children:Object(n.jsx)("li",{children:v})})]})})},re=s(42),ie=function(e){var t=Object(c.useState)(e.match.params.family_id),s=Object(O.a)(t,2),r=s[0],i=s[1],a=Object(c.useState)(""),o=Object(O.a)(a,2),l=o[0],d=o[1],j=Object(c.useState)([]),u=Object(O.a)(j,2),h=u[0],b=u[1];Object(c.useEffect)((function(){var t={headersParams:{params:{family:r}},requestUrl:"".concat(re.queryApiUrl,"/familydetail"),errorUrl:"/error",history:e.history};T(t).then((function(e){i(e.body[0].family),d(e.body[0].class),b(e.body)}))}),[]);var p=h.map((function(e,t){return Object(n.jsx)(n.Fragment,{children:0!==t?Object(n.jsxs)(f.b,{to:"/dna/"+e.dna_id,children:[", ",e.dna_id]}):Object(n.jsx)(f.b,{to:"/dna/"+e.dna_id,children:e.dna_id})})}));return Object(n.jsx)("section",{children:Object(n.jsxs)("div",{className:"box",children:[Object(n.jsx)("h1",{children:r}),Object(n.jsx)("table",{className:"infotable",children:Object(n.jsxs)("tbody",{children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Class: "}),Object(n.jsx)("td",{children:Object(n.jsx)(f.b,{to:"/class/"+l,children:l})})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"DNA Sequences: "}),Object(n.jsx)("td",{children:p})]})]})})]})})},ae=s(42),oe=function(e){var t=Object(c.useState)(e.match.params.knownprotein),s=Object(O.a)(t,2),r=s[0],i=s[1],a=Object(c.useState)([]),o=Object(O.a)(a,2),l=o[0],d=o[1],j=Object(c.useState)([]),u=Object(O.a)(j,2),h=u[0],b=u[1],p=Object(c.useState)([]),m=Object(O.a)(p,2),x=m[0],A=m[1],g=Object(c.useState)([]),v=Object(O.a)(g,2),y=v[0],N=v[1];Object(c.useEffect)((function(){var t={headersParams:{params:{protein:r}},requestUrl:"".concat(ae.queryApiUrl,"/knownproteindetail"),errorUrl:"/error",history:e.history};T(t).then((function(e){i(e.body.protein),d(e.body.function),b(e.body.class),A(e.body.sequence),N(e.body.accession)}))}),[]);var w=Object(n.jsxs)("p",{children:[" ",l]});return Object(n.jsx)("section",{children:Object(n.jsxs)("div",{className:"box",children:[Object(n.jsxs)("h1",{children:["Protein Name: ",r]}),Object(n.jsxs)("p",{children:["All information presented on this page is acquired from the ",Object(n.jsxs)("a",{href:"https://www.uniprot.org/uniprot/"+y,children:["Uniprot record, ",y]}),". Click through for much more information on this protein."]}),Object(n.jsx)("h2",{children:"Function"}),Object(n.jsx)("div",{children:w}),Object(n.jsx)("h2",{children:"Sequence"}),Object(n.jsxs)("p",{children:["The following sequence was used for predicting which ",Object(n.jsx)("i",{children:"in silico"}),"-translated transcripts from the retrotransposon family, ",Object(n.jsx)(f.b,{to:/class/+h,children:h}),", are ",r," sequences: "]}),Object(n.jsx)("p",{class:"wrapped nokern",children:x})]})})},le=s(42),de=function(e){var t=Object(c.useState)([]),s=Object(O.a)(t,2),r=(s[0],s[1],Object(c.useState)(e.match.params.protein_id)),i=Object(O.a)(r,2),a=i[0],o=(i[1],Object(c.useState)([])),l=Object(O.a)(o,2),d=l[0],j=l[1],u=Object(c.useState)([]),h=Object(O.a)(u,2),b=h[0],p=h[1],m=Object(c.useState)([]),x=Object(O.a)(m,2),A=x[0],g=x[1],v=Object(c.useState)([]),y=Object(O.a)(v,2),N=y[0],w=y[1],k=Object(c.useState)([]),q=Object(O.a)(k,2),S=q[0],D=q[1],R=Object(c.useState)([]),P=Object(O.a)(R,2),M=P[0],C=P[1];Object(c.useEffect)((function(){var t={headersParams:{params:{prot_id:a}},requestUrl:"".concat(le.queryApiUrl,"/predictedproteindetail"),errorUrl:"/error",history:e.history};T(t).then((function(e){j(e.body.dna_id),p(e.body.coords),g(e.body.family),w(e.body.class),D(e.body.prot_seq),C(e.body.known_prot)}))}),[]);var U=M.map((function(e,t){var s=Object(n.jsx)(f.b,{to:"/knownprotein/"+e.protein,children:Object(n.jsx)("span",{children:e.protein})});return 0!==t?Object(n.jsxs)("span",{children:[", ",s]}):Object(n.jsx)("span",{children:s})})),I=M.map((function(e){return Object(n.jsxs)("div",{children:[Object(n.jsxs)("h2",{children:[" ",e.protein]}),Object(n.jsx)("h3",{children:" Function "}),Object(n.jsxs)("p",{children:[Object(n.jsx)("i",{children:"Information taken from Uniprot"})," ",Object(n.jsxs)("a",{href:"https://www.uniprot.org/"+e.accession,children:["(",e.accession,")"]})]}),Object(n.jsx)("p",{children:e.function}),Object(n.jsx)("h3",{children:"Reference Sequence"}),Object(n.jsx)("p",{class:"wrapped nokern",children:e.sequence})]})}));return Object(n.jsx)("section",{children:Object(n.jsxs)("div",{className:"box",children:[Object(n.jsxs)("h1",{class:"msaIdCatcher",children:["Protein Record: ",a]}),Object(n.jsx)("table",{class:"infotable",children:Object(n.jsxs)("tbody",{children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"row",children:"Proteins Predicted:"}),Object(n.jsx)("td",{children:U})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"row",children:"Retrotransposon Class: "}),Object(n.jsx)("td",{children:Object(n.jsx)(f.b,{to:"/class/"+N,children:N})})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"row",children:"Family:"}),Object(n.jsx)("td",{children:Object(n.jsx)(f.b,{to:"/family/"+A,children:A})})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"row",children:"Translated From DNA Record:"}),Object(n.jsx)("td",{children:Object(n.jsx)(f.b,{to:"/dna/"+d,children:d})})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"row",children:"DNA Record Coordinates:"}),Object(n.jsx)("td",{children:b})]})]})}),Object(n.jsx)("h2",{children:"Sequence"}),Object(n.jsx)("p",{class:"wrapped nokern",children:S}),Object(n.jsx)("h1",{children:"Predicted Proteins"}),Object(n.jsx)("p",{children:"Note: protein prediction was done using psi-blast. This detects distantly related sequences and can potentially detect sequencs related to adjacent sequences. Discretion is advised."}),Object(n.jsx)("div",{children:I})]})})},je=s(42),ue=function(e){var t=Object(c.useState)(e.match.params.dna_id),s=Object(O.a)(t,2),r=s[0],i=s[1],a=Object(c.useState)(),o=Object(O.a)(a,2),l=o[0],d=o[1],j=Object(c.useState)([]),u=Object(O.a)(j,2),h=u[0],b=u[1],p=Object(c.useState)([]),m=Object(O.a)(p,2),x=m[0],A=m[1],g=Object(c.useState)([]),v=Object(O.a)(g,2),y=v[0],N=v[1];Object(c.useEffect)((function(){var t={headersParams:{params:{dna_id:r}},requestUrl:"".concat(je.queryApiUrl,"/dnadetail"),errorUrl:"/error",history:e.history};T(t).then((function(e){i(e.body.dna_id),d(e.body.family),b(e.body.class),A(e.body.dna_seq),N(e.body.protein_data)}))}),[]);var w=y&&0===Object.keys(y).length&&"object"===typeof y?Object(n.jsx)("span",{children:"No Proteins Predicted"}):y.map((function(e,t){if(e.protein.includes("#"))var s=e.split("#"),c=s.map((function(e,t){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(f.b,{to:"/knownprotein/"+e,children:e}),t!==s.length-1?", ":null]})}));else c=Object(n.jsx)(f.b,{to:"/knownprotein/"+e.protein,children:e.protein});return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(f.b,{children:e.prot_id})," (",c,")",t!==y.length-1?", ":null]})}));return Object(n.jsx)("section",{children:Object(n.jsxs)("div",{className:"box",children:[Object(n.jsxs)("h1",{children:["DNA Repeat Record: ",r]}),Object(n.jsx)("table",{class:"infotable",children:Object(n.jsxs)("tbody",{children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"row",children:"Retrotransposon Class: "}),Object(n.jsx)("td",{children:Object(n.jsx)(f.b,{to:"/class/"+h,children:h})})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"row",children:"Family:"}),Object(n.jsx)("td",{children:Object(n.jsx)(f.b,{to:"/family/"+l,children:l})})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"row",children:"Protein Sequences Predicted:"}),Object(n.jsx)("td",{children:w})]})]})}),Object(n.jsx)("h2",{children:"DNA sequence"}),Object(n.jsx)("p",{class:"wrapped nokern",children:x})]})})},he=s(255),be=s.n(he),pe=function(e){var t=Object(c.useState)(null),s=Object(O.a)(t,2),r=(s[0],s[1]),i=Object(c.useState)(null),a=Object(O.a)(i,2),o=a[0],l=a[1];Object(c.useEffect)((function(){(function(){var t=Object(y.a)(v.a.mark((function t(){var s,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={tissue:e.tissueSelected},t.next=3,x.a.get("https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/tegraphs",s);case 3:n=t.sent,r(n.data.tissue),l(n.data.counts);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.tissueSelected]);var d=Object(c.useRef)(null),j=Object(c.useState)(null),u=Object(O.a)(j,2),h=(u[0],u[1]);return Object(c.useEffect)((function(){if(o){var e=Object.keys(o)[0],t={responsive:!0,maintainAspectRatio:!1,type:"bar",data:{labels:Object.keys(o[e]),datasets:[{label:"#Detections",data:Object.values(o[e]),borderWidth:1,backgroundColor:"#2e70b3"}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0,precision:0}}]}}};if(d&&d.current){var s=new be.a(d.current,t);h(s)}}}),[o]),Object(n.jsx)("canvas",{ref:d,className:"GraphBox"})},Oe=function(e){var t=Object(l.b)(),s=t.isAuthenticated,r=t.loginWithRedirect,i=Object(c.useState)(null),a=Object(O.a)(i,2),o=a[0],d=a[1],j=s?Object(n.jsx)("div",{style:{"padding-top":"2rem"},children:Object(n.jsx)(f.b,{to:{pathname:"/query",state:{uploadTe:!0}},children:"Upload New Data"})}):Object(n.jsxs)("div",{style:{"padding-top":"2rem"},children:[Object(n.jsx)("span",{children:" Click here to sign in and upload your own data... "}),Object(n.jsx)("span",{onClick:r,className:"PageNumberLinks",children:"Sign In / Register"})]});return Object(n.jsx)("section",{children:Object(n.jsxs)("div",{className:"box",children:[Object(n.jsxs)("div",{style:{color:"green",border:"green solid 2px",padding:"1rem",margin:"10px 0"},children:[Object(n.jsx)("p",{children:"Tissue Expression Atlas is under development."}),Object(n.jsx)("p",{children:"This page is connected to a mock API"})]}),Object(n.jsx)("h1",{children:"Tissue Expression Atlas"}),Object(n.jsxs)("div",{className:"TissueGraphsSection",children:[Object(n.jsxs)("div",{className:"TissueList",children:[Object(n.jsx)("h3",{children:"Select Tissue"}),Object(n.jsxs)("table",{onClick:function(e){d(e.target.innerHTML)},children:[Object(n.jsx)("tr",{children:"Lung"}),Object(n.jsx)("tr",{children:"Heart"})]})]}),Object(n.jsx)("div",{className:"GraphContainer",children:Object(n.jsx)(pe,{tissueSelected:o})})]}),Object(n.jsx)("div",{children:j})]})})},me=s(256),xe=s.p+"static/media/queryRawSeq.edd4f9b2.png",fe=s.p+"static/media/queryRawSeqSmall.985e31a7.png",Ae=function(){return Object(n.jsx)("section",{className:"documentation",children:Object(n.jsxs)("div",{className:"box",children:[Object(n.jsx)("h1",{children:"Documentation"}),Object(n.jsx)("h2",{children:"The purpose of the project"}),Object(n.jsx)("p",{children:"Retrobase is a project I am undertaking both as a vehicle for self-teaching full stack development and cloud architecting skills in AWS, as well as a means of demonstrating my abilities to prospective employers. It is a project in progress. "}),Object(n.jsx)("h2",{children:"The Specification"}),Object(n.jsxs)("p",{children:["Retrobase is a database of retrotransposon DNA sequences acquired from UCSC Table Browser, as well as protein sequences predicted ",Object(n.jsx)("i",{children:"in silico"})," from those DNA sequences. DNA sequences were translated into potential protein sequences by a simple algorithm. These potential protein sequences were compared to the sequences of known retrotransposon proteins and, based on similarity, were predicted to be real retrotransposon protein sequences or not. Psi-BLAST was used to achieve this. The database can be queried using the Retrobase Query tool, both by manually entering DNA or protein sequences and by submitting a zipped MZID-formatted file containing peptide sequences. In order to submit a file via Query, the user must register and log in. Another tool under development is Tissue Expression Atlas, which will be an analytics tool, providing graphical insight into which retrotransposon classes, families and proteins are found expressed in different tissues of the body. The data presented in Tissue Expression Atlas will be from files uploaded by users, in Query, who give permission for it to be stored and made publically available."]}),Object(n.jsxs)("p",{children:["Retrobase's frontend is composed of a React.js single page application run from AWS S3. The back end is composed of an AWS-based serverless application, using DynamoDB, S3, S3 Select, Lambda,  API Gateway, Cognito and Amplify. See below in the ",Object(n.jsx)(me.a,{to:"/documentation#architectureDoc",children:"Architecture"})," section for details on the architecture."]}),Object(n.jsx)("p",{children:"Originally, both tools were to be based on PostgreSQL in AWS RDS but I have decided to transition to DynamoDB to address the limitations of scaling with RDS in a serverless application. "}),Object(n.jsx)("h2",{id:"whatIsRetro",children:"What is a retrotransposon?"}),Object(n.jsx)("p",{children:"In short, retrotransposons are sections of our genomes that descend from retroviruses. Retroviruses reproduce by inserting their own DNA into the host genome and tricking the host into reading their DNA and making more copies of the virus. When these viral elements enter the genomes of germ-line cells (sperms and egg cells) or foetal cells, all cells descending from those infected cells will contain the viral sequences. These viral sequences can also have the ability to amplify themselves by having the host cell create copies of them and insert them elsewhere in the genome- a process called transposition. As much as 40% of the human genome is composed of retrotransposon sequences, making their study an important part of biology. Thankfully, the majority of these sequences are inactivated by our cells or are mutated to the point of no long functioning, so usually do not cause us harm. However, there are disease conditions involving their activity."}),Object(n.jsx)("h2",{id:"architectureDoc",children:"The Architecture"}),Object(n.jsx)("h3",{children:"Database"}),Object(n.jsxs)("p",{children:["The backend is centered around the following ",Object(n.jsx)("b",{children:"DynamoDB"})," tables:"]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"query_db"}),", contains data on DNA sequences, protein sequences predicted from those DNA sequences and metadata on those sequences. As DynamoDB cannot be queried for substrings (besides begins with), DynamoDB is partnered with S3 Select. User input sequences are queried against parquet files containing the either DNA or protein sequences, along with the corresponding partition keys for the DynamoDB items containing sequence. These queries are orchestrated by Lambda functions, which the partition keys of matching sequences from the S3 select queries and collect the corresponding data from DynamoDB."]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"prot_db"})," simply contains data on known retrotransposon proteins, including protein functions and sequences. This data does not need to be accessed simultaneously with data retrieved by the Query tool and is therefore kept separately to avoid excessive data duplication. Data in this table need only be retrieved to display details on a given known retrotransposon protein."]}),Object(n.jsxs)("p",{children:["Similarly, ",Object(n.jsx)("b",{children:"class_db"})," contains data on retrotransposon classes for population of detail pages."]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"te_db"})," contains the data of Tissue Expression Atlas. Users upload MZID files to the application, which are stored in S3 and processed via a series of Lambda functions to extract sequences and query for substring matches to sequences in query_db. In te_db, an item is composed of a peptide ID and sequence that was found to have a match in the database, the ID of the file from which the peptide comes, the ID of the potential (",Object(n.jsx)("a",{href:"#",children:"see The Specification above"}),") protein sequence to which the peptide was matched, the known protein(s) that Retrobase predicts the potential protein to be and the family and class of the sequence from which the potential protein was translated."]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"family_te_db"})," contains summary descriptive data on retrotransposon families expressed in different tissues."]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"protein_te_db"})," contains summary descriptive data on retrotransposon families expressed in different tissues."]}),Object(n.jsx)("h3",{children:"Query"}),Object(n.jsx)("h3",{children:"With Raw sequence:"}),Object(n.jsx)("img",{src:xe,className:"queryRawDiagram widthheight100 borderBlack1px"}),Object(n.jsx)("img",{src:fe,className:"queryRawDiagramSmall widthheight100 borderBlack1px"}),Object(n.jsxs)("ol",{children:[Object(n.jsx)("li",{children:"Client submits an asynchronous GET request to API Gateway: to a resource specifically for either DNA or protein sequences, with a query sequence in its params."}),Object(n.jsx)("li",{children:'API gateway passes the query to a Lambda function. The function creates a token. An item is created in a table, query_progress, in DynamoDB with the token as its key and an attribute, "complete", set to 0. The token is returned to the client via API gateway. The rest of the process will be asynchronous.'}),Object(n.jsx)("li",{children:"A second Lambda is invoked asynchronously and is passed the query string and the token created by the first function."}),Object(n.jsx)("li",{children:"If the query string is less than 5 characters, a DynamoDB scan is executed immediately for sequences containing the query, skipping straight to step 6. This is because there will be so many sequences containing such a generic query that it is more efficient to scan the whole table than to run get_item individually on each partition key. If the query length is greater than 5, the Lambda function runs an S3 Select query on an parquet file in S3, composed of DNA or protein sequences and their corresponding partition keys in DynamoDB."}),Object(n.jsx)("li",{children:"The returned partition keys are then used to collect the relevant items from DynamoDB."}),Object(n.jsx)("li",{children:"The data is packaged into a JSON file and put in an S3 bucket."}),Object(n.jsx)("li",{children:'The item in the DynamoDB table, query_progress, with the token create in step 1 as key, has its "completed" attribute set to 1.'}),Object(n.jsx)("li",{children:"The client is polling a separate API gateway resource. Sending a GET request to this method with a token triggers a third Lambda function."}),Object(n.jsx)("li",{children:'The third function checks if the item in the query_progress DynamoDB table with the token as its partition key has the "complete" attribute set to 1.'}),Object(n.jsx)("li",{children:"If complete is now true, the data is retrieved from S3 and returned to the client via API Gateway."})]}),Object(n.jsx)("b",{children:"Limitations:"}),Object(n.jsx)("p",{children:"It is possible to simply contain all the relevant columns in the paquet file in S3 on which the initial SELECT query is run. This eliminates the need to query for the remaining values in DynamoDB. Therefore, the current architecture is illogical. I created the current architecture as a means of gaining experience creating asynchronous processes involving multiple cloud resources."}),Object(n.jsx)("h3",{children:"With MZID file:"}),Object(n.jsx)("p",{children:"Documentation coming soon!"}),Object(n.jsx)("h3",{children:"Tissue Expression Atlas"}),Object(n.jsx)("p",{children:"Documentation coming soon!"})]})})},ge=(s(245),function(){var e=Object(o.f)(),t=Object(l.b)(),s=t.user,c=t.getAccessTokenSilently,r="dev-y33gimcf.eu.auth0.com";return s&&(console.log(s,r),w(s,c,r),e.push("/")),Object(n.jsx)(n.Fragment,{})}),ve=(s(61),s(59)),ye=s(245);ve.default.configure(ye);var Ne=function(){return Object(n.jsx)(f.a,{children:Object(n.jsx)(d,{children:Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(Z,{}),Object(n.jsxs)(o.c,{children:[Object(n.jsx)(b,{exact:!0,path:"/",component:k}),Object(n.jsx)(o.a,{exact:!0,path:"/account",component:B}),Object(n.jsx)(b,{path:"/fileresults/:fileid",component:Q}),Object(n.jsx)(b,{path:"/class/:class",component:ce}),Object(n.jsx)(b,{path:"/family/:family_id",component:ie}),Object(n.jsx)(b,{path:"/knownprotein/:knownprotein",component:oe}),Object(n.jsx)(b,{path:"/dna/:dna_id",component:ue}),Object(n.jsx)(b,{path:"/predictedprotein/:protein_id",component:de}),Object(n.jsx)(b,{exact:!0,path:"/query",component:te}),Object(n.jsx)(b,{path:"/filesentsuccess",component:se}),Object(n.jsx)(b,{path:"/proteinquery/:query",component:H}),Object(n.jsx)(b,{path:"/dnaquery/:query",component:L}),Object(n.jsx)(b,{path:"/searchresults/:search",component:Y}),Object(n.jsx)(o.a,{path:"/tissueexpression",children:Object(n.jsx)(Oe,{})}),Object(n.jsx)(b,{path:"/documentation",component:Ae}),Object(n.jsx)(o.a,{path:"/loginredirect",component:ge}),Object(n.jsx)(b,{path:"/error",component:h}),Object(n.jsx)(b,{component:p})]})]})})})},we=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,868)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;s(e),n(e),c(e),r(e),i(e)}))};a.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(d,{children:Object(n.jsx)(Ne,{})})}),document.getElementById("root")),we()}},[[840,1,2]]]);
//# sourceMappingURL=main.f4e73091.chunk.js.map