{"version":3,"sources":["components/Auth/auth0-provider-with-history.js","components/ErrorPage.js","components/RouteWithErrorBoundary.js","components/NotFound.js","components/Auth/AuthFunctions.js","components/HomePage.js","functions/functions.js","hooks/useDetectOutsideClick.js","functions/awsFunctions.js","components/react-table-creator/react-table-creator.js","components/AccountPage.js","components/react-table-creator/CustomColumnFunctions.js","components/TeResultsPageInfoTable.js","components/TeResultsPage.js","components/QueryResultsTables/DnaSearchResults.js","components/QueryResultsTables/ProteinSearchResults.js","assets/downArrow.png","components/DropDown.js","assets/accountIcon.png","components/Navbar.js","assets/homeIcon.png","assets/spannerIcon.png","assets/searchIcon.png","components/NavBarSearchResultItems.js","components/NavbarSearchResults.js","components/LoadingBox.js","components/InlineMessage.js","components/QueryFormPage/QueryFormPage.js","components/QueryFormPage/QueryFormFunctions.js","components/QueryFormPage/FileUploadSuccess.js","components/detailsPages/ClassDetail.js","components/detailsPages/FamilyDetail.js","components/detailsPages/ProteinNameDetail.js","components/detailsPages/ProteinRecordDetail.js","components/detailsPages/DnaDetail.js","components/TissueExpression/TeGraphs.js","components/TissueExpression/TeContainer.js","assets/architecture_diagrams/queryRawSeq.png","assets/architecture_diagrams/queryRawSeqSmall.png","components/Documentation.js","components/Auth/LoginRedirect.js","App.js","reportWebVitals.js","index.js"],"names":["Auth0ProviderWithHistory","children","history","useHistory","domain","process","clientId","redirectUri","onRedirectCallback","appState","push","returnTo","window","location","pathname","audience","scope","ErrorPage","props","console","log","className","state","error","RouteWithErrorBoundary","FallbackComponent","NotFound","awsCognitoSignin","user","getAccessTokenSilently","a","token","jwtDecode","exp","Auth","federatedSignIn","expires_at","sub","HomePage","useState","useAuth0","to","class","href","handleAxiosErrors","res","Error","success","message","AxiosGetAndPush","params","requestUrl","pushUrl","axios","get","catch","err","JSON","stringify","data","body","fetchPageData","headersParams","errorUrl","SubmitFile","metadata","formData","accessToken","getPresignedUrlUrl","requestPayload","Authorization","file","uploadTe","tissue","researcher","published","publication","response","signedURL","url","Object","defineProperty","writable","value","key","put","useDetectOutsideClick","require","default","el","initialState","isActive","setIsActive","useEffect","pageClickEvent","e","current","contains","target","addEventListener","removeEventListener","collectUniqueValsFun","columnsToFilter","collectUniqueVals","columnHeader","fieldValue","includes","FilterOut","excludeRow","filterVal","createLinkItem","columnsHaveLinks","linkPathEnd","fieldValueFIN","Array","isArray","useTableScript","tableData","colParams","itemsPerPageIn","numPageNumbers","rowActions","itemsPerPage","setItemsPerPage","currentPage","setCurrentPage","sortBy","setSortBy","actionString","setActionString","customColumns","columnHeaders","columnHeadersFinal","name","arr","desc","sortedTableData","col","sort","b","a2","toString","b2","localeCompare","handleSortBy","i","indexOf","innerHTML","sortByCol","onSelectRow","actionStringTmp","index","currentTarget","rowNodes","parentNode","childNodes","lastChild","getHtmlRowFieldByIndex","colIndex","objForFilterState","length","filters","setFilters","rowList","k","entry","rowScript","fieldScript","j","hasLink","keys","args","unshift","type","onChange","paginatedRowList","size","reduce","acc","val","idx","Math","floor","paginateList","pagesCutOff","numPages","start","end","ceiling","ceil","startEndPaginateLinks","linkNewPage","id","Number","pageLinks","onClick","handleFilter","filtersNew","filterDropdowns","entries","map","filterVariables","filterOptions","option","headersScript","header","actionsMenu","itemsPerPageEl","finalTable","deleteFileData","fetchData","setData","accountRequestInput","actionsOptionsConstructor","setRowActions","headers","post","resp","AccountPage","setToken","linkTo","refCol","linkIfOtherColEq","textToMatch","style","color","customClasses","then","dataTable","TeResultsPageInfoTable","item","cancer","validated","TeResultsPage","match","fileid","fileId","fetchDataInput","filterDropdownsRaw","filterLabels","filterVariable","DnaSearchResults","excludeColumnHeader","proteins","split","excludeRow_ListCheck","protein","filter_bool","FilterDNAProts","processedData","prot_idURL","protURL","listOffSet","prev","prot_id","protIdLink","protspl","prot","protLinks","dna_id","processDNAQueryProts","parse","ProteinSearchResults","dataResponse","query","string_divider","baseurl","vals","fieldScriptTmp","fieldSubValue","MultiValStringColLink","proteinQueryTable","DropdownMenu","dropdownRef","useRef","options","route","title","function","classes","ref","heading","config","Navbar","loginWithRedirect","logout","isAuthenticated","handleSubmit","preventDefault","setMobileSearchBarActive","search","search_input","queryApiUrl","mobileSearchBarActive","dropdownMobileRef","mobileToolsActive","setMobileToolsActive","toolOptions","signInOption","signedInOptions","origin","signOut","logoutAwsAndAuth0","src","onSubmit","placeholder","downArrow","accountIcon","NavbarSearchResultItems","items","pathName","entity","NavbarSearchResults","classResultsScript","rtClass","description","substr","dnaResultsScript","dna_ids","familiesResultsScript","families","proteinResultsScript","prot_idResultsScript","prot_ids","LoadingBox","InlineMessage","show","QueryFormPage","loading","setLoading","loadingBoxTitle","setLoadingBoxTitle","loadingBoxMessage","setLoadingBoxMessage","showMessage","setShowMessage","setMessage","setFile","setTissue","setCancer","setPublished","setPublication","setResearcher","inputType","setInputType","setUploadTe","onInputTypeChange","onUploadTeChange","handleSubmitFile","String","sequenceInputFields","uploadTeAtlasBool","for","checked","publicationInput","fileInputMetaDataField","fileInputFields","files","inputFields","queryForm","seqType","sequenceType","seq","valid","invalidCharMsg","toUpperCase","RegExp","test","ValidateSequence","FileUploadSuccess","ClassDetail","setRtClass","setProteins","setFamilies","setDescription","proteinsScript","familiesScript","family","descriptionScript","paragraph","FamilyDetail","family_id","setFamily","dnaListScript","ProteinNameDetail","knownprotein","setProtein","proteinFunction","setProteinFunction","sequence","setSequence","uniprotAccession","setUniprotAccession","accession","proteinFunctionScript","ProteinRecordDetail","protein_id","protId","dnaId","setDnaId","coords","setCoords","knownProt","setKnownProt","prot_seq","known_prot","proteinNameListScript","proteinName","tmp","proteinFunctions","DnaDetail","setId","proteinRecords","setProteinRecords","dna_seq","protein_data","proteinScript","protrec","protnames","TeGraphComponent","tissueSelectedGet","tissueSelected","counts","FetchData","chartContainer","setChartInstance","chartConfig","responsive","maintainAspectRatio","labels","datasets","label","values","borderWidth","backgroundColor","scales","yAxes","ticks","beginAtZero","precision","newChartInstance","Chartjs","TeContainer","setTissueSelected","signUpIn","Documentation","queryRawSeq","queryRawSeqSmall","LoginRedirect","aws_config","Amplify","configure","App","exact","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f4e73091.chunk.js","sourcesContent":["// src/auth/auth0-provider-with-history.js\r\n\r\nimport React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Auth0Provider } from \"@auth0/auth0-react\";\r\n\r\nconst Auth0ProviderWithHistory = ({ children }) => {\r\n    const domain = process.env.REACT_APP_AUTH0_DOMAIN;\r\n    const clientId = process.env.REACT_APP_AUTH0_CLIENT_ID;\r\n\r\n    const history = useHistory();\r\n\r\n    const onRedirectCallback = (appState) => {\r\n        history.push(appState?.returnTo || window.location.pathname);\r\n    };\r\n\r\n    return (\r\n        <Auth0Provider\r\n            domain={domain}\r\n            clientId={clientId}\r\n            redirectUri={\"http://localhost:3000/loginredirect\"}\r\n            onRedirectCallback={onRedirectCallback}\r\n            audience=\"https://sls-retrobase\"\r\n            scope=\"get:data\"\r\n        >\r\n            {children}\r\n        </Auth0Provider>\r\n    );\r\n};\r\n\r\nexport default Auth0ProviderWithHistory;","const ErrorPage = (props) => {\r\n    console.log(props)\r\n    return(\r\n        <section>\r\n            <div className=\"box\">\r\n                <h3>Error Occured: </h3><span>{props.location?.state?.error ? props.location.state.error : \"Unspecified Error\"}</span>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default ErrorPage","import { Route } from 'react-router-dom'\r\nimport { ErrorBoundary } from 'react-error-boundary'\r\nimport ErrorPage from './ErrorPage'\r\n\r\nconst RouteWithErrorBoundary = (props) => {\r\n    return (\r\n        <ErrorBoundary key={props.location?.pathname}\r\n            FallbackComponent = {ErrorPage}\r\n        >\r\n            <Route {...props} />\r\n        \r\n        </ErrorBoundary>\r\n    );\r\n};\r\n\r\nexport default RouteWithErrorBoundary","import React from 'react'\r\n\r\nconst NotFound = () => {\r\n    return (\r\n        <section>\r\n            <div className=\"box\">\r\n                <p>404 Error: No page exists at this URL</p>            \r\n            </div>\r\n        </section>\r\n    )\r\n};\r\n\r\nexport default NotFound","import { Auth } from 'aws-amplify';\r\nimport jwtDecode from 'jwt-decode';\r\n\r\nexport const signIn = async (email, password, fromURL, history) => {\r\n    try {\r\n        await Auth.signIn(email, password);\r\n        history.push(fromURL)\r\n        return {\r\n            success: true,\r\n            message: \"Successfully signed in\"\r\n        }\r\n    } catch (error) {\r\n        if (error.code === \"NotAuthorizedException\") {\r\n            return {\r\n                success: false,\r\n                message: \"Incorrect email or password\"\r\n            }\r\n        } else if (error.code === \"UserNotConfirmedException\") {\r\n            return {\r\n                success: false,\r\n                message: \r\n                    <div>\r\n                        <p>Registration attempted with this email. Email needs validating.</p>\r\n                        <p>To resend confirmation code, \r\n                            <span class=\"PageNumberLinks\" onClick={\r\n                                () => resendConfirmationCode(email, fromURL, history)\r\n                            }>click here</span>\r\n                        </p>\r\n                    </div>\r\n            }\r\n        } else if (error.code === \"NetworkError\") {\r\n            return {\r\n                success: false,\r\n                message: \"NetworkError: Check internet connection\"\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const signUp = async (email, password, fromURL, history) => {\r\n    try {\r\n        await Auth.signUp({ username: email, password, attributes: { \"email\": email } })\r\n        history.push({\r\n            pathname: '/confirmsignup',\r\n            state: {\r\n                \"username\": email,\r\n                \"from\": fromURL\r\n            }\r\n        });\r\n    } catch (error) {\r\n        console.log(\"Error signing up: \", error)\r\n        if (error.code === \"UsernameExistsException\") {\r\n            return {\r\n                success: false,\r\n                message: (\r\n                    <div>\r\n                        <p>Email already registered.</p>\r\n                        <p>If you attempted to register this email and need to validate it,  \r\n                            <span class=\"PageNumberLinks\" onClick={\r\n                                () => resendConfirmationCode(email, fromURL, history)\r\n                            }>click here</span>\r\n                        </p>\r\n                    </div>\r\n                )\r\n            }\r\n        } else { \r\n            return {\r\n                success: false,\r\n                message: \"Unknown error\"\r\n            }\r\n        }\r\n    };\r\n};\r\n\r\nexport const confirmSignUp = async (username, confirmation, fromURL, history) => {\r\n    try {\r\n        await Auth.confirmSignUp(username, confirmation);\r\n        history.push({\r\n            pathname: '/signin',\r\n            state: {\r\n                \"from\": fromURL,\r\n                \"success\": true,\r\n                \"successMessage\": \"Account registered! You may now sign in.\"\r\n            }\r\n        })\r\n    } catch (error) {\r\n        if (error.code === \"CodeMismatchException\") {\r\n            return {\r\n                success: false,\r\n                message: \"Incorrect code\"\r\n            }\r\n        } else if (error.code === \"NetworkError\") {\r\n            return {\r\n                success: false,\r\n                message: \"NetworkError: Check internet connection\"\r\n            }            \r\n        }\r\n    }\r\n}\r\n\r\nconst resendConfirmationCode = async (email, fromURL, history) => {\r\n    console.log(\"email: \", email)\r\n    console.log(\"fromURL: \", fromURL)\r\n    console.log(\"history: \", history)\r\n    try {\r\n        await Auth.resendSignUp(email);\r\n        history.push({\r\n            pathname: '/confirmsignup',\r\n            state: {\r\n                \"username\": email,\r\n                \"from\": fromURL\r\n            }\r\n        });\r\n    } catch (error) {\r\n        console.log(error.code)\r\n        if (error.code === \"InvalidParameterException\"){\r\n            \r\n            return {\r\n                success: false,\r\n                message: error.message\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const fetchAwsCreds =  (Auth0Params) => {\r\n    const { token, sub, domain, email } = Auth0Params; // get the user credentials and info from auth0\r\n    const { exp } = jwtDecode(token); // Please decode the id token in order to get the expiration time\r\n\r\n    return Auth.federatedSignIn(\r\n        domain, // The Auth0 Domain,\r\n        {\r\n            token: token,\r\n            expires_at: exp * 1000 // the expiration timestamp\r\n        },\r\n        {\r\n            sub,\r\n            email\r\n        }\r\n    )\r\n}\r\n\r\nexport const awsCognitoSignin = async (user, getAccessTokenSilently, domain) => {\r\n    const token = await getAccessTokenSilently();\r\n    const { exp } = jwtDecode(token);\r\n    console.log(domain)\r\n    return Auth.federatedSignIn(\r\n        domain, // The Auth0 Domain,\r\n        {\r\n            token: token,\r\n            expires_at: exp * 1000 // the expiration timestamp\r\n        },\r\n        {\r\n            sub: user.sub\r\n        }\r\n    );\r\n}\r\n\r\nexport const logoutAwsAndAuth0 = (logout) => {\r\n    logout({ returnTo: window.location.origin })\r\n    Auth.signOut()\r\n}","import axios from 'axios'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport LoginButton from './Auth/LogInButton'\r\nimport LogoutButton from './Auth/LogOutButton'\r\nimport SignupButton from './Auth/SignupButton'\r\nimport { fetchAwsCreds } from './Auth/AuthFunctions'\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\nimport AWS from 'aws-sdk';\r\n\r\n\r\nconst HomePage = () => {\r\n\r\n    const [rtClasses, setRtClasses] = useState([]);\r\n    const { user, getAccessTokenSilently } = useAuth0();\r\n\r\n    return (\r\n            <section className=\"home-page\">\r\n                <div className=\"box\">\r\n                <div className=\"title-section\">\r\n                        <h1>Retrobase</h1>\r\n                            <p>Retrobase is a database of retrotransposon DNA sequences acquired from UCSC Table Browser and proteins translated <i>in silico</i> from these sequences. All protein name labels are predicted using psi-BLAST. Retrobase serves to make these sequences queriable aid in identification of retroviral sequences in proteomic assays. </p>\r\n                        <h3>The Purpose of The Project</h3>\r\n                            <p>I am undertaking this project as a vehicle to develop my skills in serverless application design and development.</p>\r\n                            <p>For more information on the project, <Link to=\"/documentation/\">click here</Link>.</p>\r\n                    </div>\r\n                    <div className=\"text-boxes\">\r\n                    <div className=\"text-section\">\t\r\n                            <h2>Data Available</h2>\r\n                            <p>The database is a prototype and presently contains data on the following retrotransposon classes:</p>\r\n                            <ul>\r\n                                <li><Link to={\"/class/\" + \"ERV\"}>ERV</Link></li>\r\n                            </ul>\r\n                        </div>\r\n                        <div class=\"text-section\">\r\n                            <h2 className=\"UnderLineHover\"><Link to=\"/query/\"> Query Tool</Link></h2>\r\n                            <p>Querying Retrobase allows exact matching of query sequences (whole or partial) to sequences in the database for identification of retroviral proteins. Queries can be of raw single sequences or MZID-formatted files containing many sequences.</p>\r\n                        </div>\r\n                        <div class=\"text-section\">\r\n                            <h2><a class=\"UnderLineHover\" href='#'>Evolutionary Trees</a></h2>\r\n                            <p>Tool currently unavailable.</p>\r\n                            <p>Evolutionary Trees is a tool for viewing the evolutionary relationships between families of retrotransposons of a given class/superfamily.</p>\r\n                        </div>\r\n                        <div class=\"text-section\">\r\n                            <h2><a class=\"UnderLineHover\" href='#'>Tissue Expression Atlas</a></h2>\r\n                            <p>Tool currently unavailable</p>\r\n                            <p>The Tissue Expression Atlas is tool for community sourcing data on the tissue specificity of expression of retrotransposon protein sequence variants.</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n    )\r\n}\r\n\r\nexport default HomePage","import axios from 'axios';\r\n\r\nexport const handleAxiosErrors = (res) => {\r\n    if (!(res instanceof Error)) {\r\n        return {\r\n            success: true,\r\n            message: \"No error\"\r\n        }\r\n    }\r\n\r\n    switch (res.message) {\r\n        case \"Network Error\":\r\n            return {\r\n                success: false,\r\n                message: \"Network error: Check internet connection\"\r\n            }\r\n        default:\r\n            return {\r\n                success: false,\r\n                message: res.message\r\n            }\r\n    }\r\n}\r\n\r\nexport const AxiosGetAndPush = async (params, requestUrl, pushUrl, history) => {\r\n\r\n        const res = await axios.get(requestUrl, { params: params }).\r\n            catch(res => res)\r\n        const err = handleAxiosErrors(res)\r\n        if ( !err.success ) return err\r\n\r\n        history.push(\r\n            {\r\n                pathname: pushUrl,\r\n                state: { \"data\": JSON.stringify(res.data.body) }\r\n            }\r\n        )\r\n        return {\r\n            success: true,\r\n            message: \"No error\"\r\n        }\r\n}\r\n\r\n// Wait x amount of miliseconds before next line\r\nexport const delay = ms => new Promise(res => setTimeout(res, ms));\r\n\r\n\r\nexport const fetchPageData = async ({ headersParams, requestUrl, errorUrl, history}) => {\r\n    try {\r\n        const res = await axios.get(\r\n            requestUrl,\r\n            headersParams\r\n        )\r\n        return res.data\r\n    } catch (error) {\r\n        history.push({\r\n            pathname: errorUrl,\r\n            state: {\r\n                error:\r\n                    error.message === \"Network Error\"\r\n                        ? \"Network Error; Check internet connection\"\r\n                        : \"Unspecified Error\"\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nexport const SubmitFile = async ({metadata, formData, accessToken, getPresignedUrlUrl, history, pushUrl}) => {\r\n\r\n    const requestPayload = {\r\n        \"headers\": {\r\n            Authorization: `Bearer ${accessToken}`,\r\n        },\r\n        \"params\": metadata\r\n    }\r\n\r\n    if (!formData.file) {\r\n        return {\r\n            success: false,\r\n            message: \"Please select a file\"\r\n        }\r\n    }\r\n\r\n    if (metadata.uploadTe === \"Yes\" && (!metadata.tissue || !metadata.researcher || (metadata.published === \"Yes\" && !metadata.publication))) {\r\n        return {\r\n            success: false,\r\n            message: \"You have missed some form fields\"\r\n        }\r\n    }\r\n    try {\r\n        const response = await axios.get(getPresignedUrlUrl, requestPayload)\r\n        const signedURL = response.data.url\r\n        //rename file to key for presigned upload\r\n        Object.defineProperty(formData.file, 'name', {\r\n            writable: true,\r\n            value: response.data.key\r\n        });\r\n        await axios.put(signedURL, formData.file)\r\n        history.push(\"/filesentsuccess\")\r\n        return {\r\n            success: true,\r\n            message: \"Success!\"\r\n        }\r\n    } catch (error) {\r\n        return {\r\n            success: false,\r\n            message: \"Network Error\"\r\n        }\r\n    }\r\n}\r\n\r\n","import { useState, useEffect } from 'react';\r\n\r\nexport const useDetectOutsideClick = (el, initialState) => {\r\n    const [isActive, setIsActive] = useState(initialState);\r\n\r\n    useEffect(() => {\r\n        const pageClickEvent = (e) => {\r\n            // If the active element exists and is clicked outside of\r\n            if (el.current !== null && !el.current.contains(e.target)) {\r\n                setIsActive(!isActive);\r\n            }\r\n        };\r\n\r\n        // If the item is active (ie open) then listen for clicks\r\n        if (isActive) {\r\n            window.addEventListener('click', pageClickEvent);\r\n        }\r\n\r\n        return () => {\r\n            window.removeEventListener('click', pageClickEvent);\r\n        }\r\n\r\n    }, [isActive, el]);\r\n\r\n    return [isActive, setIsActive];\r\n}","const aws4 = require(\"aws4\")\r\nconst apigClientFactory = require('aws-api-gateway-client').default;\r\n\r\nexport const signedRequest = () => {\r\n    //pathParams = params to be submitted with request\r\n    //apiParams.pathTemplate = resource path\r\n    //apiParams.invokeUrl = all api endpoint url before resource\r\n    const credentials = {\r\n        \"secretKey\": \"8y7prG6GlN25i4kDrnbPZtERh9WXHzquS920SFRa\",\r\n        \"accessKey\": \"ASIAW4LZZGHMKWECJWJ2\",\r\n        \"sessionToken\": \"IQoJb3JpZ2luX2VjEIb//////////wEaCXVzLWVhc3QtMSJHMEUCIARmlOs6BVsth1hcQQV3t/f8/WzHRHXOdbut6790xvY9AiEAnwYV5bsE7+28PDzB7+zK6NZoL06vEiUARYKSQP25WtEqqgQI3///////////ARABGgw0NzMyMzg2ODAwMjQiDIq06DByw8JOKdGcTCr+A/tOWKnam3UbIDPCcQa4+nERq0nOa2Cn9DYDgaVYb6Lprp2mL9gJcI5JAyjRAjSOda8QsUeYsfnzi/2O2fNUG4FFDhZM2IiP5++wuLpOZEltLZVfdv30BjFDVQf2Vwryqh9TY1jXcy7LJpPwHtwzNVO4sFDTEvhTd2pv7aGwqVGMNZReMijLXMHrMteG7EDBdugsC3+phdy726aGdGa+1SfdsTWtYPzer9i66XspVWl9jxDD566qbK2qo2C3gcV6hIPlzXVFYw5qKWDA5rxtUD7FOwdi7f3/G0zpW7FbAjx6x0xsLm3NtVM8gj0agWh3TCJdPpc7SzR9Bkfg7S476lsLIYRM+LHXzc6NkXdjRHQ+4//CjLA/okWostumu6i0Xv0VWJ7nB2HQDOU9wo/PKPaEGo/+U8kVdrEz5T3WTmV48pEzealwYEPFUqHgbcGrW82NeLcmlzJEz1f0sGruRjwmcY5BdwUV1JXMu/LQKmtk29GUqSH29iMy+6sB/y0jtl08fZnNOveibu9tmiVo5OoUtETFvGWCTkMhm3XfjA0OikspWQX2Zh+OUqBE7JfFq1IH+oPXT2sPGd6en5vkDz+5k/iK2mn2N6EV9kCH4P8s3BDPOsFVbTED57715p2DmqtvxlCoJn3h5os7AYcoeaIv0zMrluPCFfHueXO7NjCunNiDBjqFAmuG7RQJY/ZoBJYSBXHWvNErv5ZBk0ySqUnkImbrZSaQq6bk1mSbbNzrv6caJ5dG+HIjpLl5cSrzh/jnf1groQgcTt4nTWJb5uiLq4US9sIuizBXookXHExgIJj47GjlSDOZkStD954Wz0WTwVoRSId3DfYrmnLfvfqwrTpfja75AkUx5vlbFBEb2jB8NHW8rb1Ui/OTXMTPCupacTL4bUL3R2FRkkbn0WUcM1aacS4xu6nHOWtLn6kDz8zgD98/w6BO9PhegXeQIG8QGjXk3VFB5PnR73UipElQGVtkAAa7UIKBWrgGnlgcTt5P1ua/AN6s5h/ZM6nzr/atiyqfwTohawM+aQ==\"\r\n    }\r\n    const apiParams = \r\n        {\r\n            \"invokeUrl\": \"https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev\",\r\n            \"pathTemplate\": \"/teuploadcheckstatus\"\r\n        }\r\n    const pathParams = {}\r\n\r\n    var apigClient = apigClientFactory.newClient({\r\n        invokeUrl: apiParams.invokeUrl,\r\n        accessKey: credentials.accessKey,\r\n        secretKey: credentials.secretKey,\r\n        sessionToken: credentials.sessionToken,\r\n        region: \"us-east-1\"\r\n    });\r\n\r\n    var resp = apigClient.invokeApi(pathParams, apiParams.pathTemplate, \"GET\")\r\n        .then(resp => {\r\n            console.log(resp)\r\n            return resp\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n        })\r\n\r\n}","import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport DropDown from './drop-down'\r\n\r\n\r\nexport function collectUniqueValsFun(columnsToFilter, collectUniqueVals, columnHeader, fieldValue) {\r\n    //Collect values for filter options\r\n    if (columnsToFilter.includes(columnHeader)) {\r\n        if (!(collectUniqueVals[columnHeader].includes(fieldValue))) {\r\n            collectUniqueVals[columnHeader].push(fieldValue)\r\n        }\r\n    }\r\n};\r\n\r\nexport function FilterOut(excludeRow, value, filterVal, columnHeader, columnsToFilter) {\r\n    //If filter has been applied, rows without filtering value excluded\r\n    if (excludeRow) {\r\n        return true\r\n    }\r\n    if (columnsToFilter.includes(columnHeader)\r\n        && !(filterVal === value)\r\n        && !(filterVal === \"No Filter\")\r\n    ) { return true }\r\n    return false\r\n}\r\n\r\nexport function createLinkItem(fieldValue, columnHeader, columnsHaveLinks) {\r\n    let linkPathEnd = columnsHaveLinks[columnHeader][\"linkPathUseSelf\"]\r\n        ? fieldValue\r\n        : fieldValue[1];\r\n\r\n    let fieldValueFIN = Array.isArray(fieldValue)\r\n        ? fieldValue[1]\r\n        : fieldValue\r\n    return <Link to={columnsHaveLinks[columnHeader][\"basePath\"] + linkPathEnd}>{fieldValueFIN}</Link>\r\n}\r\n\r\nexport function paginateList(arr, size) {\r\n    return arr.reduce((acc, val, i) => {\r\n        let idx = Math.floor(i / size)\r\n        let page = acc[idx] || (acc[idx] = [])\r\n        page.push(val)\r\n        return acc\r\n    }, [])\r\n}\r\n\r\nexport function startEndPaginateLinks(pagesCutOff, numPages, currentPage) {\r\n    //Calculates cutoffs for page number links\r\n    var start,\r\n        end,\r\n        ceiling = Math.ceil(pagesCutOff / 2),\r\n        floor = Math.floor(pagesCutOff / 2);\r\n\r\n    if (numPages < pagesCutOff) {\r\n        start = 0;\r\n        end = numPages;\r\n    } else if (currentPage >= 0 && currentPage <= ceiling) {\r\n        start = 0;\r\n        end = pagesCutOff;\r\n    } else if ((currentPage + floor) >= numPages) {\r\n        start = (numPages - pagesCutOff);\r\n        end = numPages;\r\n    } else {\r\n        start = (currentPage - ceiling);\r\n        end = (currentPage + floor);\r\n    }\r\n\r\n    return [start, end]\r\n}\r\n\r\nexport const sortArrayOfObjs = (arr, key, desc) => {\r\n    const sorted = arr.sort((a, b) => {\r\n        var a2 = a[key].toString()\r\n        var b2 = b[key].toString()\r\n        if (desc) { \r\n            return b2.localeCompare(a2) \r\n        } else {\r\n            return a2.localeCompare(b2)\r\n        }\r\n    });\r\n    return sorted\r\n}\r\n\r\nconst getHtmlRowFieldByIndex = (e, index) => {\r\n    console.log(e.currentTarget)\r\n    var rowNodes = e.currentTarget.parentNode.parentNode.childNodes\r\n    console.log(rowNodes[index])\r\n    var field = rowNodes[index].lastChild.innerHTML\r\n    return field\r\n}\r\n\r\n\r\nconst useTableScript = ({tableData, colParams, itemsPerPageIn = 10, numPageNumbers = 11, rowActions=null}) => {\r\n    const [itemsPerPage, setItemsPerPage] = useState(itemsPerPageIn);\r\n    const [currentPage, setCurrentPage] = useState(0);\r\n    const [sortBy, setSortBy] = useState({\"col\": null, \"desc\": true})\r\n    const [actionString, setActionString] = useState(null)\r\n\r\n    const { columnsHaveLinks, columnsToFilter, customColumns, columnHeaders, columnHeadersFinal } = colParams\r\n\r\n    if (!columnHeaders) {\r\n        throw { name: \"MissingArgumentException\", message: \"columnHeaders key missing from params\" }\r\n    }\r\n    if (!typeof (columnHeaders) === \"array\") {\r\n        throw {\r\n            name: \"InvalidTypeException\", message: \"columnHeaders value must be array of strings\"\r\n        }\r\n    }\r\n\r\n\r\n    const sortedTableData = sortBy.col\r\n        ? sortArrayOfObjs(tableData, sortBy.col, sortBy.desc)\r\n        : tableData\r\n\r\n    const handleSortBy = (e) => {\r\n        const i = colParams.columnHeadersFinal.indexOf(e.target.innerHTML)\r\n        const sortByCol = colParams.columnHeaders[i]\r\n        setSortBy(\r\n            {\r\n                \"col\": sortByCol,\r\n                \"desc\": sortByCol === sortBy.col ? !sortBy.desc : true\r\n            })\r\n    }\r\n\r\n    const onSelectRow = (e) => {\r\n        var index = rowActions.colIndex;\r\n        var actionStringTmp = getHtmlRowFieldByIndex(e, index)\r\n        console.log(actionStringTmp)\r\n        setActionString( actionStringTmp )\r\n    }\r\n\r\n\r\n    // Prepare to collect filter options\r\n    var collectUniqueVals = {}\r\n    var objForFilterState = {}\r\n    for (var i = 0; i < columnsToFilter.length; i++) {\r\n        collectUniqueVals[columnsToFilter[i]] = [\"No Filter\"];\r\n        objForFilterState[columnsToFilter[i]] = \"No Filter\";\r\n    }\r\n    const [filters, setFilters] = useState(objForFilterState)\r\n\r\n    var rowList = [] // collect table rows\r\n    // iteratively create table rows\r\n\r\n\r\n\r\n    for (var k = 0; k < sortedTableData.length; k++) {\r\n        var excludeRow = false;\r\n        var entry = sortedTableData[k];\r\n\r\n        // iterate over column headers\r\n        var rowScript = [];\r\n        var fieldValue = null\r\n        var fieldScript = null;\r\n\r\n        for (var j = 0; j < columnHeaders.length; j++) {\r\n            var columnHeader = columnHeaders[j]\r\n            var fieldValue = entry[columnHeader]\r\n\r\n            const hasLink = Object.keys(columnsHaveLinks).includes(columnHeader)\r\n\r\n            if (Object.keys(customColumns).includes(columnHeader)) {\r\n                var args = {\r\n                    fieldValue, \r\n                    columnHeader, \r\n                    excludeRow, \r\n                    columnsToFilter, \r\n                    filters, \r\n                    collectUniqueVals,\r\n                    entry\r\n                }\r\n                var [fieldScript, excludeRow, collectUniqueVals] = customColumns[columnHeader](args)\r\n\r\n            } else if (hasLink) {\r\n\r\n                fieldScript = (\r\n                    <td>\r\n                        {createLinkItem(entry[columnHeader], columnHeader, columnsHaveLinks)}\r\n                    </td>\r\n                )\r\n                fieldValue = columnsHaveLinks[columnHeader][\"linkPathUseSelf\"]\r\n                    ? entry[columnHeader]\r\n                    : entry[columnHeader][1];\r\n\r\n                collectUniqueValsFun(columnsToFilter, collectUniqueVals, columnHeader, fieldValue)\r\n\r\n                excludeRow = FilterOut(excludeRow, fieldValue, filters[columnHeader], columnHeader, columnsToFilter)\r\n\r\n            } else {\r\n                fieldValue = entry[columnHeader]\r\n                excludeRow = FilterOut(excludeRow, fieldValue, filters[columnHeader], columnHeader, columnsToFilter)\r\n                collectUniqueValsFun(columnsToFilter, collectUniqueVals, columnHeader, fieldValue)\r\n                fieldScript = <td>{fieldValue}</td>\r\n            }\r\n\r\n            //Add field to row\r\n            if (fieldScript) {\r\n                rowScript.push(fieldScript)\r\n            }\r\n        }\r\n        if (rowActions) rowScript.unshift(\r\n            <td><input type=\"radio\" name=\"row\" onChange={onSelectRow}></input></td>\r\n        )\r\n        // Add row or filter out\r\n        if (!excludeRow) rowList.push(<tr>{rowScript}</tr>)\r\n    }\r\n\r\n    // Pagination //\r\n\r\n    let paginatedRowList = paginateList(rowList, itemsPerPage);\r\n    const [start, end] = startEndPaginateLinks(numPageNumbers, paginatedRowList.length, currentPage)\r\n\r\n    const linkNewPage = (e) => {\r\n        if (e.target.id === \"prev\") {\r\n            setCurrentPage(currentPage - 1)\r\n        } else if (e.target.id === \"next\") {\r\n            setCurrentPage(currentPage + 1)\r\n        } else {\r\n            setCurrentPage(Number(e.target.id))\r\n        }\r\n    }\r\n\r\n    var pageLinks = []\r\n    for (var a = start; a < end; a++) {\r\n        pageLinks.push(\r\n            <li\r\n                className={`PageNumberLinks ${a === currentPage ? \"active\" : \"\"} pagination-link`}\r\n                id={a}\r\n                onClick={linkNewPage}\r\n            >\r\n                {a + 1}\r\n            </li>\r\n        )\r\n    }\r\n\r\n    if (currentPage !== 0) {\r\n        pageLinks.unshift(<li className=\"PageNumberLinks pagination-link\" id={\"prev\"} onClick={linkNewPage}>Prev</li>)\r\n    }\r\n    if (currentPage !== end - 1) {\r\n        pageLinks.push(<li className=\"PageNumberLinks pagination-link\" id={\"next\"} onClick={linkNewPage}>Next</li>)\r\n    }\r\n\r\n\r\n    // Filters\r\n\r\n    // Use state to set filter values when user selects them\r\n    const handleFilter = (e) => {\r\n        const filtersNew = { ...filters }\r\n        filtersNew[e.target.id] = e.target.value\r\n        setFilters(filtersNew)\r\n        setCurrentPage(0)\r\n    }\r\n\r\n    // Create filter option dropdowns\r\n    const UniqueVals = Object.entries(collectUniqueVals)\r\n    var filterDropdowns = UniqueVals.map(filterVariables => {\r\n        var columnHeader = filterVariables[0]\r\n        filterVariables = filterVariables[1];\r\n        const filterOptions = filterVariables.map(option => {\r\n            return (\r\n                <option id={option} key={option}>\r\n                    {option}\r\n                </option>\r\n            )\r\n        });\r\n\r\n        return <select key={columnHeader} id={columnHeader} onChange={handleFilter}>{filterOptions}</select>\r\n    });\r\n    const headers = columnHeadersFinal ? columnHeadersFinal : columnHeaders // use key values if columnHeadersFinal input\r\n    const headersScript = headers.map(header => {\r\n        return <th scope=\"column\" onClick={handleSortBy}>{header}</th>\r\n    })\r\n    if (rowActions) headersScript.unshift(<th></th>) //include empty column header for row select\r\n\r\n    const handleItemsPerPageChange = (e) => {\r\n        if (e.target.value === \"All\") {\r\n            setItemsPerPage(tableData.length)\r\n        } else {\r\n            setItemsPerPage(Number(e.target.value))\r\n        }\r\n    }\r\n\r\n    const itemsPerPageEl = (\r\n        <select onChange={handleItemsPerPageChange}>\r\n            <option>10</option>\r\n            <option>50</option>\r\n            <option>100</option>\r\n            <option>All</option>\r\n        </select>\r\n    )\r\n\r\n    const finalTable = (\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    {headersScript}\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                {paginatedRowList[currentPage]}\r\n            </tbody>\r\n        </table>\r\n    )\r\n    \r\n    var actionsMenu\r\n    if (rowActions){\r\n        actionsMenu = <button onClick={() => rowActions.deleteFileData(actionString)}>Delete Data</button>\r\n    }\r\n\r\n    return [finalTable, filterDropdowns, pageLinks, itemsPerPageEl, actionsMenu]\r\n}\r\n\r\nexport default useTableScript\r\n","import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\nimport { fetchPageData } from \"../functions/functions\"\r\nimport { signedRequest, makeSignedRequest,  } from \"../functions/awsFunctions\"\r\nimport { customClasses, linkIfOtherColEq } from \"../components/react-table-creator/CustomColumnFunctions\"\r\nimport useTableScript from \"../components/react-table-creator/react-table-creator\"\r\nconst config = require('../jsconfig.json')\r\n\r\nconst fetchData = async function (token, history, setData) {\r\n    const accountRequestInput = {\r\n        headersParams: {\r\n            \"params\": {},\r\n            \"headers\": {\r\n                Authorization: `Bearer ${token}`,\r\n            }\r\n        },\r\n        requestUrl: `https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/teuploadcheckprogress/`,\r\n        errorUrl: \"/error\",\r\n        history: history\r\n    }\r\n    const data = await fetchPageData(accountRequestInput)\r\n    console.log(data.body)\r\n    setData(data.body)\r\n}\r\n\r\nconst  actionsOptionsConstructor = async (token, setRowActions) => {\r\n    // create function that takes string to submit as file_id\r\n    const deleteFileData = async (actionString) => {\r\n        const url = 'https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/teremovemziddata/'\r\n        const data = { \"file_id\": actionString }\r\n        const headers = { \"headers\": { \"Authorization\": `Bearer ${token}` } }\r\n        console.log(url, data, headers)\r\n        var resp = await axios.post(url, data, headers)\r\n        console.log(resp)\r\n    }\r\n    const actionsOptions = {\r\n        \"colIndex\": 2, // index of file_id\r\n        \"deleteFileData\": (actionString) => deleteFileData(actionString)\r\n    }\r\n    setRowActions(actionsOptions)\r\n}\r\n\r\nconst AccountPage = (props) => {\r\n    const { user, getAccessTokenSilently} = useAuth0();\r\n    const [data, setData] = useState([]);\r\n    const [token, setToken] = useState(null)\r\n    const [rowActions, setRowActions] = useState(null)\r\n\r\n    const colParams = {\r\n        columnHeaders: [\r\n            \"file_name\",\r\n            \"file_id\",\r\n            \"progress\",\r\n            \"num_peptides\"\r\n        ],\r\n        columnsHaveLinks: {},\r\n        columnsToFilter: [],\r\n        columnHeadersFinal: [\r\n            \"File Name\",\r\n            \"File ID\",\r\n            \"Status\",\r\n            \"Peptides Matched\"\r\n        ],\r\n        customColumns: {\r\n            \"file_id\": (args) => {\r\n                const linkTo = \"/fileresults/\";\r\n                const refCol = \"progress\";\r\n                return linkIfOtherColEq(args, linkTo, refCol)\r\n            },\r\n            \"progress\": (args) => {\r\n                const params = {\r\n                    \"complete\": \"green\",\r\n                    \"active\": \"purple\",\r\n                    \"failed\": \"red\"\r\n                }\r\n                return customClasses(args, params)\r\n            }\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        getAccessTokenSilently().then(\r\n            token=> setToken(token)\r\n        )\r\n\r\n        if (user && token){\r\n            actionsOptionsConstructor(token, setRowActions).then(\r\n                () => fetchData(token, props.history, setData)\r\n            )\r\n        }\r\n    }, [user, token]);\r\n\r\n    \r\n    var [dataTable, filterDropdownsRaw, pageLinks, itemsPerPage, actionsMenu] = useTableScript({\"tableData\": data, colParams, rowActions})\r\n\r\n    return (\r\n        <section>\r\n            <div className=\"box\">\r\n                <h1>My Account</h1>\r\n                <h3>File Analysis Progress</h3>\r\n                <div><>{actionsMenu && actionsMenu}</><button onClick={() => fetchData(token, props.history, setData)}>Refresh</button></div>\r\n                <div className=\"querytable\">\r\n                    {dataTable && dataTable}                    \r\n                </div>\r\n                <div className=\"page-numbers-container\">{pageLinks && pageLinks}</div>\r\n                <span>Items per page: {itemsPerPage && itemsPerPage}</span>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default AccountPage","import { TokenFileWebIdentityCredentials } from 'aws-sdk'\r\nimport { Link } from 'react-router-dom'\r\nimport { FilterOut, collectUniqueValsFun } from './react-table-creator'\r\n\r\n\r\nexport function MultiValStringColLink({ fieldValue, columnHeader, excludeRow, columnsToFilter, filters, collectUniqueVals}, string_divider, baseurl,) {\r\n    var vals = fieldValue.split(string_divider)\r\n    var fieldScriptTmp = vals.map((val, i) => {\r\n        if (i + 1 !== vals.length) {\r\n            return <Link to={baseurl + val}>{val},</Link>\r\n        } else {\r\n            return <Link to={baseurl + val}>{val}</Link>\r\n        }\r\n    })\r\n\r\n    var excludeRow_ListCheck = [] // list booleans, record if filtering value present\r\n    for (let i = 0; i < vals.length; i++) {\r\n        var fieldSubValue = vals[i]\r\n        collectUniqueValsFun(columnsToFilter, collectUniqueVals, columnHeader, fieldSubValue)\r\n        excludeRow_ListCheck[i] = FilterOut(excludeRow, fieldSubValue, filters[columnHeader], columnHeader, columnsToFilter)\r\n    }\r\n\r\n    excludeRow = !excludeRow_ListCheck.includes(false)\r\n    var fieldScript = <td>{fieldScriptTmp}</td>\r\n    return [fieldScript, excludeRow, collectUniqueVals]\r\n}\r\n\r\nexport const FilterDNAProts = ({fieldValue, columnHeader, excludeRow, columnsToFilter, filters, collectUniqueVals}) => {\r\n    console.log(columnsToFilter)\r\n    const proteins = fieldValue.split(\"#\")\r\n    var excludeRow_ListCheck = [] // list booleans, record if filtering value present\r\n\r\n    for (var i = 0; i < proteins.length; i++) {\r\n        var protein = proteins[i]\r\n\r\n        collectUniqueValsFun(columnsToFilter, collectUniqueVals, columnHeader, protein)\r\n        var filter_bool = FilterOut(excludeRow, protein, filters[columnHeader], columnHeader, columnsToFilter)\r\n        excludeRow_ListCheck.push(filter_bool)\r\n    }\r\n    excludeRow = !excludeRow_ListCheck.includes(false)\r\n\r\n    return [false, excludeRow, collectUniqueVals]\r\n}\r\n\r\n// DNA search results protein column pre-process\r\nexport const processDNAQueryProts = (data, prot_idURL, protURL) => {\r\n    var listOffSet = 0\r\n    let processedData = []\r\n    for (var i = 0; i < data.length; i++) {\r\n\r\n        var current = data[i]\r\n\r\n        if (i !== 0) {\r\n            var prev = processedData[i - 1 - listOffSet]\r\n        } else {\r\n            var prev = { \"dna_id\": \"\" }\r\n        }\r\n\r\n        if (current.prot_id === \"null\") {\r\n            current.protein = \"None\"\r\n            processedData.push(current)\r\n            continue\r\n        }\r\n\r\n        // Create jsx for prot_id\r\n        var protIdLink = <Link to={prot_idURL + current.prot_id}>{current.prot_id}</Link>\r\n\r\n        if (current.protein.includes(\"#\")) {\r\n            // Create jsx for proteins with links: (prot1, prot2)\r\n            var protspl = current.protein.split('#');\r\n            const protLinks = protspl.map((prot, j) => {\r\n                return <>\r\n                    <Link to={protURL + prot}>\r\n                        {prot}\r\n                    </Link>\r\n                    {j !== protspl.length - 1\r\n                        ? \", \"\r\n                        : null\r\n                    }\r\n                </>\r\n            });\r\n        } else {\r\n            var protLinks =\r\n                <Link to={protURL + current.protein}>\r\n                    {current.protein}\r\n                </Link>;\r\n        };\r\n\r\n        try {\r\n            const first = prev.dna_id\r\n            const sec = current.dna_id\r\n        } catch {\r\n            console.log(\"HEREE BE ERROR: \", processedData)\r\n        }\r\n\r\n\r\n\r\n        if (prev.dna_id === current.dna_id) {\r\n            current.protein = <>{protIdLink} ({protLinks})</>\r\n            prev.protein.push(<p>{current.protein}</p>)\r\n            listOffSet++\r\n        } else {\r\n            current.protein = [<>{protIdLink} ({protLinks})</>]\r\n            processedData.push(current)\r\n        }\r\n    }\r\n    return processedData\r\n}\r\n\r\nexport function linkIfOtherColEq({ fieldValue, columnHeader, excludeRow, columnsToFilter, filters, collectUniqueVals, entry }, linkTo, refCol) {\r\n    const fieldScript = (\r\n        entry[refCol] === \"complete\"\r\n            ? <td><Link to={linkTo + fieldValue}>{fieldValue}</Link></td>\r\n            : <td><span>{fieldValue}</span></td>\r\n    )\r\n    return [fieldScript, excludeRow, collectUniqueVals]\r\n}\r\n\r\nexport function customClasses({ fieldValue, columnHeader, excludeRow, columnsToFilter, filters, collectUniqueVals}, params) {\r\n    collectUniqueValsFun(columnsToFilter, collectUniqueVals, columnHeader, fieldValue)\r\n\r\n    var excludeRow = FilterOut(excludeRow, fieldValue, filters[columnHeader], columnHeader, columnsToFilter)\r\n    const textToMatch = Object.keys(params)\r\n    const fieldScript = (\r\n        <td style={{color: textToMatch.includes(fieldValue) ? params[fieldValue] : \"\"}}>\r\n            {fieldValue}\r\n        </td>\r\n    )\r\n    return [fieldScript, excludeRow, collectUniqueVals]\r\n}","const TeResultsPageInfoTable = (props) => {\r\n    const item = props.item\r\n    const infoTable = (\r\n        <table className=\"infotable\">\r\n            <tbody>\r\n                <tr>\r\n                    <th scope=\"row\">Tissue: </th>\r\n                    <td>{item.tissue}</td>\r\n                </tr>\r\n                <tr>\r\n                    <th scope=\"row\">Publication: </th>\r\n                    <td>{item.publication}</td>\r\n                </tr>\r\n                <tr>\r\n                    <th scope=\"row\">Cancer: </th>\r\n                    <td>{item.cancer}</td>\r\n                </tr>                \r\n                <tr>\r\n                    <th scope=\"row\">Validated: </th>\r\n                    <td>{item.validated}</td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    )\r\n\r\n    return infoTable\r\n}\r\n\r\nexport default TeResultsPageInfoTable","import { useEffect, useState } from 'react'\r\nimport { fetchPageData } from '../functions/functions'\r\nimport useTableScript from \"../components/react-table-creator/react-table-creator\"\r\nimport TeResultsPageInfoTable from './TeResultsPageInfoTable'\r\nconst config = require('../jsconfig.json')\r\n\r\n\r\nconst TeResultsPage = (props) => {\r\n    const [data, setData] = useState([])\r\n    const [fileId, setFileId] = useState(props.match.params.fileid)\r\n\r\n    useEffect(() => {\r\n        const fetchData = async function () {\r\n            const fetchDataInput = {\r\n                headersParams: {\r\n                    \"params\": { \"file_id\": fileId },\r\n                },\r\n                requestUrl: `https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/tefileresults`,\r\n                errorUrl: \"/error\",\r\n                history: props.history\r\n            }\r\n\r\n            fetchPageData(fetchDataInput)\r\n                .then(res => {\r\n                    setData(res.body)\r\n                })\r\n        }\r\n        fetchData()\r\n    }, []);\r\n\r\n    const params = {\r\n        columnHeaders: [\r\n            \"peptide_id\",\r\n            \"seq_observed\",\r\n            \"protein\",\r\n            \"prot_id\",\r\n            \"dna_id\",\r\n            \"class\",\r\n            \"family\"\r\n        ],\r\n        columnsHaveLinks: {\r\n            \"protein\": {\r\n                \"basePath\": \"protein\",\r\n                \"linkPathUseSelf\": true\r\n            },\r\n            \"prot_id\": {\r\n                \"basePath\": \"prot_id\",\r\n                \"linkPathUseSelf\": true\r\n            },\r\n            \"dna_id\": {\r\n                \"basePath\": \"dna_id\",\r\n                \"linkPathUseSelf\": true\r\n            },\r\n            \"class\": {\r\n                \"basePath\": \"class\",\r\n                \"linkPathUseSelf\": true\r\n            },\r\n            \"family\": {\r\n                \"basePath\": \"family\",\r\n                \"linkPathUseSelf\": true\r\n            }\r\n        },\r\n        columnsToFilter: [\r\n            \"protein\",\r\n            \"prot_id\",\r\n            \"dna_id\",\r\n            \"class\",\r\n            \"family\",\r\n            \"peptide_id\"\r\n        ],\r\n        columnHeadersFinal: [\r\n            \"Peptide ID\",\r\n            \"Sequence Observed\",\r\n            \"Protein\",\r\n            \"Matched Sequence\",\r\n            \"DNA ID\",\r\n            \"Class\",\r\n            \"Family\"\r\n        ],\r\n        customColumns: {}\r\n    }\r\n\r\n\r\n    var [dataTable, filterDropdownsRaw, pageLinks, itemsPerPageEl] = useTableScript(data, params)\r\n    const filterLabels = [\"Protein\", \"Matched Protein\", \"DNA ID\", \"Class\", \"Family\", \"Peptide ID\"]\r\n    const filterDropdowns = filterDropdownsRaw.map((filterVariable, i) => {\r\n        return (\r\n            <div className=\"filter-item\">\r\n                <div className=\"filter-element\"><span>{filterLabels[i]}</span></div>\r\n                <div className=\"filter-element\">{filterVariable}</div>\r\n            </div>\r\n        )\r\n    })\r\n\r\n    return (\r\n        <section className=\"TeResultsPage\">\r\n            <div className=\"box\">\r\n                <h2>Sequence Matches In File ID: {fileId}</h2>\r\n                <div className=\"infoBox\">\r\n                    <h3>Metadata</h3>\r\n                    <TeResultsPageInfoTable item={data.length ? data[0] : []}/>\r\n                </div>\r\n                <div className=\"query-filters-box\">\r\n                    <h3 className=\"query-filters-heading\">Filters</h3>\r\n                    {filterDropdowns}\r\n                </div>\r\n                \r\n                <div className=\"querytable\" style={{\"overflow-x\": \"scroll\"}}>\r\n                   {dataTable}                    \r\n                </div>\r\n \r\n                <div className=\"page-numbers-container\">\r\n                    {pageLinks}\r\n                </div>\r\n                <span>Items per page: {itemsPerPageEl}</span>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default TeResultsPage","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport useTableScript from '../react-table-creator/react-table-creator'\r\nimport { processDNAQueryProts, FilterDNAProts } from '../react-table-creator/CustomColumnFunctions'\r\n\r\n\r\nconst prot_idURL = \"/predictedprotein/\"\r\nconst protURL = \"/knownprotein/\"\r\n\r\n\r\nconst DnaSearchResults = (props) => {\r\n\r\n    const params = {\r\n        columnHeaders: [\r\n            \"dna_id\",\r\n            \"class\",\r\n            \"family\",\r\n            \"protein\",\r\n            \"coords\",\r\n            \"all_rec_prots\"\r\n        ],\r\n        columnsHaveLinks: {\r\n            \"dna_id\": {\r\n                \"basePath\": \"/dna/\",\r\n                \"linkPathUseSelf\": true\r\n            },\r\n            \"class\": {\r\n                \"basePath\": \"/class/\",\r\n                \"linkPathUseSelf\": true\r\n            }\r\n        },\r\n        columnsToFilter: [\r\n            \"class\",\r\n            \"family\",\r\n            \"all_rec_prots\"\r\n        ],\r\n        excludeColumnHeader: [\r\n            \"all_rec_prots\"\r\n        ],\r\n        columnHeadersFinal: [\r\n            \"DNA Record ID\",\r\n            \"Class\",\r\n            \"Family\",\r\n            \"Protein Record ID (Predicted Proteins)\",\r\n            \"Genomic Coordinates\"\r\n        ],\r\n        customColumns: {\r\n            \"all_rec_prots\": (args) => {\r\n                console.log(args)\r\n                return FilterDNAProts(args)\r\n            }\r\n        }\r\n    }\r\n    \r\n    const data = JSON.parse(props.location.state.data)\r\n    const processedData = processDNAQueryProts(data, prot_idURL, protURL)\r\n    \r\n    var [dataTable, filterDropdownsRaw, pageLinks] = useTableScript(processedData, params)\r\n\r\n    const filterLabels = [<span>Class:</span>, <span>Family:</span>, <span>Predicted Protein:</span>]\r\n    const filterDropdowns = filterDropdownsRaw.map( (filterVariable, i) => {\r\n        return (\r\n            <div className=\"filter-item\">\r\n                <div className=\"filter-element\">{filterLabels[i]}</div>\r\n                <div className=\"filter-element\">{filterVariable}</div>                \r\n            </div>\r\n        )\r\n    })\r\n\r\n    return (\r\n        <section className=\"query-results-page\">\r\n            <div className=\"box queryResults\">\r\n                <h1>Query Results</h1>\r\n                    <div className=\"query-filters-box\">\r\n                        <h3 className=\"query-filters-heading\">Filters</h3>\r\n\r\n                        <div className=\"query-results-filters\">\r\n                            {filterDropdowns}\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <div className=\"querytable\">{dataTable}</div>\r\n\r\n\r\n                    <div className=\"border-top pt-3\">\r\n                        <small className=\"text-muted\">\r\n                            <Link to=\"/query\"><small>Search Again</small></Link>\r\n                        </small>\r\n                    </div>\r\n                    <div className=\"page-numbers-container\">{pageLinks}</div>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default DnaSearchResults\r\n","import axios from 'axios';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { MultiValStringColLink } from '../react-table-creator/CustomColumnFunctions'\r\nimport useTableScript from '../react-table-creator/react-table-creator';\r\n\r\n\r\nconst ProteinSearchResults = (props) => {\r\n    const dataResponse = JSON.parse(props.location.state.data)\r\n    const query = props.match.params.query;\r\n\r\n    const params = {\r\n        columnHeaders: [\r\n            \"prot_id\",\r\n            \"class\",\r\n            \"family\",\r\n            \"protein\",\r\n            \"dna_id\",\r\n            \"coords\"\r\n        ],\r\n        columnHeadersFinal: [\r\n            \"Protein Record ID\",\r\n            \"Class\",\r\n            \"Family\",\r\n            \"Predicted Protein(s)\",\r\n            \"DNA Record ID\",\r\n            \"DNA Record Genomic Coordinates\"\r\n        ],\r\n        columnsHaveLinks: {\r\n            \"prot_id\": {\r\n                \"basePath\": \"/predictedprotein/\",\r\n                \"linkPathUseSelf\": true\r\n            },\r\n            \"dna_id\": {\r\n                \"basePath\": \"/dna/\",\r\n                \"linkPathUseSelf\": true\r\n            },\r\n            \"family\": {\r\n                \"basePath\": \"/family/\",\r\n                \"linkPathUseSelf\": true\r\n            },\r\n            \"class\": {\r\n                \"basePath\": \"/class/\",\r\n                \"linkPathUseSelf\": true\r\n            },\r\n        },\r\n        columnsToFilter: [\r\n            \"class\",\r\n            \"family\",\r\n            \"protein\"\r\n        ],\r\n        customColumns: {\r\n            \"protein\": (args) => {\r\n                const string_divider = \"#\";\r\n                const baseurl = \"/knownprotein/\";\r\n                return MultiValStringColLink(args, string_divider, baseurl)\r\n            }\r\n        }\r\n    }\r\n\r\n    var [dataTable, filterDropdownsRaw, pageLinks] = useTableScript(dataResponse, params)\r\n\r\n    const filterLabels = [<span>Class:</span>, <span>Family:</span>, <span>Predicted Protein:</span>]\r\n    const filterDropdowns = filterDropdownsRaw.map((filterVariable, i) => {\r\n        return (\r\n            <div className=\"filter-item\">\r\n                <div className=\"filter-element\">{filterLabels[i]}</div>\r\n                <div className=\"filter-element\">{filterVariable}</div>\r\n            </div>\r\n\r\n        )\r\n    })\r\n\r\n    const proteinQueryTable = (\r\n        <section className=\"prot-query-results-page\">\r\n            <div className=\"box queryResults\">\r\n\r\n                <h1>Query Results</h1>\r\n\r\n                <div className=\"query-filters-box\">\r\n                    <h3 className=\"query-filters-heading\">Filters</h3>\r\n\r\n                    <div className=\"query-results-filters\">\r\n                        {filterDropdowns}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"querytable\">{dataTable}</div>\r\n\r\n                <div className=\"border-top pt-3\">\r\n                    <small className=\"text-muted\">\r\n                        <Link to=\"/query\"><small>Search Again</small></Link>\r\n                    </small>\r\n                </div>\r\n                <div className=\"page-numbers-container\">{pageLinks}</div>\r\n            </div>\r\n        </section>\r\n    )\r\n    \r\n    return(\r\n        <>\r\n            {proteinQueryTable}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ProteinSearchResults","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAQAAACR313BAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQflARsNMTo4rJTsAAABLUlEQVQY063QsUpCARjF8fN912uTgxFlBBUNLjpKLj1AEkRP0BtUo0tjIBYNQmsP0d4SNEhICBYXlcgsrQRBr95M7/WeBkWamjrr/zcd4M9JQ8g3FWz4AYmzgTAsMVjXIOI+RMqYkzV+axVRH7LOB1G+aBSuPxJQbkTZW4HBesSIjV3xWDU6Y1kNhJYeTQWVaF/btcxiBvdGH3dGCgfhbsl+gpkEXO2jvOU6tpWLnKMY3MfxfKfgsbZHULErbW2imHAd27pYvsTJQqfgsZIawDPSAgrRMl9RTLiDXikbs/MeK9sOeiZBweEMlDaHbZejQTXlwDYJypkAM9CClfxqPu8Mp/FUpt9MwIdBuQrltasEJSu/zpuAhlLflaBkpnFmjpAD5BYWTH5KmviH/QAc2Znp9j39lgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMS0yN1QxMzo0OTowMSswMDowMC/tNJwAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDEtMjdUMTM6NDk6MDErMDA6MDBesIwgAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==\"","import { useRef, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useDetectOutsideClick } from '../hooks/useDetectOutsideClick';\r\n\r\n// icons\r\nimport downArrow from '../assets/downArrow.png'\r\n\r\n\r\nconst DropdownMenu = (props) => {\r\n  const dropdownRef = useRef(null);\r\n  const [isActive, setIsActive] = useDetectOutsideClick(dropdownRef, false);  \r\n  const onClick = () => setIsActive(!isActive);\r\n\r\n  const options = props.options.map(option => {\r\n      return(\r\n          <li>\r\n            {\r\n              option.route\r\n                ? <Link to={\r\n                  option.route\r\n                }>{option.title}</Link>\r\n                : <span onClick={option.function}>{option.title}</span>\r\n            }\r\n          </li>\r\n      )\r\n  })\r\n\r\n  return (\r\n    <div className={`menu-container ${props.classes}`}>\r\n      <button ref={dropdownRef} onClick={onClick} className=\"menu-trigger\">\r\n        <span className=\"flex-centered\">{props.heading}</span>\r\n      </button>\r\n      <nav  className={`menu ${isActive ? 'active' : 'inactive'}`}>\r\n        <ul>\r\n            {options}\r\n        </ul>\r\n      </nav>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DropdownMenu","export default \"data:image/png;base64,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\"","import React, { useRef } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useDetectOutsideClick } from '../hooks/useDetectOutsideClick';\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\n\r\n// icons\r\nimport DropdownMenu from './DropDown';\r\nimport downArrow from '../assets/downArrow.png'\r\nimport accountIcon from '../assets/accountIcon.png'\r\nimport spannerIcon from '../assets/spannerIcon.png'\r\nimport homeIcon from '../assets/homeIcon.png'\r\nimport searchIcon from '../assets/searchIcon.png'\r\nimport { AxiosGetAndPush } from '../functions/functions';\r\nimport { logoutAwsAndAuth0 } from './Auth/AuthFunctions'\r\nconst config = require(\"../jsconfig.json\")\r\n\r\n\r\nconst Navbar = (props) => {\r\n    //search bar submit\r\n    const history = useHistory();\r\n    const { loginWithRedirect, logout, isAuthenticated } = useAuth0()\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        setMobileSearchBarActive(false);  \r\n        \r\n        const search = e.target.search_input.value\r\n        const params = { \"search\": search }\r\n        const requestUrl = config.queryApiUrl + \"/navbar-search\"\r\n        const pushUrl = \"/searchresults/\" + search\r\n        AxiosGetAndPush(params, requestUrl, pushUrl, history)\r\n    }\r\n\r\n    // mobile logic\r\n    \r\n    // Search bar\r\n    const dropdownRef = useRef(null);\r\n    const [mobileSearchBarActive, setMobileSearchBarActive] = useDetectOutsideClick(dropdownRef, false);\r\n    const OpenMobileSearch = () => setMobileSearchBarActive(!mobileSearchBarActive)\r\n\r\n    // Tools dropdown\r\n    const dropdownMobileRef = useRef(null);\r\n    const [mobileToolsActive, setMobileToolsActive] = useDetectOutsideClick(dropdownMobileRef, false);\r\n    const OpenMobileTools = () => setMobileToolsActive(!mobileToolsActive)    \r\n\r\n    //tools dropdown menu\r\n    const toolOptions = [\r\n        {\r\n            \"title\": \"Query\",\r\n            \"route\": \"/query\"\r\n        },\r\n        {\r\n            \"title\": \"Tissue Expression Atlas\",\r\n            \"route\": \"/tissueexpression\"\r\n        }\r\n    ]\r\n\r\n    const signInOption = [\r\n        {\r\n            \"title\": \"Sign In / Register\",\r\n            \"function\": loginWithRedirect\r\n        }\r\n    ]\r\n\r\n    const signedInOptions = [\r\n        {\r\n            \"title\": \"Account\",\r\n            \"route\": \"/account\"\r\n        },\r\n        {\r\n            \"title\": \"Sign Out\",\r\n            \"function\": ()=>logoutAwsAndAuth0(logout)\r\n        }\r\n    ]\r\n\r\n    return (\r\n        <nav className=\"navbar\">\r\n            <span id=\"mobile-nav-icons\">\r\n                <img className=\"mobile-nav-icon\" src={homeIcon} onClick={ () => history.push(\"/\") }/>\r\n                <span className=\"mobile-tool-menu-container\">\r\n                    <DropdownMenu\r\n                        options={toolOptions}\r\n                        heading={<img className=\"mobile-nav-icon\" src={spannerIcon} onClick={OpenMobileTools} />}\r\n                        classes=\"mobile-dropdown\"\r\n                    /> \r\n                </span>\r\n                <img className=\"mobile-nav-icon\" src={searchIcon} onClick={ OpenMobileSearch }/>\r\n            </span>\r\n\r\n\r\n            {mobileSearchBarActive ?\r\n                <div className=\"mobile-search-bar-container\" ref={dropdownRef}>\r\n                    <form className=\"mobile-search-bar-form\" onSubmit={handleSubmit}>\r\n                        <input className=\"mobile-search-bar\" id=\"search_input\" type=\"text\" name=\"search_input\" placeholder=\"Search Retrobase...\" ></input>\r\n                    </form>\r\n                </div>\r\n            : null\r\n            }\r\n            \r\n            <span id=\"desktop-nav\">\r\n                <Link className=\"inline menu-button RetrobaseLogo\" to=\"/\" > Retrobase</Link>\r\n\r\n                <div className=\"search-bar-tool-menu\">\r\n                    <form className=\"inline searchBarForm\" onSubmit={ handleSubmit }>\r\n                        <input className=\"searchBar\" id=\"search_input\" type=\"text\" name=\"search_input\" placeholder=\"Search Retrobase...\" ></input>\r\n                    </form>\r\n                    <span className=\"tool-menu\">\r\n                        <DropdownMenu \r\n                            options={toolOptions} \r\n                            heading={<><span>Tools</span>\r\n                            <img src={downArrow} /></>}\r\n                            classes=\"menu-container-left-align\"\r\n                        /> \r\n                    </span>      \r\n                </div>\r\n            </span>\r\n                <span className=\"logout logout-mobile\">\r\n                    <DropdownMenu \r\n                        options={\r\n                            isAuthenticated \r\n                                ? signedInOptions\r\n                                : signInOption\r\n                        }\r\n                        heading={<><img src={accountIcon}/><img src={downArrow} /></>}\r\n                        classes=\"menu-container-right-align\"\r\n                    />\r\n                </span>   \r\n                <span className=\"logout logout-desktop\">\r\n                    <DropdownMenu\r\n                        options={\r\n                            isAuthenticated\r\n                                ? signedInOptions\r\n                                : signInOption\r\n                        }\r\n                        heading={<><img src={accountIcon} /><img src={downArrow} /></>}\r\n                        classes=\"mobile-dropdown\"\r\n                    />\r\n                </span>\r\n        </ nav>\r\n    )\r\n}\r\n\r\nexport default Navbar\r\n\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAQAAABu4E3oAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQflAgEUFRfnaHzrAAABMElEQVQ4y+XTvUpcQRiH8WdmjoVg5yXYik1uIteQKmARgiJoQEjSLIGkiZIm3XZi5QV4CXZeg43YSthK3JknxZmzGfHomtp/debj975zvqCJQQyuiNvqjrjSzzGeBry3z8dnUQM+qMViVj89iRqwq2aLqnP18z90MAr21XkFA5qIXd3zCBzWTW3u1R8PUAO+joABHYudUQyIwU6cPAEG9FtMxr5LJ36vCz6Dpj3CTvy5BAzoRIyIRy8AAzo14lS9M7+A9Og8OGON/8ltcIsNZmzyq5kui6tAqDORL5yxzjUGk/hmyZHm6rv+hXZEEpm0qB+5ZI9VJPKHb7ylEGtHSJQuZAHy8LkBN1yQKCTmXNUyw1oOJY7cYF8tkYBYx026sV8HyPURlDpuMtZlSV45+Qsw3+1isNhBfwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMi0wMVQyMDoyMTowOSswMDowMAIwxtMAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDItMDFUMjA6MjE6MDkrMDA6MDBzbX5vAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAQAAABu4E3oAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQflAgEUEyF+iE70AAABiklEQVQ4y5XUPWtUQRjF8TP35kaC+gEUthIbxUKxMWARQ2IhxNJPIPZ2dgEbv0WKoIUgFlotgiAIgoWN2mkjilhIULJ52ZefxW4kaO4aD8wUw/w58/CcZ6KoxUN8s64jKlHSLkUlLngHPjsjqulIo1LEEWvglfIvl6jUGnFK3wgLotZKVLmdToapkqxkJv0k55KUtPvo+WpJzPuJXdwRjdL6OGvo6foOBni8h7RAOj5iZGDXwAisiEZaIHHaS3saGWHLcjtUVJGSizmbJpdzI02GqbOd6+mmST8lKf50qcf9Vollm+hPdRo3Tm1GY1Zc0fsNLU2paXw8uXBYKPuhxYMh8R/QrEajPiB9LdBVUSvjvfztlESa9LOYJ5nLMHV28iifspmneZP6MDUNJ5mA1ZaE74OWDcCW516DW5kKzYr72HJJHPcM79uHoihmxD28EHPiGrarNqRIUpJsJDmaY9lJMp/kR9o1HmfnDdC14K4vWJ+OjD+sVYwm660TmSZlku+bPhjY8MBJ+QXsWdIIjLFwkwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMi0wMVQyMDoxODo0NCswMDowMIJa5CIAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDItMDFUMjA6MTg6NDQrMDA6MDDzB1yeAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAQAAADYBBcfAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQflAgITCDnTKKRTAAAChklEQVQ4y42Vz6sVZRjHP887P86pLobIdRFIXcswrq20aNO6jcuEIgha+SdIl3sXoXuR9m7Sf0BdSODChaabQuraSlDQMgvyKhb3nNN8Wsw7c+aeSnph4Hlnvp/neZnn+8yEEHQrCMAcg4hEvgZCCDsRJKQhqEg0TJEg0fTaHWjZYwUzxrzBOxxiF0+4zTfcYULBXxmLtkqXJgzDQlzxjI/VxnY987T7xTJrMBbBQjzid+ofbnrRc17yext108M9isOSJgvxgN+qDzzlQZMhHvQLH6mbvprRhYpJHHla/dmPxdLK2soQj/lYPSfWOd0ctRDf9ol6UnzRsYXJwtqx4Zp613fF0b+Bn6k/uCqO7F5XWIqv+KtTT4jjnWBCKlaBe9ymYta2GoEG2OI6Ja/l3WAlILEL2Mr+GDiFRMNvwFLvpR1gwxawG2iIHgugIbEMPIWcagAGU34E9nGIGUWWRM7/Mu/RcHexXlsRrvOUVY4BQUHku4ngU5a5z9Xe+tgHyXDsGfWhH+ZWtz3Do26rZ4d9bJ+0lmt9ekv93c/d65Iv+JLLnnBbfeBbYmHqbRciYRAkZhzmPG8S/MINHrHM++yh4SEl17jMWYA8J/nE82aveN6f3M6zMfO+X3nAC+qfboi15dwe0U9nSTDhCB+wjyWecY8r3ASO8yUAJzlFRcMs6wfnLq07W9meZWSycsOpUyeuW1h1VVtBhyZrx9bWjhxbm0wWVq47yWhp1U5nlzvmU57b0cWtdI7W7XOYowxgBrvSysJ1J86cuma1MNIsVo8BWhtuOHVb/Ugs+K+1I0mL4pr6ta+LCf4fGpYmx37iilgYwXNRui965KjJw89zwX+gzH8RfwNjrjgNDvf9eAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMi0wMlQxOTowMjoxMCswMDowMDplGp0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDItMDJUMTk6MDI6MTArMDA6MDBLOKIhAAAAAElFTkSuQmCC\"","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\n//props.title is the item attribute that will be the title of the search result\r\n//props.entity must have \"a/an\" prefixed \r\n\r\nexport const NavbarSearchResultItems = (props) => {\r\n    const resultsScript = props.items.map(item => {\r\n        return (\r\n            <Link to={props.pathName + item[props.title]} className=\"linkNoDecoration\">\r\n                <div className=\"SearchResult\">\r\n                    <h3>{item[props.title]}</h3>\r\n                    <p>{item[props.title]} is {props.entity} of the {item.class} class of retrotransposons</p>\r\n                </div>\r\n            </Link>\r\n        )\r\n    })    \r\n    return resultsScript\r\n}\r\n\r\nexport default NavbarSearchResultItems","import axios from 'axios'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { NavbarSearchResultItems } from './NavBarSearchResultItems'\r\n\r\nconst NavbarSearchResults = (props) => {\r\n    \r\n    const search = props.match.params.search\r\n    const data = JSON.parse(props.location.state.data)\r\n\r\n    const classResultsScript = data.classes.map( rtClass => {\r\n        return(\r\n            <Link to={\"/class/\" + rtClass.class} className=\"linkNoDecoration\">\r\n                <div className=\"SearchResult\">\r\n                    <h3>{rtClass.class}</h3>\r\n                    <p>{rtClass.description.substr(0, 200)}...</p>\r\n                </div>\r\n            </Link>\r\n            \r\n        )\r\n    })\r\n\r\n    const dnaResultsScript = <NavbarSearchResultItems pathName=\"/dna/\" items={data.dna_ids} title=\"dna_id\" entity=\"a DNA element\"/>\r\n    const familiesResultsScript = <NavbarSearchResultItems pathName=\"/family/\" items={data.families} title=\"family\" entity=\"a family\" />\r\n    const proteinResultsScript = <NavbarSearchResultItems pathName=\"/knownprotein/\" items={data.proteins} title=\"protein\" entity=\"a protein\" />\r\n    const prot_idResultsScript = <NavbarSearchResultItems pathName=\"/predictedprotein/\" items={data.prot_ids} title=\"prot_id\" entity=\"an in silico predicted protein sequence\" />\r\n\r\n\r\n    return (\r\n        <section>\r\n            <div className=\"box\">\r\n                <h1>Search Results for <i>\"{search}\"</i></h1>\r\n\r\n                <div style={{\"height\": \"20px\"}}></div>\r\n                <>{classResultsScript}</>\r\n                <>{dnaResultsScript}</>\r\n                <>{prot_idResultsScript}</>\r\n                <>{familiesResultsScript}</>\r\n                <>{proteinResultsScript}</>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default NavbarSearchResults","import FadeLoader from 'react-spinners/FadeLoader';\r\n\r\nconst LoadingBox = (props) => {\r\n    return (\r\n        <section className=\"LoadingBox\">\r\n            <div className=\"box\">\r\n                <h3>{props.title}</h3>\r\n                <p>{props.message}</p>\r\n            </div>                \r\n                <FadeLoader />\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default LoadingBox","import React from 'react';\r\n\r\n\r\nconst InlineMessage = (props) => {\r\n    return props.show \r\n        ? \r\n            <div className={`inlineMessage ${props.success ? 'success' : 'fail'}`}>\r\n                <p>{props.message}</p>\r\n            </div>\r\n        :\r\n            null\r\n}\r\n\r\nexport default InlineMessage","import React, { useState } from 'react';\r\nimport axios from 'axios';\r\n//import { delay } from '../functions/functions';\r\nimport LoadingBox from '../LoadingBox'\r\nimport { ValidateSequence } from './QueryFormFunctions';\r\nimport InlineMessage from '../InlineMessage'\r\nimport { AxiosGetAndPush, SubmitFile } from '../../functions/functions'\r\nimport { useAuth0 } from '@auth0/auth0-react';\r\nconst config = require('../../jsconfig.json')\r\n\r\nconst QueryFormPage = (props) => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [loadingBoxTitle, setLoadingBoxTitle] = useState(\"\");\r\n    const [loadingBoxMessage, setLoadingBoxMessage] = useState(\"\");\r\n\r\n    //user messages\r\n\r\n    const [showMessage, setShowMessage] = useState(false)\r\n    const [message, setMessage] = useState(\"\")\r\n\r\n    // Form inputs\r\n    const [file, setFile] = useState(null);\r\n    const [tissue, setTissue] = useState(null);\r\n    const [cancer, setCancer] = useState(\"No\");\r\n    const [published, setPublished] = useState(\"No\");\r\n    const [publication, setPublication] = useState(\"None\");\r\n    const [researcher, setResearcher] = useState(null);\r\n\r\n    const { isAuthenticated, getAccessTokenSilently, user, loginWithRedirect } = useAuth0();\r\n\r\n    const [inputType, setInputType] = useState(props.location.state?.uploadTe ? \"file\" : \"sequence\");\r\n    const [uploadTe, setUploadTe] = useState(\"Yes\");\r\n    console.log(props.location.state?.uploadTe)\r\n    const onInputTypeChange = (e) => {\r\n        setInputType(e.target.value)\r\n    }\r\n\r\n    const onUploadTeChange = (e) => {\r\n        setUploadTe(e.target.value)\r\n        if (e.target.value === \"No\") {\r\n            setTissue(null);\r\n            setCancer(\"No\");\r\n            setPublished(\"No\");\r\n            setPublication(\"None\");\r\n            setResearcher(null);\r\n        }\r\n    }\r\n\r\n    function FormGetFile(e) {\r\n        setFile(e.target.files[0])\r\n    }\r\n    function FormGetTissue(e) {\r\n        setTissue(e.target.value)\r\n    }\r\n    function FormGetCancer(e) {\r\n        setCancer(e.target.value)\r\n    }\r\n    function FormGetPublished(e) {\r\n        setPublished(e.target.value)\r\n    }\r\n    function FormGetPublication(e) {\r\n        setPublication(e.target.value)\r\n    }\r\n    function FormGetResearcher(e) {\r\n        setResearcher(e.target.value)\r\n    }\r\n\r\n    const useSubmitSequence = (e) => {\r\n        e.preventDefault()\r\n        setLoading(true);\r\n        setLoadingBoxTitle(\"Querying\")\r\n        setLoadingBoxMessage(\"Query in progress. Please do not refresh...\")\r\n\r\n        const seqType = e.target.sequenceType.value;\r\n        const seq = e.target.query.value;\r\n\r\n        \r\n        const {valid, message} = ValidateSequence(seq,seqType)\r\n        if (!valid) {\r\n            setLoading(false)\r\n            setShowMessage(true)\r\n            setMessage(message)\r\n            return\r\n        } \r\n        \r\n        let requestUrl;\r\n        let pushUrl;\r\n        if (seqType === \"Protein Sequence\") {\r\n            requestUrl = config.queryApiUrl + \"/sls-query-prot-s3\";\r\n            pushUrl = '/proteinquery/' + seq;\r\n        } else {\r\n            requestUrl = config.queryApiUrl + \"/sls-query-dna-s3\";\r\n            pushUrl = '/dnaquery/' + seq;            \r\n        }\r\n        const params = {\r\n            \"query\": seq\r\n        }\r\n        AxiosGetAndPush(params, requestUrl, pushUrl, props.history).then( res => {\r\n            setLoading(false);\r\n            setShowMessage(true);\r\n            setMessage(res.message);\r\n        })\r\n    };\r\n\r\n    const handleSubmitFile = async (e) => {\r\n        e.preventDefault()\r\n        if (!isAuthenticated) {\r\n            loginWithRedirect()\r\n        } else {\r\n            setLoading(true);\r\n            setLoadingBoxTitle(\"Submitting File\")\r\n            setLoadingBoxMessage(\"Your file is being submitted. Please do not refresh...\")\r\n\r\n        const metadata = uploadTe === \"Yes\" \r\n            ? \r\n                {\r\n                    \"file_name\": file?.name,\r\n                    \"tissue\": tissue,\r\n                    \"cancer\": String(cancer),\r\n                    \"published\": String(published),\r\n                    \"publication\": publication,\r\n                    \"researcher\": researcher,\r\n                    \"user_id\": user.sub,\r\n                    \"uploadTe\": \"Yes\"\r\n                }\r\n            :\r\n                {\r\n                    \"file_name\": file?.name,\r\n                    \"tissue\": \"\",\r\n                    \"cancer\": \"\",\r\n                    \"published\": \"\",\r\n                    \"publication\": \"\",\r\n                    \"researcher\": \"\",\r\n                    \"user_id\": user.sub,\r\n                    \"uploadTe\": \"No\"\r\n                }\r\n\r\n            const formData = {\r\n                file: file,\r\n            }\r\n\r\n            const accessToken = await getAccessTokenSilently({\r\n                audience: `https://sls-retrobase`,\r\n                scope: \"get:data\",\r\n            });\r\n\r\n            const getPresignedUrlUrl = \"https://kvuhomev06.execute-api.us-east-1.amazonaws.com/dev/get-s3-presigned-url\"\r\n            const pushUrl = \"/filesentsuccess\"\r\n\r\n            SubmitFile({ metadata, formData, accessToken, getPresignedUrlUrl, history: props.history, pushUrl})\r\n                .then(resp => {\r\n                    if (!resp.success) {\r\n                        setLoading(false)\r\n                        setShowMessage(true)\r\n                        setMessage(resp.message)\r\n                    }\r\n                })\r\n        }\r\n    }\r\n\r\n    const sequenceInputFields = (\r\n        <>\r\n            <tr>\r\n                <th>Enter Query</th>\r\n                <td><textarea type=\"text\" id=\"query\" name=\"query\"></textarea></td>\r\n            </tr>\r\n            <tr>\r\n                <th>Protein or DNA</th>\r\n                <td>\r\n                    <select id=\"sequenceType\" name=\"sequenceType\">\r\n                        <option>DNA Sequence</option>\r\n                        <option>Protein Sequence</option>\r\n                    </select>\r\n                </td>\r\n            </tr>\r\n        </>\r\n    );\r\n    \r\n    const uploadTeAtlasBool = (\r\n        <tr>\r\n            <th>Upload to tissue expression atlas?</th>\r\n            <td>\r\n                <span className=\"nowrap\" style={{ \"paddingRight\": \"4rem\" }}>\r\n                    <label for=\"uploadYes\">Yes</label><input type=\"radio\" value=\"Yes\" name=\"uploadTe\" checked={uploadTe === \"Yes\"} onChange={onUploadTeChange}></input>\r\n                </span>\r\n                <span className=\"nowrap\">\r\n                    <label for=\"uploadNo\">No</label><input type=\"radio\" value=\"No\" name=\"uploadTe\" checked={uploadTe === \"No\"} onChange={onUploadTeChange}></input>\r\n                </span>\r\n            </td>\r\n        </tr>\r\n    )\r\n\r\n    // Publication field available if published field is set to yes\r\n    const publicationInput = (String(published) === \"Yes\")\r\n        ? (<tr>\r\n            <th>Provide link to publication: </th>\r\n            <td>\r\n                <input type=\"text\" id=\"publication\" name=\"publication\" value={publication} onChange={FormGetPublication}></input>\r\n            </td>\r\n        </tr>)\r\n        : null\r\n\r\n    const fileInputMetaDataField = (\r\n        <>\r\n            <tr>\r\n                <th>Tissue: </th>\r\n                <td>\r\n                    <input type=\"text\" id=\"tissueType\" name=\"tissueType\" value={tissue} onChange={FormGetTissue}></input>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <th>\r\n                        Is this a cancer sample?\r\n                </th>\r\n                <td>\r\n                    <select id=\"cancer\" name=\"cancer\" value = {cancer} onChange={FormGetCancer}>\r\n                        <option>Yes</option>\r\n                        <option>No</option>\r\n                    </select>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <th>\r\n                        Is this data published?\r\n                </th>\r\n                <td>\r\n                    <select id=\"published\" name=\"published\" value={published} onChange={FormGetPublished}>\r\n                        <option>Yes</option>\r\n                        <option>No</option>\r\n                    </select>\r\n                </td>\r\n            </tr>\r\n            { publicationInput }\r\n            <tr>\r\n                <th>Researcher Name: </th>\r\n                <td>\r\n                    <input type=\"text\" id=\"researcher\" name=\"researcher\" value={researcher} onChange={FormGetResearcher}></input>\r\n                </td>\r\n            </tr>\r\n        </>\r\n    )\r\n\r\n    const fileInputFields = (\r\n        <>\r\n            <tr>\r\n                <th>Upload MZID .zip file:</th>\r\n                <td>\r\n                    <input type=\"file\" id=\"uploadFile\" name=\"uploadFile\" value={null} onChange={FormGetFile}></input>\r\n                </td>\r\n            </tr>\r\n            { uploadTeAtlasBool}\r\n            {uploadTe === \"Yes\" ? fileInputMetaDataField : null}\r\n        </>\r\n    )\r\n\r\n\r\n    const inputFields = inputType === \"sequence\"\r\n        ? sequenceInputFields\r\n        : fileInputFields\r\n\r\n    const queryForm = (\r\n        <section className = \"queryForm\" >\r\n            <div className=\"box queryForm\">\r\n                <div className=\"container\">\r\n                    <div className=\"smallertext\">\r\n                        <h1>Query sequences against the Retrobase database</h1>\r\n\r\n                        <InlineMessage show={showMessage} success={false} message={message} />\r\n                        <InlineMessage show={\r\n                            inputType === \"file\" && !isAuthenticated\r\n                        } success={false} message={\r\n                            <span>User must <span className=\"PageNumberLinks\" onClick={loginWithRedirect}>log in</span> to submit file</span>\r\n                        }/>\r\n                        <form onSubmit={inputType === \"sequence\" ? useSubmitSequence : handleSubmitFile}>\r\n                            <table class=\"queryFormTable\">\r\n                                <tbody>\r\n                                    <tr>\r\n                                        <th>Input Type: </th>\r\n                                        <td>\r\n                                            <span className=\"nowrap\" style={{ \"paddingRight\": \"4rem\" }}>\r\n                                                <label for=\"sequence\">Manually enter sequence: </label><input type=\"radio\" value=\"sequence\" name=\"inputType\" checked={inputType === \"sequence\"} onChange={onInputTypeChange}></input>\r\n                                            </span>\r\n                                            <span className=\"nowrap\">\r\n                                                <label for=\"file\">MZID File: </label><input type=\"radio\" value=\"file\" name=\"inputType\" checked={inputType === \"file\"} onChange={onInputTypeChange}></input>\r\n                                            </span>\r\n                                        </td>\r\n                                    </tr>\r\n                                    {inputFields}\r\n                                    <tr>\r\n                                        <button>Submit</button>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </form>\r\n                    </div>\r\n                    <div>\r\n                        <h2>About Query</h2>\r\n                        <p>The Retrobase Query tool performs exact matching of query sequences to sequences in the database. Currently BLAST algorithms are not available.</p>\r\n                        <p>Note: To experiment, you can simply enter the character \"A\", select either Protein Sequence or Dna Sequence and submit.</p>\r\n                    </div>\r\n\r\n                </div>\r\n            </div >\r\n        </section>\r\n    )\r\n\r\n    return (\r\n        <>\r\n            {loading\r\n                ? <LoadingBox title={loadingBoxTitle} message={loadingBoxMessage}/>\r\n                : queryForm\r\n            }\r\n        </>\r\n    )\r\n};\r\n\r\nexport default QueryFormPage;","import axios from 'axios';\r\nimport React, { useState, useEffect  }from 'react';\r\nimport { useHistory} from \"react-router-dom\";\r\n\r\n/*export const UseSubmitFile = async (event, metadata, jwt, bucketUrl, presignedRequestUrl) => {\r\n    //Make filename key\r\n\r\n\r\n    const SubmitFormParams = {\r\n        \"headers\": {\r\n            \"Authorization\": jwt\r\n        },\r\n        \"params\": metadata\r\n    }\r\n\r\n/*const metadata = {\r\n    \"username\": props.user.username\r\n}\r\nprops.user.signInUserSession.idToken.jwtToken\r\nhttps://kvuhomev06.execute-api.us-east-1.amazonaws.com/dev/get-s3-presigned-url\r\n\r\n    try {\r\n        setLoading(true)\r\n        const response = await axios.get(bucketUrl, SubmitFormParams)\r\n        console.log(\"Collected presigned url\")\r\n        const signedURL = response.data.url\r\n\r\n        //rename file to key for presigned upload\r\n        Object.defineProperty(file, 'name', {\r\n            writable: true,\r\n            value: response.data.key\r\n        });\r\n        console.log(signedURL, \"sending file\")\r\n        const axiosResponse = await axios.put(signedURL, file);\r\n        console.info(axiosResponse)\r\n\r\n        return {\r\n            \"status\": 200,\r\n            \"message\": \"File Sent\"\r\n        }\r\n\r\n    } catch (error) {\r\n        setLoading(false)\r\n\r\n        setError(true);\r\n        setErrorMessage(\"Authorization to upload data not granted\")\r\n    } finally {\r\n\r\n    }\r\n}\r\n*/\r\n\r\n\r\n\r\nexport const ValidateSequence = (seq, seqType) => {\r\n    var message = {\r\n        valid: true,\r\n        message: \"\"\r\n    }\r\n\r\n    const invalidCharMsg = {\r\n        valid: false,\r\n            message: \"Sequence contains invalid characters.\"\r\n    }\r\n\r\n    seq = seq.toUpperCase();\r\n    if (seqType === \"DNA Sequence\") {\r\n        message= (\r\n            RegExp(\"^[ATGC]+$\").test(seq) \r\n                ? message\r\n                : invalidCharMsg\r\n        )\r\n    } else if (seqType === \"Protein Sequence\") {\r\n        message = (\r\n            RegExp(\"^[ABCDEFGHIKLMNPQRSTUVWXYZ]+$\").test(seq) \r\n                ? message\r\n                : invalidCharMsg\r\n        );\r\n    } else {\r\n        message = (\r\n            {\r\n                valid: false,\r\n                message: \"Invalid seqType\"\r\n            }\r\n        );\r\n    };\r\n    return message\r\n};\r\n\r\n\r\n/*const AsyncAxiosGetAndPush = async (submitUrl, pollUrl, pushUrl, submitParams) => {\r\n\r\n        const response1 = await axios.get(submitUrl, { params: submitParams })\r\n\r\n\r\n    const token = response1.data.body.token\r\n\r\n\r\n    while (true) {\r\n        const response2 = await axios.get(pollUrl, { params: { \"token\": token } })\r\n        if (response2.data.statusCode === 200) {\r\n            props.history.push(\r\n                {\r\n                    pathname: pushUrl,\r\n                    state: { \"data\": JSON.stringify(response2.data) }\r\n                }\r\n            )\r\n            break\r\n        } else {\r\n            await delay(5000);\r\n        }\r\n    }\r\n}\r\n*/","import React  from 'react'\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst FileUploadSuccess = () => {\r\n    return(\r\n        <section>\r\n            <div className=\"box\">\r\n                <h3>Success!</h3>\r\n                <p>File has been sent for processing. When ready, your results will be available at <Link to=\"/account\">My Account</Link></p>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default FileUploadSuccess","import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { fetchPageData } from '../../functions/functions'\r\nconst config = require('../../jsconfig.json')\r\n\r\n\r\nconst ClassDetail = (props) => {\r\n\r\n    const [rtClass, setRtClass] = useState(props.match.params.class)\r\n    const [proteins, setProteins] = useState(\"\")\r\n    const [families, setFamilies] = useState(\"\")\r\n    const [description, setDescription] = useState(\"\")\r\n\r\n    useEffect(() => {\r\n        const fetchDataInput = {\r\n            headersParams: {\"params\": { \"class\": rtClass }},\r\n            requestUrl: `${config.queryApiUrl}/classdetail`,\r\n            errorUrl: \"/error\",\r\n            history: props.history\r\n        }\r\n        fetchPageData(fetchDataInput).\r\n            then(res=>{\r\n                setRtClass(res.body.class)\r\n                setProteins(res.body.proteins)\r\n                setFamilies(res.body.families)\r\n                setDescription(res.body.description)\r\n            })\r\n    }, []); \r\n    \r\n    const proteinsScript = proteins.split(\"#\").map( protein => {\r\n        return <li><Link to={\"/knownprotein/\" + protein}>{protein}</Link></li>\r\n    });\r\n\r\n    const familiesScript = families.split(\"#\").map( family => {\r\n        return <li><Link to={\"/family/\" + family}>{family}</Link></li>\r\n    });\r\n\r\n    const descriptionScript = description.split(\"\\n\").map( paragraph => {\r\n        return <p>{paragraph}</p>\r\n    })\r\n\r\n    return(\r\n        <section className=\"classDetail\">\r\n            <div className=\"box\">\r\n\r\n                <h1> Class: {rtClass}</h1>\r\n\r\n                <h2>Description</h2>\r\n                    <div>{descriptionScript}</div>\r\n                <h2>Proteins Encoded By This Class:</h2>\r\n                    <ul>\r\n                        <li>{proteinsScript}</li>\r\n                    </ul>\r\n\r\n                <h2>Families</h2>\r\n                    <ul className=\"familyList\">\r\n                        <li>{familiesScript}</li>\r\n                    </ul>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default ClassDetail","import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { fetchPageData } from '../../functions/functions'\r\nconst config = require(\"../../jsconfig.json\")\r\n\r\nconst FamilyDetail = (props) => {\r\n    \r\n    const [family, setFamily] = useState(props.match.params.family_id)\r\n    const [rtClass, setRtClass] = useState(\"\")\r\n    const [data, setData] = useState([])\r\n\r\n    useEffect(() => {\r\n        const fetchDataInput = {\r\n            headersParams: {\"params\": { \"family\": family }},\r\n            requestUrl: `${config.queryApiUrl}/familydetail`,\r\n            errorUrl: \"/error\",\r\n            history: props.history\r\n        }\r\n        fetchPageData(fetchDataInput).\r\n            then(res => {\r\n                setFamily(res.body[0].family)\r\n                setRtClass(res.body[0].class)\r\n                setData(res.body)\r\n            })\r\n    }, []);\r\n    \r\n    const dnaListScript = data.map( (item, i) => {\r\n        return(\r\n            <>\r\n                {(i !== 0)\r\n                    ? <Link to={\"/dna/\" + item.dna_id}>, {item.dna_id}</Link>\r\n                    : <Link to={\"/dna/\" + item.dna_id}>{item.dna_id}</Link>\r\n                }\r\n            </>\r\n        )\r\n    })\r\n\r\n    return (\r\n        <section>\r\n            <div className=\"box\">\r\n                <h1>{family}</h1>\r\n                <table className=\"infotable\">\r\n                    <tbody>\r\n                        <tr>\r\n                            <th>Class: </th>\r\n                            <td><Link to={\"/class/\" + rtClass}>{rtClass}</Link></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <th>DNA Sequences: </th>\r\n                            <td>{dnaListScript}</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default FamilyDetail","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { fetchPageData } from '../../functions/functions'\r\nconst config = require(\"../../jsconfig.json\")\r\n\r\n\r\n\r\nconst ProteinNameDetail = (props) => {\r\n    const [protein, setProtein] = useState(props.match.params.knownprotein);\r\n    const [proteinFunction, setProteinFunction] = useState([]);\r\n    const [rtClass, setRtClass] = useState([]);\r\n    const [sequence, setSequence] = useState([]);\r\n    const [uniprotAccession, setUniprotAccession] = useState([]);\r\n\r\n    useEffect(()=>{\r\n        const fetchDataInput = {\r\n            headersParams: {params: { protein: protein }},\r\n            requestUrl: `${config.queryApiUrl}/knownproteindetail`,\r\n            errorUrl: \"/error\",\r\n            history: props.history\r\n        }\r\n        fetchPageData(fetchDataInput).\r\n            then(res => {\r\n                setProtein(res.body.protein)\r\n                setProteinFunction(res.body.function)\r\n                setRtClass(res.body.class)\r\n                setSequence(res.body.sequence)\r\n                setUniprotAccession(res.body.accession)\r\n            })\r\n    }, [])\r\n    const proteinFunctionScript = <p> {proteinFunction}</p >\r\n\r\n    return (\r\n        <section>\r\n            <div className=\"box\">\r\n                <h1>Protein Name: {protein}</h1>\r\n                <p>All information presented on this page is acquired from the <a href={\"https://www.uniprot.org/uniprot/\" + uniprotAccession} >Uniprot record, {uniprotAccession}</a>. Click through for much more information on this protein.</p>\r\n                <h2>Function</h2>\r\n                <div>{proteinFunctionScript}</div>\r\n\r\n                <h2>Sequence</h2>\r\n                    <p>The following sequence was used for predicting which <i>in silico</i>-translated transcripts from the retrotransposon family, <Link to={/class/ + rtClass}>{rtClass}</Link>, are {protein} sequences: </p>\r\n                    <p class= \"wrapped nokern\">{sequence}</p>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default ProteinNameDetail","import React, { useState, useEffect } from 'react'\r\nimport { Link } from 'react-router-dom';\r\nimport { fetchPageData } from '../../functions/functions'\r\nconst config = require(\"../../jsconfig.json\")\r\n\r\n\r\nconst ProteinRecordDetail = (props) => {\r\n\r\n\r\n    const [proteinNames, setProteinNames] = useState([])\r\n    const [protId, setProtId] = useState(props.match.params.protein_id)\r\n    const [dnaId, setDnaId] = useState([])\r\n    const [coords, setCoords] = useState([])\r\n    const [family, setFamily] = useState([])\r\n    const [rtClass, setRtClass] = useState([])\r\n    const [sequence, setSequence] = useState([])\r\n    const [knownProt, setKnownProt] = useState([])\r\n\r\n\r\n    useEffect(() => {\r\n        const fetchDataInput = {\r\n            headersParams: {params: { \"prot_id\": protId }},\r\n            requestUrl: `${config.queryApiUrl}/predictedproteindetail`,\r\n            errorUrl: \"/error\",\r\n            history: props.history\r\n        }\r\n        fetchPageData(fetchDataInput).\r\n            then(res => {\r\n                setDnaId(res.body.dna_id)\r\n                setCoords(res.body.coords)\r\n                setFamily(res.body.family)\r\n                setRtClass(res.body.class)\r\n                setSequence(res.body.prot_seq)\r\n                setKnownProt(res.body.known_prot)\r\n            })\r\n    }, []);\r\n\r\n\r\n    const proteinNameListScript = knownProt.map( (proteinName, i) => {\r\n        \r\n        var tmp = (\r\n            <Link to={\"/knownprotein/\" + proteinName.protein}>\r\n                <span>{proteinName.protein}</span>\r\n            </Link>\r\n        )\r\n        \r\n        if (i !== 0) {\r\n            return <span>, {tmp}</span>\r\n        } else {\r\n            return <span>{tmp}</span>\r\n        }\r\n    });\r\n\r\n    const proteinFunctions = knownProt.map( proteinName => {\r\n        return(\r\n            <div>\r\n                <h2> {proteinName.protein}</h2>\r\n                <h3> Function </h3>\r\n                <p><i>Information taken from Uniprot</i> <a href={\"https://www.uniprot.org/\" + proteinName.accession}>({proteinName.accession})</a></p>\r\n                    <p>{proteinName.function}</p>\r\n                    <h3>Reference Sequence</h3>\r\n                        <p class=\"wrapped nokern\">{proteinName.sequence}</p>\r\n            </div>\r\n\r\n        )\r\n    })\r\n    return (\r\n        <section>\r\n            <div className=\"box\">\r\n                <h1 class=\"msaIdCatcher\">Protein Record: {protId}</h1>\r\n                <table class= \"infotable\">\r\n                    <tbody>\r\n                        <tr>\r\n                            <th scope=\"row\">Proteins Predicted:</th>\r\n                            <td>{proteinNameListScript}</td>\r\n                        </tr>\t\t\t\r\n                        <tr>\r\n                            <th scope=\"row\">Retrotransposon Class: </th>\r\n                            <td><Link to={\"/class/\" + rtClass}>{rtClass}</Link></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <th scope=\"row\">Family:</th>\r\n                            <td><Link to={\"/family/\" + family}>{family}</Link></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <th scope=\"row\">Translated From DNA Record:</th>\r\n                            <td><Link to={\"/dna/\" + dnaId}>{dnaId}</Link></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <th scope=\"row\">DNA Record Coordinates:</th>\r\n                            <td>{coords}</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <h2>Sequence</h2>\r\n                <p class=\"wrapped nokern\">{sequence}</p>\r\n\r\n                <h1>Predicted Proteins</h1>\r\n                <p>Note: protein prediction was done using psi-blast. This detects distantly related sequences and can potentially detect sequencs related to adjacent sequences. Discretion is advised.</p>\r\n                <div>\r\n                    {proteinFunctions}\r\n                </div>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default ProteinRecordDetail","import React, { useState, useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { fetchPageData } from '../../functions/functions'\r\nconst config = require('../../jsconfig.json')\r\n\r\n\r\nconst DnaDetail = (props) => {\r\n\r\n    const [dna_id, setId] = useState(props.match.params.dna_id);\r\n    const [family, setFamily] = useState();\r\n    const [rtClass, setRtClass] = useState([]);\r\n    const [sequence, setSequence] = useState([]);\r\n    const [proteinRecords, setProteinRecords] = useState([]);\r\n\r\n    useEffect(() => {\r\n        const fetchDataInput = {\r\n            headersParams: {params: {\"dna_id\": dna_id}},\r\n            requestUrl: `${config.queryApiUrl}/dnadetail`,\r\n            errorUrl: \"/error\",\r\n            history: props.history\r\n        }\r\n        fetchPageData(fetchDataInput).\r\n            then(res=>{\r\n                setId(res.body.dna_id)\r\n                setFamily(res.body.family)\r\n                setRtClass(res.body.class)\r\n                setSequence(res.body.dna_seq)\r\n                setProteinRecords(res.body.protein_data)\r\n            })\r\n    }, []);\r\n \r\n    const proteinScript = proteinRecords\r\n        && Object.keys(proteinRecords).length === 0 \r\n        && typeof(proteinRecords) === \"object\"\r\n        ?\r\n            <span>No Proteins Predicted</span>\r\n        :\r\n            proteinRecords.map( (protrec, j) => {\r\n                if (protrec.protein.includes(\"#\")){\r\n                    var protspl = protrec.split(\"#\");\r\n                    var protnames = protspl.map( (protein, i) => {\r\n                        return (\r\n                            <>\r\n                                <Link to={\"/knownprotein/\" + protein}>\r\n                                    {protein}\r\n                                </Link>\r\n                                {\r\n                                    i !== protspl.length - 1\r\n                                    ? \", \"\r\n                                    : null\r\n                                }\r\n                            </> \r\n                        )\r\n                    });\r\n                    \r\n                } else {\r\n                    var protnames = <Link to={\"/knownprotein/\" + protrec.protein}>{protrec.protein}</Link>\r\n                }\r\n        \r\n                return (\r\n                    <>\r\n                        <Link>{protrec.prot_id}</Link> ({protnames})\r\n                        {j !== proteinRecords.length - 1\r\n                            ? \", \"\r\n                            : null\r\n                        }\r\n                    </>\r\n                )\r\n            })\r\n    return (\r\n        <section>\r\n            <div className=\"box\">\r\n                <h1>DNA Repeat Record: {dna_id}</h1>\r\n                    <table class= \"infotable\">\r\n                        <tbody>\r\n                        <tr>\r\n                            <th scope=\"row\">Retrotransposon Class: </th>\r\n                            <td><Link to={\"/class/\" + rtClass}>{rtClass}</Link></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <th scope=\"row\">Family:</th>\r\n                                <td><Link to={\"/family/\"+ family}>{family}</Link></td>\r\n                        </tr>\r\n                        <tr >\r\n                            <th scope=\"row\">Protein Sequences Predicted:</th>\r\n                            <td>{proteinScript}</td>\r\n                        </tr >\r\n                        </tbody>\r\n                    </table >\r\n                    <h2>DNA sequence</h2>\r\n                        <p class=\"wrapped nokern\">{sequence}</p>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default DnaDetail","import axios from 'axios';\r\nimport React, { useEffect, useState, useRef } from 'react';\r\nimport Chartjs from 'chart.js';\r\n\r\nconst TeGraphComponent = (props) => {\r\n    \r\n    const [tissue, setTissue] = useState(null)\r\n    const [data, setData] = useState(null)\r\n\r\n    useEffect(() => {\r\n        const FetchData = async () => {\r\n            const tissueSelectedGet = { \"tissue\": props.tissueSelected }\r\n            const response = await axios.get('https://9fqebvawee.execute-api.us-east-1.amazonaws.com/dev/tegraphs', tissueSelectedGet);\r\n            setTissue(response.data.tissue)\r\n            setData(response.data.counts)\r\n        }\r\n        FetchData();\r\n    }, [props.tissueSelected]);\r\n\r\n\r\n    const chartContainer = useRef(null);\r\n    const [chartInstance, setChartInstance] = useState(null);\r\n\r\n    useEffect(() => {\r\n\r\n        if (data) {\r\n            const rtClass = Object.keys(data)[0];\r\n            const y = Object.keys(data[rtClass]);\r\n            const x = Object.values(data[rtClass])\r\n\r\n            const chartConfig = {\r\n                responsive: true,\r\n                maintainAspectRatio: false,\r\n                type: 'bar',\r\n                data: {\r\n                    labels: y,\r\n                    datasets: [{\r\n                        label: '#Detections',\r\n                        data: x,\r\n                        borderWidth: 1,\r\n                        backgroundColor: '#2e70b3'\r\n                    }]\r\n                },\r\n                options: {\r\n                    scales: {\r\n                        yAxes: [{\r\n                            ticks: {\r\n                                beginAtZero: true,\r\n                                precision: 0\r\n                            }\r\n                        }]\r\n                    }\r\n                }\r\n            }\r\n            if (chartContainer && chartContainer.current) {\r\n                const newChartInstance = new Chartjs(chartContainer.current, chartConfig);\r\n                setChartInstance(newChartInstance);\r\n            }\r\n        }\r\n    }, [data]);\r\n\r\n\r\n    return (\r\n        <canvas ref={chartContainer} className=\"GraphBox\"/>\r\n\r\n    );\r\n};\r\n\r\nexport default TeGraphComponent","import React, { useState } from 'react';\r\nimport TeGraphComponent from './TeGraphs';\r\nimport { Link } from 'react-router-dom';\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\n\r\nconst TeContainer = (props) => {\r\n\r\n    const { isAuthenticated, loginWithRedirect } = useAuth0()\r\n    const [tissueSelected, setTissueSelected] = useState(null);\r\n    const SelectTissue = (e) => {\r\n        setTissueSelected(e.target.innerHTML)\r\n    }\r\n    \r\n    const signUpIn = isAuthenticated\r\n        ? (\r\n                <div style={{ \"padding-top\": \"2rem\" }}>\r\n                    <Link to={{\r\n                        \"pathname\": \"/query\",\r\n                        \"state\": {\"uploadTe\": true}\r\n                    }}>\r\n                        Upload New Data\r\n                    </Link>\r\n                </div>\r\n            )\r\n        : (\r\n            <div style={{ \"padding-top\": \"2rem\" }}>\r\n                <span > Click here to sign in and upload your own data... </span>\r\n                <span onClick={loginWithRedirect} className=\"PageNumberLinks\">Sign In / Register</span>\r\n            </div>\r\n    )\r\n \r\n\r\n    return (\r\n        <section>\r\n            <div className=\"box\">\r\n                <div style={{ \"color\": \"green\", \"border\": \"green solid 2px\", \"padding\": \"1rem\", \"margin\": \"10px 0\" }}>\r\n                    <p>Tissue Expression Atlas is under development.</p>\r\n                    <p>This page is connected to a mock API</p>\r\n                </div>\r\n                <h1>Tissue Expression Atlas</h1>\r\n                <div className=\"TissueGraphsSection\">\r\n                    <div className=\"TissueList\">\r\n                        <h3>Select Tissue</h3>\r\n                        <table onClick={SelectTissue}>\r\n                            <tr>\r\n                                Lung\r\n                            </tr>\r\n                            <tr>\r\n                                Heart\r\n                            </tr>\r\n                        </table>\r\n                    </div>\r\n                    <div className=\"GraphContainer\">\r\n                        <TeGraphComponent tissueSelected={tissueSelected}/>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    {signUpIn}\r\n                </div>\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default TeContainer","export default __webpack_public_path__ + \"static/media/queryRawSeq.edd4f9b2.png\";","export default __webpack_public_path__ + \"static/media/queryRawSeqSmall.985e31a7.png\";","import React from 'react';\r\nimport { HashLink as Link } from 'react-router-hash-link';\r\nimport queryRawSeq from '../assets/architecture_diagrams/queryRawSeq.png'\r\nimport queryRawSeqSmall from '../assets/architecture_diagrams/queryRawSeqSmall.png'\r\n\r\n\r\nconst Documentation = () => {\r\n\r\n    return(\r\n        <section className=\"documentation\">\r\n            <div className=\"box\">\r\n                <h1>Documentation</h1>\r\n                <h2>The purpose of the project</h2>\r\n                <p>Retrobase is a project I am undertaking both as a vehicle for self-teaching full stack development and cloud architecting skills in AWS, as well as a means of demonstrating my abilities to prospective employers. It is a project in progress. </p>\r\n                <h2>The Specification</h2>\r\n                <p>Retrobase is a database of retrotransposon DNA sequences acquired from UCSC Table Browser, as well as protein sequences predicted <i>in silico</i> from those DNA sequences. DNA sequences were translated into potential protein sequences by a simple algorithm. These potential protein sequences were compared to the sequences of known retrotransposon proteins and, based on similarity, were predicted to be real retrotransposon protein sequences or not. Psi-BLAST was used to achieve this. The database can be queried using the Retrobase Query tool, both by manually entering DNA or protein sequences and by submitting a zipped MZID-formatted file containing peptide sequences. In order to submit a file via Query, the user must register and log in. Another tool under development is Tissue Expression Atlas, which will be an analytics tool, providing graphical insight into which retrotransposon classes, families and proteins are found expressed in different tissues of the body. The data presented in Tissue Expression Atlas will be from files uploaded by users, in Query, who give permission for it to be stored and made publically available.</p>\r\n                <p>Retrobase's frontend is composed of a React.js single page application run from AWS S3. The back end is composed of an AWS-based serverless application, using DynamoDB, S3, S3 Select, Lambda,  API Gateway, Cognito and Amplify. See below in the <Link to='/documentation#architectureDoc'>Architecture</Link> section for details on the architecture.</p>\r\n                <p>Originally, both tools were to be based on PostgreSQL in AWS RDS but I have decided to transition to DynamoDB to address the limitations of scaling with RDS in a serverless application. </p>\r\n\r\n                <h2 id=\"whatIsRetro\">What is a retrotransposon?</h2>\r\n                <p>In short, retrotransposons are sections of our genomes that descend from retroviruses. Retroviruses reproduce by inserting their own DNA into the host genome and tricking the host into reading their DNA and making more copies of the virus. When these viral elements enter the genomes of germ-line cells (sperms and egg cells) or foetal cells, all cells descending from those infected cells will contain the viral sequences. These viral sequences can also have the ability to amplify themselves by having the host cell create copies of them and insert them elsewhere in the genome- a process called transposition. As much as 40% of the human genome is composed of retrotransposon sequences, making their study an important part of biology. Thankfully, the majority of these sequences are inactivated by our cells or are mutated to the point of no long functioning, so usually do not cause us harm. However, there are disease conditions involving their activity.</p>\r\n\r\n                <h2 id=\"architectureDoc\">The Architecture</h2>\r\n                <h3>Database</h3>\r\n                <p>The backend is centered around the following <b>DynamoDB</b> tables:</p>\r\n                <p><b>query_db</b>, contains data on DNA sequences, protein sequences predicted from those DNA sequences and metadata on those sequences. As DynamoDB cannot be queried for substrings (besides begins with), DynamoDB is partnered with S3 Select. User input sequences are queried against parquet files containing the either DNA or protein sequences, along with the corresponding partition keys for the DynamoDB items containing sequence. These queries are orchestrated by Lambda functions, which the partition keys of matching sequences from the S3 select queries and collect the corresponding data from DynamoDB.</p>\r\n                <p><b>prot_db</b> simply contains data on known retrotransposon proteins, including protein functions and sequences. This data does not need to be accessed simultaneously with data retrieved by the Query tool and is therefore kept separately to avoid excessive data duplication. Data in this table need only be retrieved to display details on a given known retrotransposon protein.</p>\r\n                <p>Similarly, <b>class_db</b> contains data on retrotransposon classes for population of detail pages.</p>\r\n                <p><b>te_db</b> contains the data of Tissue Expression Atlas. Users upload MZID files to the application, which are stored in S3 and processed via a series of Lambda functions to extract sequences and query for substring matches to sequences in query_db. In te_db, an item is composed of a peptide ID and sequence that was found to have a match in the database, the ID of the file from which the peptide comes, the ID of the potential (<a href='#'>see The Specification above</a>) protein sequence to which the peptide was matched, the known protein(s) that Retrobase predicts the potential protein to be and the family and class of the sequence from which the potential protein was translated.</p>\r\n                <p><b>family_te_db</b> contains summary descriptive data on retrotransposon families expressed in different tissues.</p>\r\n                <p><b>protein_te_db</b> contains summary descriptive data on retrotransposon families expressed in different tissues.</p>\r\n\r\n                <h3>Query</h3>\r\n                <h3>With Raw sequence:</h3>\r\n                <img src={queryRawSeq} className=\"queryRawDiagram widthheight100 borderBlack1px\"/>\r\n                <img src={queryRawSeqSmall} className=\"queryRawDiagramSmall widthheight100 borderBlack1px\" />\r\n\r\n                <ol>\r\n                    <li>Client submits an asynchronous GET request to API Gateway: to a resource specifically for either DNA or protein sequences, with a query sequence in its params.</li>\r\n                    <li>API gateway passes the query to a Lambda function. The function creates a token. An item is created in a table, query_progress, in DynamoDB with the token as its key and an attribute, \"complete\", set to 0. The token is returned to the client via API gateway. The rest of the process will be asynchronous.</li>\r\n                    <li>A second Lambda is invoked asynchronously and is passed the query string and the token created by the first function.</li>\r\n                    <li>If the query string is less than 5 characters, a DynamoDB scan is executed immediately for sequences containing the query, skipping straight to step 6. This is because there will be so many sequences containing such a generic query that it is more efficient to scan the whole table than to run get_item individually on each partition key. If the query length is greater than 5, the Lambda function runs an S3 Select query on an parquet file in S3, composed of DNA or protein sequences and their corresponding partition keys in DynamoDB.</li>\r\n                    <li>The returned partition keys are then used to collect the relevant items from DynamoDB.</li>\r\n                    <li>The data is packaged into a JSON file and put in an S3 bucket.</li>\r\n                    <li>The item in the DynamoDB table, query_progress, with the token create in step 1 as key, has its \"completed\" attribute set to 1.</li>\r\n                    <li>The client is polling a separate API gateway resource. Sending a GET request to this method with a token triggers a third Lambda function.</li>\r\n                    <li>The third function checks if the item in the query_progress DynamoDB table with the token as its partition key has the \"complete\" attribute set to 1.</li>\r\n                    <li>If complete is now true, the data is retrieved from S3 and returned to the client via API Gateway.</li>\r\n\r\n                </ol>\r\n\r\n                <b>Limitations:</b>\r\n                <p>It is possible to simply contain all the relevant columns in the paquet file in S3 on which the initial SELECT query is run. This eliminates the need to query for the remaining values in DynamoDB. Therefore, the current architecture is illogical. I created the current architecture as a means of gaining experience creating asynchronous processes involving multiple cloud resources.</p>\r\n\r\n                <h3>With MZID file:</h3>\r\n                <p>Documentation coming soon!</p>\r\n\r\n                <h3>Tissue Expression Atlas</h3>\r\n                <p>Documentation coming soon!</p>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default Documentation","import { useHistory } from 'react-router-dom'\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\nimport { awsCognitoSignin } from './AuthFunctions'\r\nconst aws_config = require('../../aws_config.json')\r\n\r\nconst LoginRedirect = () => {\r\n    const history = useHistory()\r\n    const { user, getAccessTokenSilently } = useAuth0()\r\n    const domain = process.env.REACT_APP_AUTH0_DOMAIN\r\n    if (user) {\r\n        console.log(user, domain)\r\n        awsCognitoSignin(user, getAccessTokenSilently, domain)\r\n        history.push('/')\r\n    }\r\n    return <></>\r\n}\r\n\r\nexport default LoginRedirect","import './App.css';\r\n\r\nimport { useEffect, useState } from 'react'\r\n\r\n// Authentication\r\nimport Auth0ProviderWithHistory from \"./components/Auth/auth0-provider-with-history\";\r\n\r\n// Error handling and auth\r\nimport { ErrorBoundary } from 'react-error-boundary'\r\nimport RouteWithErrorBoundary from './components/RouteWithErrorBoundary'\r\nimport DetailErrorFallback from './components/ErrorFallbacks/DetailErrorFallback'\r\nimport NotFound from './components/NotFound'\r\n\r\n\r\n// Components\r\nimport HomePage from './components/HomePage';\r\nimport AccountPage from './components/AccountPage';\r\nimport TeResultsPage from './components/TeResultsPage';\r\nimport DnaSearchResults from './components/QueryResultsTables/DnaSearchResults';\r\nimport ProteinSearchResults from './components/QueryResultsTables/ProteinSearchResults';\r\nimport Navbar from './components/Navbar';\r\nimport NavbarSearchResults from './components/NavbarSearchResults'\r\nimport QueryFormPage from './components/QueryFormPage/QueryFormPage';\r\nimport FileUploadSuccess from './components/QueryFormPage/FileUploadSuccess';\r\nimport ClassDetail from './components/detailsPages/ClassDetail';\r\nimport FamilyDetail from './components/detailsPages/FamilyDetail';\r\nimport ProteinNameDetail from './components/detailsPages/ProteinNameDetail';\r\nimport ProteinRecordDetail from './components/detailsPages/ProteinRecordDetail';\r\nimport DnaDetail from './components/detailsPages/DnaDetail';\r\nimport TeContainer from './components/TissueExpression/TeContainer';\r\nimport Documentation from './components/Documentation';\r\nimport ErrorPage from './components/ErrorPage';\r\nimport LoginRedirect from './components/Auth/LoginRedirect'\r\n\r\n// React Routing\r\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\r\nimport ProtectedRouteWithErrorBoundary from './components/Auth/ProtectedRouteWithErrorBoundary'\r\nimport ProtectedRoute from './components/Auth/ProtectedRoute'\r\nimport ProtectedRouteAuth0 from './components/Auth/ProtectedRouteAuth0'\r\n\r\n\r\n\r\n// Amplify\r\nimport Amplify, { Auth } from 'aws-amplify';\r\nimport { Hub } from 'aws-amplify';\r\nimport { useAuth0 } from '@auth0/auth0-react';\r\nconst aws_config = require('./aws_config.json')\r\nAmplify.configure(aws_config);\r\n\r\n\r\nfunction App() {\r\n  return (\r\n  <BrowserRouter>  \r\n    <Auth0ProviderWithHistory>   \r\n    <div className=\"App\">\r\n      <Navbar/> \r\n      <Switch>\r\n          <RouteWithErrorBoundary exact path=\"/\" component={HomePage} />\r\n          <Route exact path=\"/account\" component={AccountPage} />\r\n          <RouteWithErrorBoundary path=\"/fileresults/:fileid\" component={TeResultsPage} />\r\n          <RouteWithErrorBoundary path=\"/class/:class\" component={ClassDetail} />\r\n          <RouteWithErrorBoundary path=\"/family/:family_id\" component={FamilyDetail} />\r\n          <RouteWithErrorBoundary path=\"/knownprotein/:knownprotein\" component={ProteinNameDetail} />\r\n          <RouteWithErrorBoundary path=\"/dna/:dna_id\" component={DnaDetail} />\r\n          <RouteWithErrorBoundary path=\"/predictedprotein/:protein_id\" component={ProteinRecordDetail} />\r\n          <RouteWithErrorBoundary exact path=\"/query\" component={QueryFormPage} />\r\n          <RouteWithErrorBoundary path=\"/filesentsuccess\" component={FileUploadSuccess} />\r\n          <RouteWithErrorBoundary path=\"/proteinquery/:query\" component={ProteinSearchResults} />\r\n          <RouteWithErrorBoundary path=\"/dnaquery/:query\" component={DnaSearchResults} />\r\n          <RouteWithErrorBoundary path=\"/searchresults/:search\" component={NavbarSearchResults} />\r\n\r\n          <Route path=\"/tissueexpression\">\r\n            <TeContainer/>\r\n          </Route>\r\n\r\n          <RouteWithErrorBoundary path=\"/documentation\" component={Documentation}/>\r\n\r\n          <Route path=\"/loginredirect\" component={ LoginRedirect }/>  \r\n          \r\n          <RouteWithErrorBoundary path=\"/error\" component={ErrorPage}/>\r\n          <RouteWithErrorBoundary component={NotFound}/>\r\n\r\n      </Switch>\r\n    </div>\r\n    </Auth0ProviderWithHistory>\r\n  </BrowserRouter>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport Auth0ProviderWithHistory from './components/Auth/auth0-provider-with-history'\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Auth0ProviderWithHistory>\r\n      <App />\r\n    </Auth0ProviderWithHistory>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}